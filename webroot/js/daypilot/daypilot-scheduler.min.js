/**
@license
DayPilot Pro for JavaScript 2018.2.3297
Copyright (c) 2005 - 2018 Annpoint s.r.o.
https://www.daypilot.org/
Use of this software is subject to license terms.
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(){if(typeof DayPilot.Scheduler!=='undefined'){return;};var $a=(function(){var $b=navigator.userAgent;return(($b.indexOf('Mozilla/5.0')>-1&&$b.indexOf('Android ')>-1&&$b.indexOf('AppleWebKit')>-1)&&!($b.indexOf('Chrome')>-1));})();var DayPilotScheduler={};var $c=function(){};var debug=false;var $d=function($e){if(!debug){return;};window.console&&window.console.log($e);};var $f=function($e){if(typeof $g==="undefined"){return;};$d($e);};var console={"log":$d};DayPilot.Scheduler=function(id,$h){this.v='2018.2.3297;';var $i=this;this.id=id;this.isScheduler=true;this.allowDefaultContextMenu=false;this.allowEventOverlap=true;this.allowMultiMove=false;this.allowMultiRange=false;this.allowMultiResize=false;this.allowMultiSelect=true;this.api=2;this.multiSelectRectangle="Disabled";this.autoRefreshCommand='refresh';this.autoRefreshEnabled=false;this.autoRefreshInterval=60;this.autoRefreshMaxCount=20;this.autoScroll="Drag";this.blockOnCallBack=false;this.navigatorBackSync=null;this.backendUrl=null;this.beforeCellRenderCaching=true;this.businessBeginsHour=9;this.businessEndsHour=18;this.businessWeekends=false;this.cellDuration=60;this.cellGroupBy='Day';this.cellSweeping=true;this.cellSweepingCacheSize=1000;this.cellWidth=40;this.cellWidthMin=1;this.cellWidthSpec="Fixed";this.cellsMarkBusiness=true;this.cornerHtml='';this.crosshairType='Header';this.cssClassPrefix="scheduler_default";this.days=1;this.doubleClickTimeout=300;this.dragOutAllowed=false;this.drawBlankCells=true;this.durationBarHeight=3;this.durationBarVisible=true;this.durationBarMode="Duration";this.dynamicEventRendering='Progressive';this.dynamicEventRenderingMargin=50;this.dynamicEventRenderingMarginX=null;this.dynamicEventRenderingMarginY=null;this.dynamicEventRenderingCacheSweeping=false;this.dynamicEventRenderingCacheSize=200;this.dynamicLoading=false;this.dynamicLoadingDelayedCellRendering=false;this.eventEditMinWidth=100;this.eventEndSpec="DateTime";this.eventHeight=25;this.eventHtmlLeftMargin=10;this.eventHtmlRightMargin=10;this.eventMarginLeft=0;this.eventMarginRight=0;this.eventMarginBottom=0;this.eventMinWidth=1;this.eventMoveMargin=5;this.eventMoveToPosition=false;this.eventMoveSkipNonBusiness=false;this.eventResizeMargin=5;this.eventStackingLineHeight=100;this.eventTapAndHoldHandling="Move";this.eventTextWrappingEnabled=false;this.eventUpdateInplaceOptimization=false;this.eventsLoadMethod="GET";this.eventVersionsEnabled=false;this.eventVersionHeight=25;this.eventVersionMargin=2;this.eventVersionPosition="Above";this.floatingEvents=true;this.floatingTimeHeaders=true;this.groupConcurrentEvents=false;this.groupConcurrentEventsLimit=1;this.headerHeight=20;this.heightSpec='Auto';this.height=300;this.hideBorderFor100PctHeight=false;this.hideUntilInit=true;this.infiniteScrollingEnabled=false;this.infiniteScrollingMargin=50;this.infiniteScrollingStepDays=30;this.initEventEnabled=true;this.jointEventsResize=true;this.jointEventsMove=true;this.layout='Auto';this.linkCreateHandling="Disabled";this.linkBottomMargin=10;this.linkPointSize=10;this.linksLoadMethod="GET";this.locale="en-us";this.loadingLabelText="Loading...";this.loadingLabelVisible=true;this.overrideWheelScrolling=false;this.messageBarPosition="Top";this.messageHideAfter=5000;this.messageHideOnMouseOut=true;this.multiMoveVerticalMode="Disabled";this.moveBy='Full';this.notifyCommit='Immediate';this.progressiveRowRendering=true;this.progressiveRowRenderingPreload=25;this.rowCreateHeight=null;this.rowCreateHtml="New row...";this.rowHeaderColumnDefaultWidth=80;this.rowHeaderHideIconEnabled=false;this.rowHeaderScrolling=false;this.rowHeaderSplitterWidth=3;this.rowHeaderWidthAutoFit=true;this.rowHeaderWidthMarginRight=0;this.rowHeaderCols=null;this.rowHeaderWidth=80;this.rowMarginBottom=0;this.rowMarginTop=0;this.rowMinHeight=0;this.rowsLoadMethod="GET";this.scale="CellDuration";this.scrollDelayDynamic=500;this.scrollDelayEvents=200;this.scrollDelayCells=0;this.scrollDelayFloats=0;this.scrollStep=null;this.scrollX=0;this.scrollY=0;this.selectedRows=[];this.separators=[];this.showNonBusiness=true;this.showToolTip=true;this.snapToGrid=true;this.startDate=DayPilot.Date.today();this.syncResourceTree=false;this.tapAndHoldTimeout=300;this.timeHeaders=[{"groupBy":"Default"},{"groupBy":"Cell"}];this.timeHeaderTextWrappingEnabled=false;this.treeAutoExpand=true;this.treeEnabled=false;this.treeIndent=20;this.treeImageMarginLeft=5;this.treeImageMarginTop=5;this.treePreventParentUsage=false;this.timeFormat="Auto";this.timeline=null;this.useEventBoxes='Always';this.viewType='Resources';this.visible=true;this.watchWidthChanges=true;this.weekStarts='Auto';this.width=null;this.eventClickHandling='Enabled';this.eventDeleteHandling="Disabled";this.eventHoverHandling='Bubble';this.eventDoubleClickHandling='Disabled';this.eventEditHandling='Update';this.eventMoveHandling='Update';this.eventResizeHandling='Update';this.eventRightClickHandling='ContextMenu';this.eventSelectHandling='Update';this.resourceCollapseHandling="Enabled";this.resourceExpandHandling="Enabled";this.rowClickHandling='Enabled';this.rowDoubleClickHandling="Disabled";this.rowCreateHandling="Disabled";this.rowEditHandling='Update';this.rowHeaderColumnResizedHandling="Update";this.rowSelectHandling='Update';this.rowMoveHandling="Disabled";this.timeHeaderClickHandling="Enabled";this.timeRangeClickHandling="Enabled";this.timeRangeDoubleClickHandling='Disabled';this.timeRangeSelectedHandling='Enabled';this.timeRangeRightClickHandling="ContextMenu";this.timeRangeSelectingStartEndEnabled=false;this.timeRangeSelectingStartEndFormat="MMMM d, yyyy";this.eventMovingStartEndEnabled=false;this.eventMovingStartEndFormat="MMMM d, yyyy";this.eventResizingStartEndEnabled=false;this.eventResizingStartEndFormat="MMMM d, yyyy";if(typeof DayPilot.Bubble==="function"){this.bubble=new DayPilot.Bubble();this.cellBubble=new DayPilot.Bubble();this.resourceBubble=new DayPilot.Bubble();}else{this.bubble=null;this.cellBubble=null;this.resourceBubble=null;};if(DayPilot.browser.ie){this.scrollDelayCells=100;this.scrollDelayFloats=100;};if($i.api===1){this.onEventMove=function(){};this.onEventResize=function(){};this.onResourceExpand=function(){};this.onResourceCollapse=function(){};};this.onEventClick=null;this.onEventClicked=null;this.onEventMove=null;this.onEventMoved=null;this.onEventMoving=null;this.onEventResize=null;this.onEventResized=null;this.onEventResizing=null;this.onEventRightClick=null;this.onEventRightClicked=null;this.onEventMouseOver=null;this.onEventMouseOut=null;this.onRowClick=null;this.onRowClicked=null;this.onTimeRangeClick=null;this.onTimeRangeClicked=null;this.onTimeRangeDoubleClick=null;this.onTimeRangeDoubleClicked=null;this.onTimeRangeSelect=null;this.onTimeRangeSelected=null;this.onTimeRangeSelecting=null;this.onTimeRangeRightClick=null;this.onTimeRangeRightClicked=null;this.onRowHeaderResized=null;this.onCellMouseOver=null;this.onCellMouseOut=null;this.onGridMouseDown=null;this.onBeforeCellRender=null;this.onBeforeEventRender=null;this.onBeforeTimeHeaderRender=null;this.onBeforeResHeaderRender=null;this.onBeforeRowHeaderRender=null;this.onBeforeCellExport=null;this.onBeforeEventExport=null;this.onBeforeTimeHeaderExport=null;this.onBeforeRowHeaderExport=null;this.onEventFilter=null;this.onRowFilter=null;this.onRectangleEventSelecting=null;this.onRectangleEventSelect=null;this.onRectangleEventSelected=null;this.onDimensionsChanged=null;this.onAfterUpdate=null;this.$b5=0;this.$b6=true;this.$b7=false;this.$b8=false;this.$b9=false;this.$ba=-1;this.$bb=-1;this.$bc=false;this.$bd=-1;this.$be=false;this.$bf=true;this.rowlist=DayPilot.list();this.itline=DayPilot.list();this.events={};this.cells={};this.elements={};this.elements.events=[];this.elements.bars=[];this.elements.text=[];this.elements.cells=[];this.elements.linesVertical=[];this.elements.separators=[];this.elements.range=[];this.elements.breaks=[];this.elements.links=[];this.elements.linkpoints=[];this.elements.rectangle=[];this.elements.hover=[];this.$bg={};this.$bg.cells=[];this.$bg.linesVertical={};this.$bg.linesHorizontal={};this.$bg.timeHeaderGroups=[];this.$bg.timeHeader={};this.$bg.pixels=[];this.$bg.breaks=[];this.$bg.events=[];this.clientState={};this.members={};this.members.obsolete=["Init","cleanSelection","cssClassPrefix","getHScrollPosition","setHScrollPosition","getVScrollPosition","setVScrollPosition","showBaseTimeHeader"];this.members.ignoreFilter=function(name){if(name.indexOf("div")===0){return true;};return false;};this.members.ignore=["internal","nav","debug","temp","elements","members","cellProperties","itline","rowlist","timeHeader","timeouts","rowHeaderCols"];this.members.noCssOnly=[];this.$bh='javasc';this.nav={};this.$bi=function($j,$k){var $j=JSON.parse($j);$i.onScrollCalled=false;if($j.CallBackRedirect){document.location.href=$j.CallBackRedirect;return;};if(typeof $i.onCallBackResult==="function"){var $l={};$l.result=$j;$l.preventDefault=function(){$l.preventDefault.value=true;};$i.onCallBackResult($l);if($l.preventDefault.value){$i.$bj();$i.$bk();$i.$bl();if($j.Message){if($i.message){$i.message($j.Message);}};$i.$bm($j.CallBackData,true);$i.$bn();$i.$bo();return;}};if($j.BubbleGuid){var $m=$j.BubbleGuid;var $n=this.bubbles[$m];delete this.bubbles[$m];$i.$bk();if(typeof $j.Result.BubbleHTML!=='undefined'&&$n){$n.updateView($j.Result.BubbleHTML,$n);};$i.$bn();return;};if(typeof DayPilot.Bubble!=="undefined"){DayPilot.Bubble.hideActive();};if(typeof $j.ClientState!=='undefined'){if($j.ClientState===null){$i.clientState={};}else{$i.clientState=$j.ClientState;}};if($j.UpdateType==="None"){$i.$bk();$i.$bn();if($j.Message){$i.message($j.Message);};$i.$bm($j.CallBackData,true);return;};if($j.VsUpdate){var $o=document.createElement("input");$o.type='hidden';$o.name=$i.id+"_vsupdate";$o.id=$o.name;$o.value=$j.VsUpdate;$i.$bp.innerHTML='';$i.$bp.appendChild($o);};if(typeof $j.TagFields!=='undefined'){$i.tagFields=$j.TagFields;};if(typeof $j.SortDirections!=='undefined'){$i.sortDirections=$j.SortDirections;};$i.$bg.drawArea=null;if($j.UpdateType==="Full"){$i.resources=$j.Resources;$i.colors=$j.Colors;$i.palette=$j.Palette;$i.dirtyColors=$j.DirtyColors;$i.cellProperties=$j.CellProperties;$i.cellConfig=$j.CellConfig;$i.separators=$j.Separators;$i.timeline=$j.Timeline;$i.timeHeader=$j.TimeHeader;$i.timeHeaders=$j.TimeHeaders;if(typeof $j.Links!=="undefined"){$i.links.list=$j.Links;};if(typeof $j.RowHeaderColumns!=='undefined')$i.rowHeaderColumns=$j.RowHeaderColumns;$i.startDate=$j.StartDate?new DayPilot.Date($j.StartDate):$i.startDate;$i.days=$j.Days?$j.Days:$i.days;$i.cellDuration=$j.CellDuration?$j.CellDuration:$i.cellDuration;$i.cellGroupBy=$j.CellGroupBy?$j.CellGroupBy:$i.cellGroupBy;$i.cellWidth=$j.CellWidth?$j.CellWidth:$i.cellWidth;if(typeof $j.Scale!=='undefined')$i.scale=$j.Scale;$i.viewType=$j.ViewType?$j.ViewType:$i.viewType;if(typeof $j.ShowNonBusiness!=='undefined')$i.showNonBusiness=$j.ShowNonBusiness;$i.businessBeginsHour=$j.BusinessBeginsHour?$j.BusinessBeginsHour:$i.businessBeginsHour;$i.businessEndsHour=$j.BusinessEndsHour?$j.BusinessEndsHour:$i.businessEndsHour;if(typeof $j.DynamicLoading!=='undefined')$i.dynamicLoading=$j.DynamicLoading;if(typeof $j.TreeEnabled!=='undefined')$i.treeEnabled=$j.TreeEnabled;$i.locale=$j.Locale?$j.Locale:$i.locale;if(typeof $j.TimeZone!=='undefined')$i.timeZone=$j.TimeZone;$i.timeFormat=$j.TimeFormat?$j.TimeFormat:$i.timeFormat;$i.rowHeaderCols=$j.RowHeaderCols?$j.RowHeaderCols:$i.rowHeaderCols;if(typeof $j.DurationBarMode!=="undefined")$i.durationBarMode=$j.DurationBarMode;if(typeof $j.CornerHTML!=='undefined'){$i.cornerHtml=$j.CornerHTML;};$i.hashes=$j.Hashes;$i.$bq();$i.$br();$i.$bs();$i.$bt();};if($j.Action!=="Scroll"){$i.$bu($j.Events);};if($j.UpdateType==='Full'){$i.$bv();$i.$bw();};$i.$bx();$i.$by();$i.$bz();$i.$bg.drawArea=null;if($j.Action!=="Scroll"){$i.$bA();$i.$bB();if($i.heightSpec==='Auto'||$i.heightSpec==='Max'){$i.$bC();};$i.$bD();$i.$bE();$i.$bF();$i.multiselect.clear(true);$i.multiselect.$bG($j.SelectedEvents);$i.$bH();$i.$bI();$i.$bJ();}else{$i.multiselect.clear(true);$i.multiselect.$bG($j.SelectedEvents);$i.$bK($j.Events);};if($i.timeRangeSelectedHandling!=="HoldForever"){$i.$bL();};if($j.UpdateType==="Full"){$i.setScroll($j.ScrollX,$j.ScrollY);$i.$bM();};$i.$bN();$i.$bj();if($j.SelectedRows){$i.$bO($j.SelectedRows);};$i.$bk();if($j.UpdateType==='Full'&&navigator.appVersion.indexOf("MSIE 7.")!==-1){window.setTimeout(function(){$i.$bv();$i.$bC();},0);};$i.$bl();if($j.Message){if($i.message){$i.message($j.Message);}};$i.$bm($j.CallBackData,true);$i.$bn();$i.$bo();if($j.UpdateType==='Full'&&$j.Action!=="Scroll"&&!$i.onScrollCalled){setTimeout(function(){$i.$bP();},0);}};this.$bj=function(){if($i.todo){if($i.todo.del){var $p=$i.todo.del;$p.parentNode.removeChild($p);$i.todo.del=null;}}};this.$bm=function($q,$r){var $s=function($q,$t){return function(){if($i.$bQ()){if(typeof $i.onAfterRender==='function'){var $l={};$l.isCallBack=$t;$l.isScroll=false;$l.data=$q;$i.onAfterRender($l);}}else{if($i.afterRender){$i.afterRender($q,$t);}}};};window.setTimeout($s($q,$r),0);};this.scrollTo=function($u,$v,$w){if($i.$bR.enabled){$i.$bR.scrollToRequested=$u;setTimeout(function(){var $u=$i.$bR.scrollToRequested;if($u){$i.$bS($u,$v,$w);}},0);}else{$i.$bS($u,$v,$w);}};this.$bS=function($u,$v,$w){if(!$u){return;};if(!$i.$bT){$i.$bU={$u:$u,$v:$v,$w:$w};return;};if($i.viewType==="Days"){var $x=$i.$bV(new DayPilot.Date($u));if(!$x){return;};setTimeout(function(){var scrollY=$x.top;$i.nav.scroll.scrollTop=scrollY;},100);return;};var $y;if($u instanceof DayPilot.Date){$y=this.getPixels($u).left;}else if(typeof $u==="string"){$y=this.getPixels(new DayPilot.Date($u)).left;}else if(typeof $u==="number"){$y=$u;}else{throw "Invalid scrollTo() parameter. Accepted parameters: string (ISO date), number (pixels), DayPilot.Date object";};var $z=this.$bW.clientWidth;var $A=this.nav.scroll.clientWidth;$w=$w||"left";switch($w.toLowerCase()){case "left":break;case "middle":$y-=$A/2;break;case "right":$y-=$A;break;};if($y<0){$y=0;};if($y>$z-$A){$y=$z-$A;};if(!$v){$i.$bX($y);return;};var $B=Math.abs($i.nav.scroll.scrollLeft-$y);var $C=$B/$z;var $D=50;if(typeof $v==="number"){$D=$v;}else if(typeof $v==="string"){switch($v){case "fast":$D=30;break;case "normal":$D=50;break;case "slow":$D=100;break;case "linear":$D=Math.floor(100*$C);break;}};if($C>.6){$D=Math.min($D,80);};this.$bY($y,$D);};this.$bY=function($y,$D){var $E={};$E.steps=[];$E.index=0;$E.delay=10;$E.next=function(){var $F=$E.steps[$E.index];$E.index+=1;return $F;};$E.finished=function(){$i.$bP();};var $G=$i.getScrollX();var $D=$D||100;var $H=$y-$G;for(var i=0;i<$D;i++){var x=i/$D;var $I=((x-.5)*2)/(Math.pow(((x-0.5)*2),2)+1)+.5;$E.steps.push($G+$H*$I);};$E.steps.push($y);scrollStep($E);function scrollStep($E){var $F=$E.next();if(typeof $F==="undefined"){$E.finished&&$E.finished();return;};$i.setScrollX($F);window.clearTimeout($i.refreshTimeout);setTimeout(function(){scrollStep($E);},$E.delay);}};this.scrollToResource=function(id){DayPilot.complete(function(){var $x=$i.$bZ(id);if(!$x){return;};setTimeout(function(){var scrollY=$x.top;$i.nav.scroll.scrollTop=scrollY;},100);});};this.$c0=function(){if(!this.floatingTimeHeaders){return;};if(!this.timeHeader){return;};var $J=this.$c1();if(!$J){return;};this.$c2();var $K=$J.pixels.left+$L.shiftX;var end=$J.pixels.right+$L.shiftX;var $M=[];for(var y=0;y<this.timeHeader.length;y++){for(var x=0;x<this.timeHeader[y].length;x++){var h=this.timeHeader[y][x];var $N=h.left;var $O=h.left+h.width;var $P=null;if($N<$K&&$K<$O){$P={};$P.x=x;$P.y=y;$P.marginLeft=$K-$N;$P.marginRight=0;$P.div=this.$bg.timeHeader[x+"_"+y];$M.push($P);};if($N<end&&end<$O){if(!$P){$P={};$P.x=x;$P.y=y;$P.marginLeft=0;$P.div=this.$bg.timeHeader[x+"_"+y];$M.push($P);};$P.marginRight=$O-end;break;}}};for(var i=0;i<$M.length;i++){var $P=$M[i];this.$c3($P.div,$P.marginLeft,$P.marginRight);}};this.$bN=function(){this.$c0();this.$c4();};this.$c5={};var $Q=this.$c5;$Q.eventsInRectangle=function(x,y,$A,$R){var $S=x;var $T=x+$A;var $U=y;var $V=y+$R;return DayPilot.list($i.elements.events).filter(function(e){var $q=e.event;var $N=$q.part.left;var $O=$q.part.left+$q.part.width;var $x=$i.rowlist[$q.part.dayIndex];var top=$x.top+$q.part.top;var $W=top+$q.part.height;if(DayPilot.Util.overlaps($N,$O,$S,$T)&&DayPilot.Util.overlaps(top,$W,$U,$V)){return true;}});};$Q.events=function($X){var $Y=[];var $X=$X||"All";var $J=$i.$c1();if(!$J){return DayPilot.list($Y);};var $K=$J.pixels.left;var end=$J.pixels.right;for(var i=0;i<$i.elements.events.length;i++){var e=$i.elements.events[i];var $q=e.event;var $N=$q.part.left;var $O=$q.part.left+$q.part.width;switch($X){case "Left":if($N<$K&&$K<$O){$Y.push(e);};break;case "All":if(DayPilot.Util.overlaps($N,$O,$K,end)){$Y.push(e);};break;}};return DayPilot.list($Y).addProps({"area":$J});};this.$c4=function(){if(!this.floatingEvents){return;};var $Z=$Q.events("Left");this.$c6();$Z.filter(function($00){return $00.event.data.type!=="Milestone";}).forEach(function($00){var e=$00.event;var $N=$Z.area.pixels.left;var $K=e.part.left;var $01=$N-$K;$i.$c7($00,$01,0);});};this.elements.sections=[];this.elements.hsections=[];this.$c3=function($02,$01,$03){var $04=document.createElement("div");$04.setAttribute("unselectable","on");$04.className=this.$c8("_timeheader_float");$04.style.position="absolute";$04.style.left=$01+"px";$04.style.right=$03+"px";$04.style.top="0px";$04.style.bottom="0px";$04.style.overflow="hidden";var $05=document.createElement("div");$05.className=this.$c8("_timeheader_float_inner");$05.setAttribute("unselectable","on");var $06=$02.cell.th;if($06.innerHTML){$05.innerHTML=$06.innerHTML;};if($06.fontColor){$05.style.color=$06.fontColor;};$04.appendChild($05);$02.section=$04;$02.insertBefore($04,$02.firstChild.nextSibling);$02.firstChild.innerHTML='';this.elements.hsections.push($02);};this.$c2=function(){for(var i=0;i<this.elements.hsections.length;i++){var e=this.elements.hsections[i];var $q=e.cell;if($q&&e.firstChild){e.firstChild.innerHTML=$q.th.innerHTML;};DayPilot.de(e.section);e.section=null;};this.elements.hsections=[];};this.$c7=function($02,$01,$03){var $04=document.createElement("div");$04.setAttribute("unselectable","on");$04.className=this.$c8($07.eventFloat);$04.style.position="absolute";$04.style.left=$01+"px";$04.style.right=$03+"px";$04.style.top="0px";$04.style.bottom="0px";$04.style.overflow="hidden";var $05=document.createElement("div");$05.className=this.$c8($07.eventFloatInner);$05.setAttribute("unselectable","on");$05.innerHTML=$02.event.client.html();if($02.event.data.fontColor){$05.style.color=$02.event.data.fontColor;};$04.appendChild($05);$02.section=$04;$02.insertBefore($04,$02.firstChild.nextSibling);$02.firstChild.innerHTML='';var e=$02.event;var $08=e.cache?e.cache.areas:e.data.areas;$08=$08||[];var $h={"offsetX":$i.$c9($05),"eventDiv":$02,"areas":$08.filter(function(a){return !(a.start||e.end);})};DayPilot.Areas.attach($04,$02.event,$h);DayPilot.Areas.disable($02);this.elements.sections.push($02);};this.$ca=null;this.$c9=function($05){if($i.$ca===null){$i.$ca=parseInt(new DayPilot.StyleReader($05).get("padding-left"));};return $i.$ca;};this.$c6=function(){for(var i=0;i<this.elements.sections.length;i++){var e=this.elements.sections[i];var $q=e.event;if($q){e.firstChild.innerHTML=$q.client.html();};DayPilot.de(e.section);DayPilot.Areas.enable(e);e.section=null;};this.elements.sections=[];};this.setScrollX=function(scrollX){if(!$i.$bR.enabled){$i.$bX(scrollX);}else{$i.$bR.scrollXRequested=scrollX;setTimeout(function(){var scrollX=$i.$bR.scrollXRequested;if(typeof scrollX==="number"){$i.$bX(scrollX);}},0);}};this.$bX=function(scrollX){var scroll=$i.nav.scroll;var $09=$i.$cb();if(scroll.clientWidth+scrollX>$09){scrollX=$09-scroll.clientWidth;};$i.divTimeScroll.scrollLeft=scrollX;scroll.scrollLeft=scrollX;};this.setScrollY=function(scrollY){var $h=$h||{};if(!$i.$bR.enabled){$i.$cc(scrollY);}else{$i.$bR.scrollYRequested=scrollY;setTimeout(function(){var scrollY=$i.$bR.scrollYRequested;if(typeof scrollY==="number"){$i.$cc(scrollY);}},0);}};this.$cc=function(scrollY){var scroll=$i.nav.scroll;var $0a=$i.$bd;if(scroll.clientHeight+scrollY>$0a){scrollY=$0a-scroll.clientHeight;};$i.divResScroll.scrollTop=scrollY;scroll.scrollTop=scrollY;};this.setScroll=function(scrollX,scrollY){$i.setScrollX(scrollX);$i.setScrollY(scrollY);};this.message=function($0b,$0c){if($0b===null){return;};var $h={};if(typeof arguments[1]==="object"){$h=arguments[1];$0c=$h.delay;};var $0c=$0c||this.messageHideAfter||2000;var top=this.$cd()+1;var $N=this.$ce()+$0d.splitterWidth();var $O=DayPilot.sw($i.nav.scroll)+1;var $W=DayPilot.sh($i.nav.scroll)+1;var $02;if(!this.nav.message){$02=document.createElement("div");$02.style.position="absolute";$02.style.left=$N+"px";$02.style.right=$O+"px";$02.style.display='none';DayPilot.re($02,DayPilot.touch.start,function(e){$i.nav.message.style.display='none';e.preventDefault();e.stopPropagation();});$02.onmousemove=function(){if(!$i.messageHideOnMouseOut){return;};if($02.messageTimeout&&!$02.status){clearTimeout($02.messageTimeout);}};$02.onmouseout=function(){if(!$i.messageHideOnMouseOut){return;};if($i.nav.message.style.display!=='none'){$02.messageTimeout=setTimeout($i.$cf,500);}};var $05=document.createElement("div");$05.onclick=function(){$i.nav.message.style.display='none';};$05.className=this.$c8("_message");$02.appendChild($05);var close=document.createElement("div");close.style.position="absolute";close.className=this.$c8("_message_close");close.onclick=function(){$i.nav.message.style.display='none';};$02.appendChild(close);this.nav.top.appendChild($02);this.nav.message=$02;}else{$02=$i.nav.message;};var $0e=function(){var $02=$i.nav.message;$02.firstChild.className=$i.$c8("_message");if($h.cssClass){DayPilot.Util.addClass($02.firstChild,$h.cssClass);};var $05=$i.nav.message.firstChild;$05.innerHTML=$0b;var $O=DayPilot.sw($i.nav.scroll)+1;$i.nav.message.style.right=$O+"px";var $w=$i.messageBarPosition||"Top";if($w==="Bottom"){$i.nav.message.style.bottom=$W+"px";$i.nav.message.style.top="";}else if($w==="Top"){$i.nav.message.style.bottom="";$i.nav.message.style.top=top+"px";};var end=function(){$02.messageTimeout=setTimeout($i.$cf,$0c);};DayPilot.fade($i.nav.message,0.2,end);};clearTimeout($02.messageTimeout);if(this.nav.message.style.display!=='none'){DayPilot.fade($i.nav.message,-0.2,$0e);}else{$0e();}};this.$cf=function(){if(!$i.nav){return;};if(!$i.nav.message){return;};var end=function(){$i.nav.message.style.display='none';};DayPilot.fade($i.nav.message,-0.2,end);};this.$cg=function(){if(!$i.nav){return;};if(!$i.nav.message){return;};$i.nav.message.style.display='none';};this.message.show=function($0b){$i.message($0b);};this.message.hide=function(){$i.$cf();};this.$ch=null;this.$bC=function(){if(!this.nav.scroll){return;};(function fromDrawCells(){var $A=$i.$cb();$i.$bW.style.height=$i.$bd+"px";$i.$bW.style.width=$A+"px";if($i.cellWidthSpec==="Auto"&&!$i.$ci){$i.nav.scroll.style.overflowX="hidden";$i.nav.scroll.scrollLeft=0;}else{if($A>$i.nav.scroll.clientWidth){$i.nav.scroll.style.overflowX="auto";}else{$i.nav.scroll.style.overflowX="hidden";}}})();var $0f=1;if(this.$ch!==null){this.nav.top.style.border=this.$ch;this.$ch=null;};if(this.heightSpec==='Parent100Pct'||this.heightSpec==="Max100Pct"){this.nav.top.style.height="100%";if(this.hideBorderFor100PctHeight){this.$ch=this.nav.top.style.border;this.nav.top.style.border="0 none";};this.height=parseInt(this.nav.top.clientHeight,10)-(this.$cd())-$0f;};this.nav.scroll.style.height='30px';var $R=this.$cj();var $0g=$R+this.$cd()+$0f;if($R>=0){this.nav.scroll.style.height=($R)+'px';this.$ck.style.height=($R)+'px';};if(this.nav.divider){if(!$0g||isNaN($0g)||$0g<0){$0g=0;};this.nav.divider.style.height=($0g)+"px";};if(this.heightSpec!=="Parent100Pct"){this.nav.top.style.height=($0g)+"px";};if($i.nav.resScrollSpace){$i.nav.resScrollSpace.style.height=($R+20)+"px";};for(var i=0;i<this.elements.separators.length;i++){this.elements.separators[i].style.height=this.$bd+'px';};for(var i=0;i<this.elements.linesVertical.length;i++){this.elements.linesVertical[i].style.height=this.$bd+'px';};$i.$cl();};this.$br=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart();this.$bg.pixels=[];this.itline=DayPilot.list();var $0h=this.cellWidthSpec==="Auto";var $0i=function(){if(!$0h){return;};var $0j=0;if($i.$cm()&&$i.timeline){$0j=$i.timeline.length;}else{if($i.scale==="Manual"){$0j=$i.timeline.length;}else{$i.$cn();$0j=$i.itline.length;$i.itline=DayPilot.list();}};var $A=$i.$co();if($0j>0&&$A>0){var $P=$A/$0j;$i.cellWidth=Math.max($P,$i.cellWidthMin);$i.$ci=$P<$i.cellWidthMin;}};$0i();if(this.$cm()&&this.timeline){if(this.timeline){this.itline=DayPilot.list();var $0k=null;var $N=0;for(var i=0;i<this.timeline.length;i++){var $0l=this.timeline[i];var $P={};$P.start=new DayPilot.Date($0l.start);$P.end=$0l.end?new DayPilot.Date($0l.end):$P.start.addMinutes(this.cellDuration);if(!$0l.width){var $O=Math.floor($N+this.cellWidth);var $A=$O-Math.floor($N);$P.left=Math.floor($N);$P.width=$A;$N+=this.cellWidth;}else{$P.left=$0l.left||$N;$P.width=$0l.width||this.cellWidth;$N+=$P.width;};$P.breakBefore=$0k&&$0k.ticks!==$P.start.ticks;$0k=$P.end;this.itline.push($P);}};if($0h){this.$cp();}}else{this.timeHeader=[];if(this.scale==="Manual"){this.itline=DayPilot.list();var $N=0;var $0k=null;for(var i=0;i<this.timeline.length;i++){var $0l=this.timeline[i];var $P={};$P.start=new DayPilot.Date($0l.start);$P.end=$0l.end?new DayPilot.Date($0l.end):$P.start.addMinutes(this.cellDuration);if($0k&&$P.start.ticks<$0k.ticks){throw "The timeline must be sequential";};var w=$0l.width||this.cellWidth;var $O=Math.floor($N+w);var $A=$O-Math.floor($N);$P.left=Math.floor($N);$P.width=$A;$N+=w;$P.breakBefore=$0k&&$0k.ticks!==$P.start.ticks;$0k=$P.end;this.itline.push($P);}}else{this.$cn();};this.$cq();}};this.infinite={};this.infinite.shiftStart=function($0m){$L.shiftStart($0m);};this.infinite.scrollTo=function($u){$L.shiftTo($u);};this.$cr={};var $L=this.$cr;$L.shiftX=0;$L.active=false;$L.updateRowStarts=function(){DayPilot.list($i.rowlist).each(function($x,i){$x.start=$i.$cs();$x.data=null;$i.$ct(i);});};$L.isEnabled=function(){return $i.infiniteScrollingEnabled&&!$i.$cm();};$L.shiftTo=function($0n){var $0n=new DayPilot.Date($0n);var $K=$0n.addDays(-$i.infiniteScrollingStepDays).getDatePart();var $H=new DayPilot.Duration($K.getTime()-$i.startDate.getDatePart().getTime()).totalDays();$L.shiftStart($H,$0n);};$L.shiftStart=function($0m,scrollTo){var $y;$L.active=true;var $0o=$i.startDate;var $0p=$i.startDate.addDays($0m);if($0m>0){$y=-$i.getPixels($0p).left;};$i.startDate=$i.startDate.addDays($0m);$i.itline=DayPilot.list();$i.$bg.pixels=[];$i.$cu={};$i.$cn();$L.updateRowStarts();if($0m<0){$y=$i.getPixels($0o).left;};$i.timeHeader=[];$i.$cq();$i.$bw();$i.cellProperties={};$i.$bD();$i.$bF();$i.$bu();$i.$bE();$i.$bC();if(typeof scrollTo!=='undefined'){$i.scrollTo(new DayPilot.Date(scrollTo));$i.$bP();}else{$i.nav.scroll.scrollLeft+=$y;};$i.$bI();$i.$bJ();$L.active=false;};this.$cn=function(){var $0q=(this.viewType!=='Days')?this.startDate.addDays(this.days):this.startDate.addDays(1);var $K=this.startDate;var end=this.$cv($K);var $0r=false;var $N=0;while(end.ticks<=$0q.ticks&&end.ticks>$K.ticks){if(this.$cw($K,end,true)){var $O=Math.floor($N+this.cellWidth);var $A=$O-Math.floor($N);var $0s={};$0s.start=$K;$0s.end=end;$0s.left=Math.floor($N);$0s.width=$A;$0s.breakBefore=$0r;this.itline.push($0s);$N+=this.cellWidth;$0r=false;}else{$0r=true;};$K=end;end=this.$cv($K);}};this.$cp=function(){if(!this.timeHeader){return;};for(var y=0;y<this.timeHeader.length;y++){var $x=this.timeHeader[y];for(var x=0;x<$x.length;x++){var h=$x[x];h.left=this.getPixels(new DayPilot.Date(h.start)).left;var $O=this.getPixels(new DayPilot.Date(h.end)).left;var $A=$O-h.left;h.width=$A;}}};this.$cq=function(){var $0t=this.timeHeaders;if(!$0t){$0t=[{"groupBy":this.cellGroupBy},{"groupBy":"Cell"}];};if(this.itline.isEmpty()){this.timeHeader=[];for(var i=0;i<$0t.length;i++){this.timeHeader[i]=[];};return;};var $0u=$i.$cx();for(var i=0;i<$0t.length;i++){var $0v=$0t[i].groupBy;var $0w=$0t[i].format;if($0v==="Default"){$0v=this.cellGroupBy;};var $0x=[];var $K=this.$cs();while($K.ticks<$0u.ticks){var h={};h.start=$K;h.end=this.$cy(h.start,$0v);if(h.start.ticks===h.end.ticks){break;};h.left=this.getPixels(h.start).left;var $O=this.getPixels(h.end).left;var $A=$O-h.left;h.width=$A;h.colspan=Math.ceil($A/(1.0*this.cellWidth));if(typeof $0w==="string"){h.innerHTML=h.start.toString($0w,$0d.locale());}else{h.innerHTML=this.$cz(h,$0v);};h.text=h.innerHTML;if($A>0){if(typeof this.onBeforeTimeHeaderRender==='function'){var $P={};$P.start=h.start;$P.end=h.end;$P.text=h.innerHTML;$P.html=h.innerHTML;$P.toolTip=h.innerHTML;$P.backColor=null;$P.fontColor=null;$P.level=this.timeHeader.length;$P.cssClass=null;var $l={};$l.header=$P;this.onBeforeTimeHeaderRender($l);h.text=h.innerHTML;h.innerHTML=$P.html;h.backColor=$P.backColor;h.fontColor=$P.fontColor;h.toolTip=$P.toolTip;h.areas=$P.areas;h.cssClass=$P.cssClass;};$0x.push(h);};$K=h.end;};this.timeHeader.push($0x);}};this.$cw=function($K,end){if(typeof this.onIncludeTimeCell==='function'){var $P={};$P.start=$K;$P.end=end;$P.visible=true;var $l={};$l.cell=$P;this.onIncludeTimeCell($l);return $P.visible;};if(this.showNonBusiness){return true;};var $0y=$i.viewType==="Days";return this.isBusiness({"start":$K,"end":end},$0y);};this.getPixels=function($u){var $0z=$u.ticks;var $0A=this.$bg.pixels[$0z];if($0A){return $0A;};var $0B=null;var $0C=221876841600000;if(this.itline.length===0||$0z<this.itline[0].start.ticks){var $j={};$j.cut=false;$j.left=0;$j.boxLeft=$j.left;$j.boxRight=$j.left;$j.i=null;return $j;};var $0D=this.$cA($u);var si=Math.max($0D.i-1,0);for(var i=si;i<this.itline.length;i++){var $P=this.itline[i];var $0E=$P.start.ticks;var $0F=$P.end.ticks;if($0E<$0z&&$0z<$0F){var $0G=$0z-$0E;var $j={};$j.cut=false;$j.left=$P.left+this.$cB($P,$0G);$j.boxLeft=$P.left;$j.boxRight=$P.left+$P.width;$j.i=i;break;}else if($0E===$0z){var $j={};$j.cut=false;$j.left=$P.left;$j.boxLeft=$j.left;$j.boxRight=$j.left+$P.width;$j.i=i;break;}else if($0F===$0z){var $j={};$j.cut=false;$j.left=$P.left+$P.width;$j.boxLeft=$j.left;$j.boxRight=$j.left;$j.i=i+1;break;}else if($0z<$0E&&$0z>$0C){var $j={};$j.cut=true;$j.left=$P.left;$j.boxLeft=$j.left;$j.boxRight=$j.left;$j.i=i;break;};$0C=$0F;};if(!$j){var $0H=this.itline[this.itline.length-1];var $j={};$j.cut=true;$j.left=$0H.left+$0H.width;$j.boxLeft=$j.left;$j.boxRight=$j.left;$j.i=null;};this.$bg.pixels[$0z]=$j;return $j;};this.getDate=function($N,$0I,$0J){var $w=this.$cC($N,$0J);if(!$w){return null;};var x=$w.x;var $0K=this.itline[x];if(!$0K){return null;};var $K=($0J&&!$0I)?$0K.end:$0K.start;if(!$0I){return $K;}else{return $K.addTime(this.$cD($w.cell,$w.offset));}};this.$cC=function($y,$0J){if(this.itline.length===0){return null;};var $G=0;var $0B=0;for(var i=0;i<this.itline.length;i++){var $P=this.itline[i];var $A=$P.width||this.cellWidth;$G+=$A;if(($y<$G)||($0J&&$y===$G)){var $j={};$j.x=i;$j.offset=$y-$0B;$j.cell=$P;return $j;};$0B=$G;};var $P=$i.itline.last();var $j={};$j.x=this.itline.length-1;$j.offset=$P.width||this.cellWidth;$j.cell=$P;return $j;};this.$cE=function($0L){return this.$cA($0L);};this.$cF=function($0L){var $G=new DayPilot.Date($0L);for(var i=0;i<this.itline.length;i++){var $P=this.itline[i];if($P.start.ticks<=$G.ticks&&$G.ticks<$P.end.ticks){var $j={};$j.hidden=false;$j.current=$P;return $j;};if($G.ticks<$P.start.ticks){var $j={};$j.hidden=true;$j.previous=i>0?this.itline[i-1]:null;$j.current=null;$j.next=this.itline[i];return $j;}};var $j={};$j.past=true;$j.previous=this.itline[this.itline.length-1];return $j;};this.$cA=function($0L){var $G=new DayPilot.Date($0L);var $0M=0;var $0N=this.itline[0];if($G.ticks<$0N.start.ticks){var $j={};$j.hidden=true;$j.previous=null;$j.current=null;$j.next=this.itline[0];$j.i=-1;return $j;};var to=this.itline.length-1;var $0H=this.itline[to];if($G.ticks>$0H.end.ticks){var $j={};$j.past=true;$j.previous=this.itline[this.itline.length-1];$j.i=this.itline.length;return $j;};if($G.ticks===$0H.end.ticks){var $j={};$j.past=false;$j.current=this.itline[this.itline.length-1];$j.i=this.itline.length-1;return $j;};var si=(function(){var $0O=$i.itline;var $0P;while($0M<=to){$0P=Math.floor(($0M+to)/2);if($0O[$0P].start.ticks>$G.ticks){to=$0P-1;}else if($0O[$0P].end.ticks<$G.ticks){$0M=$0P+1;}else{return $0P;}};return $0M;})();for(var i=si;i<this.itline.length;i++){var $P=this.itline[i];if($P.start.ticks<=$G.ticks&&$G.ticks<$P.end.ticks){var $j={};$j.hidden=false;$j.current=$P;$j.i=i;return $j;};if($G.ticks<$P.start.ticks){var $j={};$j.hidden=true;$j.previous=i>0?this.itline[i-1]:null;$j.current=null;$j.next=this.itline[i];$j.i=i;return $j;}};var $j={};$j.past=true;$j.previous=this.itline[this.itline.length-1];$j.i=this.itline.length;return $j;};this.$cB=function($P,$0z){var $A=$P.width||this.cellWidth;var $0Q=$P.end.ticks-$P.start.ticks;return Math.floor(($A*$0z)/($0Q));};this.$cD=function($P,$y){var $0Q=$P.end.ticks-$P.start.ticks;var $A=$P.width||this.cellWidth;return Math.floor($y/$A*$0Q);};this.$cG=function(ev){if(DayPilot.Global.touch.start){return;};if(DayPilotScheduler.preventEventClick){return;};$0R={};$i.$cH(this,ev);};this.eventClickPostBack=function(e,$q){this.$cI('EventClick',e,$q);};this.eventClickCallBack=function(e,$q){this.$cJ('EventClick',e,$q);};this.$cH=function($02,ev){var e=$02.event;if(!e){return;};var ev=ev||window.event;if(typeof(DayPilot.Bubble)!=='undefined'){DayPilot.Bubble.hideActive();};if(!e.client.doubleClickEnabled()){$i.$cK($02,ev);return;};if(!$i.timeouts.click){$i.timeouts.click=[];};var $0S=function($02,ev){return function(){$i.$cK($02,ev);};};$i.timeouts.click.push(window.setTimeout($0S($02,ev),$i.doubleClickTimeout));};this.$cL=function(x){return $i.itline[x];};this.$cK=function($02,ev){if(typeof ev==="boolean"){throw "Invalid _eventClickSingle parameters";};var e=$02.event;if(!e){return;};var $0T=ev.ctrlKey;var $0U=ev.metaKey;if(!e.client.clickEnabled()){return;};if($i.$bQ()){var $l={};$l.e=e;$l.div=$02;$l.originalEvent=ev;$l.ctrl=$0T;$l.meta=$0U;$l.shift=ev.shiftKey;$l.preventDefault=function(){this.preventDefault.value=true;};$l.control=$i;$l.toJSON=function(){return DayPilot.Util.copyProps($l,{},["e","ctrl","meta","shift"]);};if(typeof $i.onEventClick==='function'){$i.onEventClick($l);if($l.preventDefault.value){return;}};switch($i.eventClickHandling){case 'PostBack':$i.eventClickPostBack(e);break;case 'CallBack':$i.eventClickCallBack(e);break;case 'Edit':$i.$cM($02);break;case 'Select':$i.$cN($02,e,$0T,$0U);break;case 'ContextMenu':var $0V=e.client.contextMenu();if($0V){$0V.show(e);}else{if($i.contextMenu){$i.contextMenu.show(e);}};break;case 'Bubble':if($i.bubble){$i.bubble.showEvent(e);};break;case "RectangleSelect":if($i.multiSelectRectangle!=="Disabled"){$0W.start();return false;};break;};if(typeof $i.onEventClicked==='function'){$i.onEventClicked($l);}}else{switch($i.eventClickHandling){case 'PostBack':$i.eventClickPostBack(e);break;case 'CallBack':$i.eventClickCallBack(e);break;case 'JavaScript':$i.onEventClick(e);break;case 'Edit':$i.$cM($02);break;case 'Select':$i.$cN($02,e,$0T,$0U);break;case 'ContextMenu':var $0V=e.client.contextMenu();if($0V){$0V.show(e);}else{if($i.contextMenu){$i.contextMenu.show(e);}};break;case 'Bubble':if($i.bubble){$i.bubble.showEvent(e);};break;case "RectangleSelect":if($i.multiSelectRectangle!=="Disabled"){$0W.start();return false;};break;}}};this.$cO=function(e){if($i.$bQ()){var $l={};$l.e=e;$l.preventDefault=function(){this.preventDefault.value=true;};$l.control=$i;$l.toJSON=function(){return DayPilot.Util.copyProps($l,{},["e"]);};if(typeof $i.onEventDelete==='function'){$i.onEventDelete($l);if($l.preventDefault.value){return;}};switch($i.eventDeleteHandling){case 'PostBack':$i.eventDeletePostBack(e);break;case 'CallBack':$i.eventDeleteCallBack(e);break;case 'Update':$i.events.remove(e);break;};if(typeof $i.onEventDeleted==='function'){$i.onEventDeleted($l);}}else{switch($i.eventDeleteHandling){case 'PostBack':$i.eventDeletePostBack(e);break;case 'CallBack':$i.eventDeleteCallBack(e);break;case 'JavaScript':$i.onEventDelete(e);break;}}};this.eventDeletePostBack=function(e,$q){this.$cI('EventDelete',e,$q);};this.eventDeleteCallBack=function(e,$q){this.$cJ('EventDelete',e,$q);};this.setHScrollPosition=function($y){this.nav.scroll.scrollLeft=$y;};this.getScrollX=function(){return this.nav.scroll.scrollLeft;};this.getHScrollPosition=this.getScrollX;this.getScrollY=function(){return this.nav.scroll.scrollTop;};this.$cN=function($02,e,$0T,$0U){$i.$cP($02,e,$0T,$0U);};this.eventSelectPostBack=function(e,$0X,$q){var $0Y={};$0Y.e=e;$0Y.change=$0X;this.$cI('EventSelect',$0Y,$q);};this.eventSelectCallBack=function(e,$0X,$q){var $0Y={};$0Y.e=e;$0Y.change=$0X;this.$cJ('EventSelect',$0Y,$q);};this.$cP=function($02,e,$0T,$0U){var m=$i.multiselect;var $0Z=false;var $10=m.isSelected(e);var $11=$0T||$0U;if(!$11&&$10&&!$0Z&&m.$cQ.length===1){return;};if($i.$bQ()){m.$cR=m.events();var $l={};$l.e=e;$l.selected=$10;$l.ctrl=$0T;$l.meta=$0U;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onEventSelect==='function'){$i.onEventSelect($l);if($l.preventDefault.value){return;}};switch($i.eventSelectHandling){case 'PostBack':$i.eventSelectPostBack(e,$0X);break;case 'CallBack':if(typeof WebForm_InitCallback!=='undefined'){window.__theFormPostData="";window.__theFormPostCollection=[];WebForm_InitCallback();};$i.eventSelectCallBack(e,$0X);break;case 'Update':m.$cS($02,$0T,$0U);break;};if(typeof $i.onEventSelected==='function'){$l.change=m.isSelected(e)?"selected":"deselected";$l.selected=m.isSelected(e);$i.onEventSelected($l);}}else{m.$cR=m.events();m.$cS($02,$0T,$0U);var $0X=m.isSelected(e)?"selected":"deselected";switch($i.eventSelectHandling){case 'PostBack':$i.eventSelectPostBack(e,$0X);break;case 'CallBack':if(typeof WebForm_InitCallback!=='undefined'){window.__theFormPostData="";window.__theFormPostCollection=[];WebForm_InitCallback();};$i.eventSelectCallBack(e,$0X);break;case 'JavaScript':$i.onEventSelect(e,$0X);break;}}};this.eventRightClickPostBack=function(e,$q){this.$cI('EventRightClick',e,$q);};this.eventRightClickCallBack=function(e,$q){this.$cJ('EventRightClick',e,$q);};this.$cT=function(ev){if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};var e=this.event;ev=ev||window.event;ev.cancelBubble=true;if(!this.event.client.rightClickEnabled()){return false;};if($i.$bQ()){var $l={};$l.e=e;$l.div=this;$l.originalEvent=ev;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onEventRightClick==='function'){$i.onEventRightClick($l);if($l.preventDefault.value){return false;}};switch($i.eventRightClickHandling){case 'PostBack':$i.eventRightClickPostBack(e);break;case 'CallBack':$i.eventRightClickCallBack(e);break;case 'ContextMenu':var $0V=e.client.contextMenu();if($0V){$0V.show(e);}else{if($i.contextMenu){$i.contextMenu.show(this.event);}};break;case 'Bubble':if($i.bubble){$i.bubble.showEvent(e);};break;};if(typeof $i.onEventRightClicked==='function'){$i.onEventRightClicked($l);}}else{switch($i.eventRightClickHandling){case 'PostBack':$i.eventRightClickPostBack(e);break;case 'CallBack':$i.eventRightClickCallBack(e);break;case 'JavaScript':$i.onEventRightClick(e);break;case 'ContextMenu':var $0V=e.client.contextMenu();if($0V){$0V.show(e);}else{if($i.contextMenu){$i.contextMenu.show(this.event);}};break;case 'Bubble':if($i.bubble){$i.bubble.showEvent(e);};break;}};return false;};this.eventDoubleClickPostBack=function(e,$q){this.$cI('EventDoubleClick',e,$q);};this.eventDoubleClickCallBack=function(e,$q){this.$cJ('EventDoubleClick',e,$q);};this.$cU=function(ev){if(typeof(DayPilot.Bubble)!=='undefined'){DayPilot.Bubble.hideActive();};if($i.timeouts.click){for(var $12 in $i.timeouts.click){window.clearTimeout($i.timeouts.click[$12]);};$i.timeouts.click=null;};var ev=ev||window.event;var e=this.event;ev.stopPropagation&&ev.stopPropagation();ev.cancelBubble=true;if($i.$bQ()){var $l={};$l.e=e;$l.originalEvent=ev;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onEventDoubleClick==='function'){$i.onEventDoubleClick($l);if($l.preventDefault.value){return;}};switch($i.eventDoubleClickHandling){case 'PostBack':$i.eventDoubleClickPostBack(e);break;case 'CallBack':$i.eventDoubleClickCallBack(e);break;case 'Edit':$i.$cM(this);break;case 'Select':$i.$cN($02,e,ev.ctrlKey,ev.metaKey);break;case 'Bubble':if($i.bubble){$i.bubble.showEvent(e);};break;case 'ContextMenu':var $0V=e.client.contextMenu();if($0V){$0V.show(e);}else{if($i.contextMenu){$i.contextMenu.show(e);}};break;};if(typeof $i.onEventDoubleClicked==='function'){$i.onEventDoubleClicked($l);}}else{switch($i.eventDoubleClickHandling){case 'PostBack':$i.eventDoubleClickPostBack(e);break;case 'CallBack':$i.eventDoubleClickCallBack(e);break;case 'JavaScript':$i.onEventDoubleClick(e);break;case 'Edit':$i.$cM(this);break;case 'Select':$i.$cN($02,e,ev.ctrlKey,ev.metaKey);break;case 'Bubble':if($i.bubble){$i.bubble.showEvent(e);};break;case 'ContextMenu':var $0V=e.client.contextMenu();if($0V){$0V.show(e);}else{if($i.contextMenu){$i.contextMenu.show(e);}};break;}}};this.eventResizePostBack=function(e,$0p,$13,$q){this.$cV("PostBack",e,$0p,$13,$q);};this.eventResizeCallBack=function(e,$0p,$13,$q){this.$cV("CallBack",e,$0p,$13,$q);};this.$cV=function($X,e,$0p,$13,$q){var $0Y={};$0Y.e=e;$0Y.newStart=$0p;$0Y.newEnd=$13;this.$cW($X,"EventResize",$0Y,$q);};this.$cX=function(e,$0p,$13){if(this.eventResizeHandling==='Disabled'){return;};$13=$i.$cY($13);if($i.$bQ()){var $l={};var $14=function(){$15.hide();if($l.preventDefault.value){return;};$0p=$l.newStart;$13=$l.newEnd;switch($i.eventResizeHandling){case 'PostBack':$i.eventResizePostBack(e,$0p,$13);break;case 'CallBack':$i.eventResizeCallBack(e,$0p,$13);break;case 'Notify':$i.eventResizeNotify(e,$0p,$13);break;case 'Update':$i.$cZ($l);break;};if(typeof $i.onEventResized==='function'){$i.onEventResized($l);}};$l.e=e;$l.async=false;$l.loaded=function(){$14();};$l.newStart=$0p;$l.newEnd=$13;$l.preventDefault=function(){this.preventDefault.value=true;};$l.multiresize=DayPilot.list($16.list);$l.control=$i;$l.toJSON=function(){return DayPilot.Util.copyProps($l,{},["e","async","newStart","newEnd","multiresize"]);};var $17={};$17.event=e;$17.start=$0p;$17.end=$13;$l.multiresize.splice(0,0,$17);if(typeof $i.onEventResize==='function'){$i.onEventResize($l);};if(!$l.async){$14();}else{if($i.blockOnCallBack){$15.show();}}}else{switch($i.eventResizeHandling){case 'PostBack':$i.eventResizePostBack(e,$0p,$13);break;case 'CallBack':$i.eventResizeCallBack(e,$0p,$13);break;case 'JavaScript':$i.onEventResize(e,$0p,$13);break;case 'Notify':$i.eventResizeNotify(e,$0p,$13);break;case 'Update':$i.$cZ($l);break;}}};this.eventMovePostBack=function(e,$0p,$13,$18,$q,$0x){this.$d0("PostBack",e,$0p,$13,$18,$q,$0x);};this.eventMoveCallBack=function(e,$0p,$13,$18,$q,$0x){this.$d0("CallBack",e,$0p,$13,$18,$q,$0x);};this.$d0=function($X,e,$0p,$13,$18,$q,$0x){var $19=e&&!!e.preventDefault;var $0Y={};if($19){var $l=e;$0Y.e=$l.e;$0Y.newStart=$l.newStart;$0Y.newEnd=$l.newEnd;$0Y.newResource=$l.newResource;$0Y.position=$l.position;$0Y.multimove=[];$l.multimove.each(function($00){var $1a={};$1a.e=$00.event;$1a.newStart=$00.start;$1a.newEnd=$00.end;$1a.newResource=$00.event.resource();if($1a.e===$l.e||$1a.e.data.id==$l.e.data.id){$1a.newResource=$l.newResource;}else if(mm.rowoffset){var ri=$00.event.part.dayIndex+mm.rowoffset;$1a.newResource=$i.rowlist[ri].id;};$0Y.multimove.push($1a);});}else{$0Y.e=e;$0Y.newStart=$0p;$0Y.newEnd=$13;$0Y.newResource=$18;$0Y.position=$0x;};this.$cW($X,"EventMove",$0Y,$q);};this.$d1=function($X,$l,$q){var $0Y={};$0Y.start=$l.start;$0Y.end=$l.end;$0Y.resource=$l.resource;$0Y.multirange=[];$l.multirange.each(function($00){var $1b={};$1b.start=$00.start;$1b.end=$00.end;$1b.resource=$00.resource;$0Y.multirange.push($1b);});this.$cW($X,"TimeRangeSelected",$0Y,$q);};this.$cW=function($X,$1c,$0Y,$q){if($X==='PostBack'){$i.$cI($1c,$0Y,$q);}else if($X==='CallBack'){$i.$cJ($1c,$0Y,$q,"CallBack");}else if($X==='Immediate'){$i.$cJ($1c,$0Y,$q,"Notify");}else if($X==='Queue'){$i.queue.add(new DayPilot.Action(this,$1c,$0Y,$q));}else if($X==='Notify'){if($0d.notifyType()==='Notify'){$i.$cJ($1c,$0Y,$q,"Notify");}else{$i.queue.add(new DayPilot.Action($i,$1c,$0Y,$q));}}else{throw "Invalid event invocation type";}};this.eventMoveNotify=function(e,$0p,$13,$18,$q,$0x){var $19=e&&!!e.preventDefault;if($19){var $l=e;$l.old=new DayPilot.Event($l.e.copy(),$i);$l.multimove.each(function($00){$00.old=new DayPilot.Event($00.event.copy(),$i);});$i.$cZ($l);$l.e=$l.old;delete $l.old;$l.multimove.each(function($00){$00.event=$00.old;delete $00.old;});}else{e=new DayPilot.Event(e.copy(),$i);var $1d=$i.events.$d2(e.data);e.start($0p);e.end($13);e.resource($18);e.commit();$1d=$1d.concat($i.events.$d3(e.data));$i.$d4($1d);$i.$d5();$i.$d6($1d);};this.$d0("Notify",e,$0p,$13,$18,$q,$0x);};this.eventResizeNotify=function(e,$0p,$13,$q){var $1e=new DayPilot.Event(e.copy(),this);var $1d=$i.events.$d2(e.data);e.start($0p);e.end($13);e.commit();$1d=$1d.concat($i.events.$d3(e.data));$i.$d4($1d);$i.$d5();$i.$d6($1d);this.$cV("Notify",$1e,$0p,$13,$q);};this.multiselect={};this.multiselect.$cQ=[];this.multiselect.$d7=[];this.multiselect.$cR=[];this.multiselect.$bG=function($Y){$i.multiselect.$cQ=DayPilot.list($Y).map(function($00){return new DayPilot.Event($00,$i);});};this.multiselect.$d8=function(){var m=$i.multiselect;return JSON.stringify(m.events());};this.multiselect.events=function(){var m=$i.multiselect;var $Z=DayPilot.list();$Z.ignoreToJSON=true;for(var i=0;i<m.$cQ.length;i++){$Z.push(m.$cQ[i]);};return $Z;};this.multiselect.$d9=function(){};this.multiselect.$cS=function($02,$1f,$1g){var m=$i.multiselect;if(m.isSelected($02.event)){if($i.allowMultiSelect){if($1f||$1g){m.remove($02.event,true);}else{var $0j=m.$cQ.length;m.clear();if($0j>1){m.add($02.event,true);}}}else{m.clear();}}else{if($i.allowMultiSelect){if($1f||$1g){m.add($02.event,true);}else{m.clear();m.add($02.event,true);}}else{m.clear();m.add($02.event,true);}};m.$da($02);m.$d9();};this.multiselect.$db=function(ev){var m=$i.multiselect;return m.$dc(ev,m.initList);};this.multiselect.$dd=function(){var m=$i.multiselect;var $Y=[];for(var i=0;i<m.$cQ.length;i++){var event=m.$cQ[i];$Y.push(event.value());};alert($Y.join("\n"));};this.multiselect.add=function(ev,$1h){var m=$i.multiselect;if(m.indexOf(ev)===-1){m.$cQ.push(ev);};if($1h){return;};m.$de(ev);};this.multiselect.remove=function(ev,$1h){var m=$i.multiselect;var i=m.indexOf(ev);if(i!==-1){m.$cQ.splice(i,1);};if($1h){return;};m.$de(ev);};this.multiselect.clear=function($1h){var m=$i.multiselect;m.$cQ=[];if($1h){return;};m.redraw();};this.multiselect.redraw=function(){var m=$i.multiselect;m.$d7=[];for(var i=0;i<$i.elements.events.length;i++){var $02=$i.elements.events[i];if(!$02.event){continue;};if(!$02.event.isEvent){continue;};if(m.isSelected($02.event)){m.$df($02);}else{m.$dg($02);}}};this.multiselect.$da=function($02){if(!$02){return;};var m=$i.multiselect;if(m.isSelected($02.event)){m.$df($02);}else{m.$dg($02);}};this.multiselect.$de=function(e){var m=$i.multiselect;var $02=$i.$dh(e);m.$da($02);};this.multiselect.$df=function($02){var m=$i.multiselect;var cn=$i.$c8("_selected");var $02=m.$di($02);DayPilot.Util.addClass($02,cn);m.$d7.push($02);};this.multiselect.$di=function($02){return $02;};this.multiselect.$dj=function(){var m=$i.multiselect;for(var i=0;i<m.$d7.length;i++){var $02=m.$d7[i];m.$dg($02,true);};m.$d7=[];};this.multiselect.$dg=function($02,$1i){var m=$i.multiselect;var cn=$i.$c8("_selected");DayPilot.Util.removeClass($02,cn);if($1i){return;};var i=DayPilot.indexOf(m.$d7,$02);if(i!==-1){m.$d7.splice(i,1);}};this.multiselect.isSelected=function(ev){if(!ev){return false;};if(!ev.isEvent){return false;};return $i.multiselect.$dc(ev,$i.multiselect.$cQ);};this.multiselect.indexOf=function(ev){var $q=ev.data;for(var i=0;i<$i.multiselect.$cQ.length;i++){var $00=$i.multiselect.$cQ[i];if($00.data===$q){return i;}};return -1;};this.multiselect.$dc=function(e,$Y){if(!$Y){return false;};for(var i=0;i<$Y.length;i++){var ei=$Y[i];if(e===ei){return true;};if(typeof ei.id==='function'){if(ei.id()!==null&&e.id()!==null&&ei.id()===e.id()){return true;};if(ei.id()===null&&e.id()===null&&ei.recurrentMasterId()===e.recurrentMasterId()&&e.start().toStringSortable()===ei.start().toStringSortable()){return true;}}else{if(ei.id!==null&&e.id()!==null&&ei.id===e.id()){return true;};if(ei.id===null&&e.id()===null&&ei.recurrentMasterId===e.recurrentMasterId()&&e.start().toStringSortable()===ei.start){return true;}}};return false;};this.multiselect.startRectangle=function(){$0W.start();};this.$dk=function(){this.$bF();this.$bI();};this.$dl=function(){$i.$bv();$i.$bA();$i.$dm();if($i.progressiveRowRendering){$i.$dn();}};this.$da=function($l){var $l=$l||{};var $1j=!$l.eventsOnly;if($1j){if(!this.$cm()){$i.timeHeader=null;$i.cellProperties={};};$i.$cu={};$i.$bq();$i.$br();if(!$l||!$l.dontLoadResources){$i.$bs();};$i.events.$do();$i.$dp.clearCache();};this.$bu();this.$dq();$i.$bv();if($1j){$i.$dr();$i.$ds();$i.$bw();$i.$bO($i.selectedRows);$i.$dt();};$i.$bx();$i.$bA();$i.$dm();$i.$bB();$1k.hideLinkpoints();this.$bE();this.$bD();this.$bo();this.$bt();this.$bH();this.$dk();$i.$bC();if($l.immediateEvents||$l.eventsOnly){$i.$bJ();}else{setTimeout(function(){$i.$bJ();},100);};if(this.visible){if($i.$bf!=$i.visible){this.show();}}else{this.hide();};this.$bf=this.visible;this.$bN();var angular=$i.$du.scope||$i.$bR.enabled;if(!angular||$i.$bT){this.$bP();};this.$dv();this.$bl();};this.$dv=function(){if(typeof $i.onAfterUpdate!=="function"){return;};var $l={};$i.onAfterUpdate($l);};this.update=function($h){if($i.$bc){throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable.");};$1l.request($h);};var $1l={};$1l.timeout=null;$1l.options=null;$1l.enabled=false;$1l.request=function($h){if($1l.enabled){clearTimeout($1l.timeout);$1l.mergeOptions($h);$1l.timeout=setTimeout($1l.doit);}else{$1l.mergeOptions($h);$1l.doit();}};$1l.mergeOptions=function($h){if(!$h){return;};if(!$1l.options){$1l.options={};};for(var name in $h){$1l.options[name]=$h[name];}};$1l.doit=function(){var $h=$1l.options;$1l.options=null;if(!$i.$bT){$i.$dw($h);return;};if(DayPilot.Util.isOnlyProperty($h,"events")){$i.events.list=$h.events;$i.$da({"eventsOnly":true});return;};if(DayPilot.Util.isOnlyProperty($h,"separators")){$i.separators=$h.separators;$i.$dk();return;};if(DayPilot.Util.isOnlyProperty($h,"rowHeaderColumns")){$i.rowHeaderColumns=$h.rowHeaderColumns;$i.$dl();return;};$i.$dw($h);$i.$da({"immediateEvents":true});$i.$bm(null,false);};this.$d6=function($1d,$1m,$1n){$1d=DayPilot.ua($1d);for(var i=0;i<$1d.length;i++){var ri=$1d[i];$i.$dx(ri);};if(this.$dy){this.$bx();this.$bA();this.$bD();this.$bF();for(var i=0;i<$1d.length;i++){var ri=$1d[i];this.$dz(ri);};for(var i=0;i<$1d.length;i++){var ri=$1d[i];this.$dA(ri);};this.$bH();this.$bI();this.$dB();}else{var $1o=false;if($1o){var $1p=function(i){if(i>=$1d.length){return;};var ri=$1d[i];if(!$1m){$i.$dz(ri);};$i.$dA(ri);if(i+1<$1d.length){setTimeout(function(){$1p(i+1);},10);}else{$i.$c4();$1k.load();$i.multiselect.redraw();if($1n){$1n();}}};$1p(0);}else{for(var i=0;i<$1d.length;i++){var ri=$1d[i];if(!$1m){this.$dz(ri);};this.$dA(ri);}};DayPilot.list($1d).each(function(y){$i.$dC(y);});$i.$bH();};$i.$c4();$1k.load();$i.multiselect.redraw();if($1n){$1n();};this.$bo();};this.$cY=function($u){if($i.eventEndSpec==="DateTime"){return $u;};if($u.getDatePart().ticks===$u.ticks){return $u.addDays(-1);};return $u.getDatePart();};this.$dD=function($u){if($i.eventEndSpec==="DateTime"){return $u;};return $u.getDatePart().addDays(1);};this.$dE=function($u){if($i.eventEndSpec==="DateTime"){return $u;};return $u.getDatePart();};this.$dF=function(e,$0p,$13,$18,external,ev,$0x){$i.$dG=null;if($i.eventMoveHandling==='Disabled'){return;};$13=$i.$cY($13);var $l={};$l.e=e;$l.newStart=$0p;$l.newEnd=$13;$l.newResource=$18;$l.external=external;$l.ctrl=false;$l.meta=false;$l.shift=false;if(ev){$l.shift=ev.shiftKey;$l.ctrl=ev.ctrlKey;$l.meta=ev.metaKey;};$l.multimove=DayPilot.list(mm.list);$l.areaData=DayPilot.Global.movingAreaData;$l.control=$i;$l.toJSON=function(){return DayPilot.Util.copyProps($l,{},["e","newStart","newEnd","newResource","external","ctrl","meta","shift","multimove","areaData"]);};var $17={};$17.event=e;$17.start=$0p;$17.end=$13;$17.overlapping=false;$17.resource=$18;$l.multimove.splice(0,0,$17);$l.position=$0x;$l.preventDefault=function(){this.preventDefault.value=true;};if($i.$bQ()){var $14=function(){$15.hide();if($l.preventDefault.value){$i.$dH();return;};$0p=$l.newStart;$13=$l.newEnd;switch($i.eventMoveHandling){case 'PostBack':$i.eventMovePostBack($l);break;case 'CallBack':$i.eventMoveCallBack($l);break;case 'Notify':$i.eventMoveNotify($l);break;case 'Update':$i.$cZ($l);break;};$i.$dH();if(typeof $i.onEventMoved==='function'){$i.onEventMoved($l);}};$l.async=false;$l.loaded=function(){$14();};if(typeof $i.onEventMove==='function'){$i.onEventMove($l);};if(!$l.async){$14();}else{if($i.blockOnCallBack){$15.show();}}}else{switch($i.eventMoveHandling){case 'PostBack':$i.eventMovePostBack($l);break;case 'CallBack':$i.eventMoveCallBack($l);break;case 'JavaScript':$i.onEventMove(e,$0p,$13,$18,external,ev?ev.ctrlKey:false,ev?ev.shiftKey:false,$0x);break;case 'Notify':$i.eventMoveNotify($l);break;case 'Update':$i.$cZ($l);break;};$i.$dH();}};this.$cZ=function($l){var e=$l.e;var $0p=$l.newStart;var $13=$l.newEnd;var $18=$l.newResource;var external=$l.external;e.start($0p);e.end($13);e.resource($18);if(external){e.commit();$i.events.add(e);}else{$i.events.update(e);};if($l.multimove&&!$l.multimove.isEmpty()){$l.multimove.each(function($00){if($00.event===e){return;};$00.event.start($00.start);$00.event.end($00.end);if(mm.rowoffset){var ri=$00.event.part.dayIndex+mm.rowoffset;var $18=$i.rowlist[ri].id;$00.event.resource($18);};$00.event.commit();$i.events.update($00.event);});};if($l.multiresize&&!$l.multiresize.isEmpty()){$l.multiresize.each(function($00){if($00.event===e){return;};$00.event.start($00.start);$00.event.end($00.end);$00.event.commit();$i.events.update($00.event);});};$i.events.immediateRefresh();$i.$bj();};this.$dI=function($l,$n){var $m=$i.$dJ($n);var $0Y={};$0Y.args=$l;$0Y.guid=$m;$i.$cJ("Bubble",$0Y);};this.$dJ=function($n){var $m=DayPilot.guid();if(!this.bubbles){this.bubbles=[];};this.bubbles[$m]=$n;return $m;};this.eventMenuClickPostBack=function(e,$1q,$q){var $0Y={};$0Y.e=e;$0Y.command=$1q;this.$cI('EventMenuClick',$0Y,$q);};this.eventMenuClickCallBack=function(e,$1q,$q){var $0Y={};$0Y.e=e;$0Y.command=$1q;this.$cJ('EventMenuClick',$0Y,$q);};this.$dK=function($1q,e,$1r){switch($1r){case 'PostBack':$i.eventMenuClickPostBack(e,$1q);break;case 'CallBack':$i.eventMenuClickCallBack(e,$1q);break;}};this.timeRangeSelectedPostBack=function($K,end,$1s,$q){var $1t={};$1t.start=$K;$1t.end=end;$1t.resource=$1s;this.$cI('TimeRangeSelected',$1t,$q);};this.timeRangeSelectedCallBack=function($K,end,$1s,$q){var $1t={};$1t.start=$K;$1t.end=end;$1t.resource=$1s;this.$cJ('TimeRangeSelected',$1t,$q);};this.$dL=function($1t){if(!$1t){return;};if($1t.disabled){$i.clearSelection();return;};var $1u=$i.$dM($1t);if(!$1u){return;};$i.$dN($1u.start,$1u.end,$1u.resource);};this.$dN=function($K,end,$1s){if($i.timeRangeSelectedHandling==='Disabled'){return;};var $1v=end;end=$i.$cY($1v);var $l={};$l.control=$i;$l.start=$K;$l.end=end;$l.resource=$1s;$l.preventDefault=function(){this.preventDefault.value=true;};$l.multirange=DayPilot.list(mr.list).map(function($00){return $i.$dM($00);});if($l.multirange.isEmpty()){$l.multirange.push({"start":$l.start,"end":$l.end,"resource":$l.resource});};$l.toJSON=function(){return DayPilot.Util.copyProps($l,{},["start","end","resource","multirange"]);};if($i.$bQ()){if(typeof $i.onTimeRangeSelect==='function'){$i.onTimeRangeSelect($l);if($l.preventDefault.value){return;};$K=$l.start;end=$l.end;};$i.$dO($i.rangeHold,$K,end,$l.multirange);$i.$dP($i.rangeHold);switch($i.timeRangeSelectedHandling){case 'PostBack':$i.$d1("PostBack",$l);break;case 'CallBack':$i.$d1("CallBack",$l);break;};if(typeof $i.onTimeRangeSelected==='function'){$i.onTimeRangeSelected($l);}}else{switch($i.timeRangeSelectedHandling){case 'PostBack':$i.$d1("PostBack",$l);break;case 'CallBack':$i.$d1("CallBack",$l);break;case 'JavaScript':$i.onTimeRangeSelected($K,end,$1s,$l.multirange);break;case 'Hold':break;}}};this.$dO=function($1t,$K,end,$1w){if(!$1t||($1w&&$1w.length>1)){return;};var $1v=$i.$dD(end);var $0K,$P;var $1x=0;if($i.viewType==="Days"){var $x=$i.$bV($K);$1x=$x.start.getTime()-$i.$cs().getTime();};if($K.getTime()<$i.itline[0].start.getTime()){$1t.start.x=0;}else{$0K=$i.$cE($K.addTime(-$1x));$P=$0K.current||$0K.previous;$1t.start.x=DayPilot.indexOf($i.itline,$P);};$0K=$i.$cE($1v.addSeconds(-1).addTime(-$1x));if($0K.past){$1t.end.x=$i.itline.length-1;}else{$P=$0K.current||$0K.next;$1t.end.x=DayPilot.indexOf($i.itline,$P);}};this.$bV=function($K){var $0n=$K.getDatePart();return DayPilot.list($i.rowlist).find(function($00){return $00.start.getDatePart()===$0n;});};this.timeRangeDoubleClickPostBack=function($K,end,$1s,$q){var $1t={};$1t.start=$K;$1t.end=end;$1t.resource=$1s;this.$cI('TimeRangeDoubleClick',$1t,$q);};this.timeRangeDoubleClickCallBack=function($K,end,$1s,$q){var $1t={};$1t.start=$K;$1t.end=end;$1t.resource=$1s;this.$cJ('TimeRangeDoubleClick',$1t,$q);};this.$dQ=function($K,end,$1s){end=$i.$cY(end);if($i.$bQ()){var $l={};$l.start=$K;$l.end=end;$l.resource=$1s;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onTimeRangeDoubleClick==='function'){$i.onTimeRangeDoubleClick($l);if($l.preventDefault.value){return;}};switch($i.timeRangeDoubleClickHandling){case 'PostBack':$i.timeRangeDoubleClickPostBack($K,end,$1s);break;case 'CallBack':$i.timeRangeDoubleClickCallBack($K,end,$1s);break;};if(typeof $i.onTimeRangeDoubleClicked==='function'){$i.onTimeRangeDoubleClicked($l);}}else{switch($i.timeRangeDoubleClickHandling){case 'PostBack':$i.timeRangeDoubleClickPostBack($K,end,$1s);break;case 'CallBack':$i.timeRangeDoubleClickCallBack($K,end,$1s);break;case 'JavaScript':$i.onTimeRangeDoubleClick($K,end,$1s);break;}}};this.timeRangeMenuClickPostBack=function(e,$1q,$q){var $0Y={};$0Y.selection=e;$0Y.command=$1q;this.$cI("TimeRangeMenuClick",$0Y,$q);};this.timeRangeMenuClickCallBack=function(e,$1q,$q){var $0Y={};$0Y.selection=e;$0Y.command=$1q;this.$cJ("TimeRangeMenuClick",$0Y,$q);};this.$dR=function($1q,e,$1r){switch($1r){case 'PostBack':$i.timeRangeMenuClickPostBack(e,$1q);break;case 'CallBack':$i.timeRangeMenuClickCallBack(e,$1q);break;}};this.linkMenuClickPostBack=function(e,$1q,$q){var $0Y={};$0Y.link=e;$0Y.command=$1q;this.$cI("LinkMenuClick",$0Y,$q);};this.linkMenuClickCallBack=function(e,$1q,$q){var $0Y={};$0Y.link=e;$0Y.command=$1q;this.$cJ("LinkMenuClick",$0Y,$q);};this.$dS=function($1q,e,$1r){switch($1r){case 'PostBack':$i.linkMenuClickPostBack(e,$1q);break;case 'CallBack':$i.linkMenuClickCallBack(e,$1q);break;}};this.rowMenuClickPostBack=function(e,$1q,$q){var $0Y={};$0Y.resource=e;$0Y.command=$1q;this.$cI("RowMenuClick",$0Y,$q);};this.resourceHeaderMenuClickPostBack=this.rowMenuClickPostBack;this.rowMenuClickCallBack=function(e,$1q,$q){var $0Y={};$0Y.resource=e;$0Y.command=$1q;this.$cJ("RowMenuClick",$0Y,$q);};this.resourceHeaderMenuClickCallBack=this.rowMenuClickCallBack;this.$dT=function($1q,e,$1r){switch($1r){case 'PostBack':$i.rowMenuClickPostBack(e,$1q);break;case 'CallBack':$i.rowMenuClickCallBack(e,$1q);break;}};this.$dU=function($1y,$1z){var r=$i.$dV($1y);r.data.name=$1z;if(r.data.html){r.data.html=$1z;};$i.rows.update(r);};this.$dW=function($x,$1z){if(!$1z){return;};var $l={};$l.text=$1z;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onRowCreate==="function"){$i.onRowCreate($l);if($l.preventDefault.value){return;}};switch($i.rowCreateHandling){case "CallBack":$i.rowCreateCallBack($l.text);break;case "PostBack":$i.rowCreatePostBack($l.text);break;};if(typeof $i.onRowCreated==="function"){$i.onRowCreated($l);}};this.$dX=function($x,$1z,$1A){if($x.isNewRow){if(!$1A){$i.$dW($x,$1z);};return;};var $1B=DayPilot.indexOf($i.rowlist,$x);var e=$i.$dV($x,$1B);if($i.$bQ()){var $l={};$l.resource=e;$l.row=e;$l.newText=$1z;$l.canceled=$1A;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onRowEdit==='function'){$i.onRowEdit($l);if($l.preventDefault.value){return;}};if(!$1A){switch($i.rowEditHandling){case 'PostBack':$i.rowEditPostBack(e,$1z);break;case 'CallBack':$i.rowEditCallBack(e,$1z);break;case 'Update':$i.$dU($x,$1z);break;};if(typeof $i.onRowEdited==='function'){$i.onRowEdited($l);}}}else{switch($i.rowEditHandling){case 'PostBack':$i.rowEditPostBack(e,$1z);break;case 'CallBack':$i.rowEditCallBack(e,$1z);break;case 'JavaScript':$i.onrowEdit(e,$1z);break;}}};this.rowCreatePostBack=function($1z,$q){var $0Y={};$0Y.text=$1z;this.$cI("RowCreate",$0Y,$q);};this.rowCreateCallBack=function($1z,$q){var $0Y={};$0Y.text=$1z;this.$cJ("RowCreate",$0Y,$q);};this.rowEditPostBack=function(e,$1z,$q){var $0Y={};$0Y.resource=e;$0Y.newText=$1z;this.$cI("RowEdit",$0Y,$q);};this.rowEditCallBack=function(e,$1z,$q){var $0Y={};$0Y.resource=e;$0Y.newText=$1z;this.$cJ("RowEdit",$0Y,$q);};this.rowMovePostBack=function($1C,$1D,$w,$q){var $0Y={};$0Y.source=$1C;$0Y.target=$1D;$0Y.position=$w;this.$cI("RowMove",$0Y,$q);};this.rowMoveCallBack=function($1C,$1D,$w,$q){var $0Y={};$0Y.source=$1C;$0Y.target=$1D;$0Y.position=$w;this.$cJ("RowMove",$0Y,$q);};this.rowMoveNotify=function($1C,$1D,$w,$q){var $0Y={};$0Y.source=$1C;$0Y.target=$1D;$0Y.position=$w;this.$cJ("RowMove",$0Y,$q,"Notify");};this.rowClickPostBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cI("RowClick",$0Y,$q);};this.resourceHeaderClickPostBack=this.rowClickPostBack;this.rowClickCallBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cJ("RowClick",$0Y,$q);};this.resourceHeaderClickCallBack=this.rowClickCallBack;this.$dY=function(e,$1f,$1E,$1g){if($i.rowDoubleClickHandling==="Disabled"){$i.$dZ(e,$1f,$1E,$1g);return;};if(!$i.timeouts.resClick){$i.timeouts.resClick=[];};var $1F=function(e,$1f,$1E,$1g){return function(){$i.$dZ(e,$1f,$1E,$1g);};};$i.timeouts.resClick.push(window.setTimeout($1F(e,$1f,$1E,$1g),$i.doubleClickTimeout));};this.$dZ=function(e,$1f,$1E,$1g){var $1G=$i.resourceHeaderClickHandling||$i.rowClickHandling;if($i.$bQ()){var $l={};$l.resource=e;$l.row=e;$l.ctrl=$1f;$l.shift=$1E;$l.meta=$1g;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onRowClick==='function'){$i.onRowClick($l);if($l.preventDefault.value){return;}};if(typeof $i.onResourceHeaderClick==='function'){$i.onResourceHeaderClick($l);if($l.preventDefault.value){return;}};switch($1G){case 'PostBack':$i.rowClickPostBack(e);break;case 'CallBack':$i.rowClickCallBack(e);break;case 'Select':$i.$e0(e.$.row,$1f,$1E,$1g);break;case 'Edit':$i.$e1.edit(e.$.row);break;};if(typeof $i.onRowClicked==='function'){$i.onRowClicked($l);};if(typeof $i.onResourceHeaderClicked==='function'){$i.onResourceHeaderClicked($l);}}else{switch($1G){case 'PostBack':$i.rowClickPostBack(e);break;case 'CallBack':$i.rowClickCallBack(e);break;case 'JavaScript':$i.onRowClick(e);break;case 'Select':$i.$e0(e.$.row,$1f,$1E);break;case 'Edit':$i.$e1.edit(e.$.row);break;}}};this.timeHeaderClickPostBack=function(e,$q){var $0Y={};$0Y.header=e;this.$cI("TimeHeaderClick",$0Y,$q);};this.timeHeaderClickCallBack=function(e,$q){var $0Y={};$0Y.header=e;this.$cJ("TimeHeaderClick",$0Y,$q);};this.$e2=function(e){if($i.$bQ()){var $l={};$l.header=e;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onTimeHeaderClick==='function'){$i.onTimeHeaderClick($l);if($l.preventDefault.value){return;}};switch(this.timeHeaderClickHandling){case 'PostBack':$i.timeHeaderClickPostBack(e);break;case 'CallBack':$i.timeHeaderClickCallBack(e);break;};if(typeof $i.onTimeHeaderClicked==='function'){$i.onTimeHeaderClicked($l);}}else{switch(this.timeHeaderClickHandling){case 'PostBack':$i.timeHeaderClickPostBack(e);break;case 'CallBack':$i.timeHeaderClickCallBack(e);break;case 'JavaScript':$i.onTimeHeaderClick(e);break;}}};this.resourceCollapsePostBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cI("ResourceCollapse",$0Y,$q);};this.resourceCollapseCallBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cJ("ResourceCollapse",$0Y,$q);};this.$e3=function(e){if($i.$bQ()){var $l={};$l.resource=e;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onResourceCollapse==='function'){$i.onResourceCollapse($l);if($l.preventDefault.value){return;}};switch(this.resourceCollapseHandling){case 'PostBack':$i.resourceCollapsePostBack(e);break;case 'CallBack':$i.resourceCollapseCallBack(e);break;}}else{switch(this.resourceCollapseHandling){case 'PostBack':$i.resourceCollapsePostBack(e);break;case 'CallBack':$i.resourceCollapseCallBack(e);break;case 'JavaScript':$i.onResourceCollapse(e);break;}}};this.resourceExpandPostBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cI("ResourceExpand",$0Y,$q);};this.resourceExpandCallBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cJ("ResourceExpand",$0Y,$q);};this.$e4=function(e){if($i.$bQ()){var $l={};$l.resource=e;$l.row=e;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onResourceExpand==='function'){$i.onResourceExpand($l);if($l.preventDefault.value){return;}};switch(this.resourceExpandHandling){case 'PostBack':$i.resourceExpandPostBack(e);break;case 'CallBack':$i.resourceExpandCallBack(e);break;}}else{switch(this.resourceExpandHandling){case 'PostBack':$i.resourceExpandPostBack(e);break;case 'CallBack':$i.resourceExpandCallBack(e);break;case 'JavaScript':$i.onResourceExpand(e);break;}}};this.eventEditPostBack=function(e,$1z,$q){var $0Y={};$0Y.e=e;$0Y.newText=$1z;this.$cI("EventEdit",$0Y,$q);};this.eventEditCallBack=function(e,$1z,$q){var $0Y={};$0Y.e=e;$0Y.newText=$1z;this.$cJ("EventEdit",$0Y,$q);};this.eventEditNotify=function(e,$1z,$q,$h){var $1e=new DayPilot.Event(e.copy(),this);e.text($1z);$i.events.update(e,null,$h);var $0Y={};$0Y.e=$1e;$0Y.newText=$1z;this.$cJ("EventEdit",$0Y,$q,"Notify");};this.$e5=function(e,$1z,$1A){if($i.$bQ()){var $l={};$l.e=e;$l.newText=$1z;$l.canceled=$1A;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onEventEdit==='function'){$i.onEventEdit($l);if($l.preventDefault.value){return;}};if(!$1A){switch($i.eventEditHandling){case 'PostBack':$i.eventEditPostBack(e,$1z);break;case 'CallBack':$i.eventEditCallBack(e,$1z);break;case 'Update':e.text($1z);$i.events.update(e,null,{"inplace":true});break;}};if(typeof $i.onEventEdited==='function'){$i.onEventEdited($l);}}else{switch($i.eventEditHandling){case 'PostBack':$i.eventEditPostBack(e,$1z);break;case 'CallBack':$i.eventEditCallBack(e,$1z);break;case 'Notify':$i.eventEditNotify(e,$1z,null,{"inplace":true});break;case 'JavaScript':$i.onEventEdit(e,$1z);break;}}};this.commandCallBack=function($1q,$q){this.$e6("CallBack",$1q,$q);};this.commandPostBack=function($1q,$q){this.$e6("PostBack",$1q,$q);};this.$e6=function($X,$1q,$q){var $0Y={};$0Y.command=$1q;this.$cW($X,"Command",$0Y,$q);};this.$cI=function($1c,$1H,$q){var $1I={};$1I.action=$1c;$1I.type="PostBack";$1I.parameters=$1H;$1I.data=$q;$1I.header=this.$e7();var $1J="JSON"+JSON.stringify($1I);__doPostBack($i.uniqueID,$1J);};this.$cJ=function($1c,$1H,$q,$X){if(!$i.$cm()){$i.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning");return;};if(typeof $X==='undefined'){$X="CallBack";};this.$e8();$i.$e9();var $1I={};$1I.action=$1c;$1I.type=$X;$1I.parameters=$1H;$1I.data=$q;$1I.header=this.$e7();var $1K=JSON.stringify($1I);var $1J;if(typeof Iuppiter!=='undefined'&&Iuppiter.compress){$1J="LZJB"+Iuppiter.Base64.encode(Iuppiter.compress($1K));}else{$1J="JSON"+$1K;};this.$ea($1I);var $k=null;if(this.backendUrl){DayPilot.request(this.backendUrl,this.$eb,$1J,this.$ec);}else if(typeof WebForm_DoCallback==='function'){WebForm_DoCallback(this.uniqueID,$1J,this.$bi,$k,this.callbackError,true);}};this.$ea=function($1I){var $l={};if(typeof $i.onCallBackStart==='function'){$i.onCallBackStart($l);}};this.$bn=function(){var $l={};if(typeof $i.onCallBackEnd==='function'){setTimeout(function(){$i.onCallBackEnd($l);},0);}};this.$cm=function(){return($i.$bh!=="javasc"&&$i.$bh.indexOf("DCODE")===-1)||$i.devsb;};this.$ed=function(){if(typeof WebForm_DoCallback==='function'&&this.uniqueID){return true;};return false;};this.$ec=function($1L){if(typeof $i.onAjaxError==='function'){var $l={};$l.request=$1L;$i.onAjaxError($l);}else if(typeof $i.ajaxError==='function'){$i.ajaxError($1L);}};this.$eb=function($1M){$i.$bi($1M.responseText);};this.$e7=function(){var h={};h.v=this.v;h.control="dps";h.id=this.id;h.startDate=$i.startDate;h.days=$i.days;h.cellDuration=$i.cellDuration;h.cellGroupBy=$i.cellGroupBy;h.cellWidth=$i.cellWidth;h.cellWidthSpec=$i.cellWidthSpec;h.viewType=$i.viewType;h.showNonBusiness=$i.showNonBusiness;h.businessBeginsHour=$i.businessBeginsHour;h.businessEndsHour=$i.businessEndsHour;h.weekStarts=$i.weekStarts;h.treeEnabled=$i.treeEnabled;h.locale=$i.locale;h.timeZone=$i.timeZone;h.tagFields=$i.tagFields;h.timeHeaders=$i.timeHeaders;h.cssClassPrefix=$i.cssClassPrefix;h.durationBarMode=$i.durationBarMode;h.rowHeaderColumns=$i.rowHeaderColumns;h.rowMarginBottom=$i.rowMarginBottom;h.rowMarginTop=$i.rowMarginTop;h.rowMinHeight=$i.rowMinHeight;h.scale=$i.scale;h.clientState=$i.clientState;if(this.nav.scroll){h.scrollX=Math.max(0,this.nav.scroll.scrollLeft);h.scrollY=Math.max(0,this.nav.scroll.scrollTop);};h.selected=$i.multiselect.events();h.selectedRows=$1N.$ee();h.hashes=$i.hashes;var $J=$i.$ef(h.scrollX,h.scrollY);var $1t=$i.$eg($J);var $1O=$i.$eh($J);h.rangeStart=$1t.start;h.rangeEnd=$1t.end;h.resources=$1O;h.dynamicLoading=$i.dynamicLoading;h.separators=this.separators;if(this.syncResourceTree&&this.viewType!="Days"){h.tree=this.$ei();};if(this.syncLinks){h.links=this.$ej();};if(this.scale==="Manual"){h.timeline=this.$ek();};if(typeof $i.onCallBackHeader==="function"){var $l={};$l.header=h;$i.onCallBackHeader($l);};return h;};this.$ek=function(){var $Y=[];DayPilot.list($i.timeline).each(function($00){var $1K={};$1K.start=$00.start;$1K.end=$00.end;$1K.width=$00.width;$Y.push($1K);});return $Y;};this.$ej=function(){var $Y=[];var $1P=function(link){var $j={};if(link.tags){for(var name in link.tags){$j[name]=""+link.tags[name];}};return $j;};if(!DayPilot.isArray($i.links.list)){return $Y;};for(var i=0;i<$i.links.list.length;i++){var link=$i.links.list[i];var $1K={};$1K.id=link.id;$1K.from=link.from;$1K.to=link.to;$1K.type=link.type;$1K.tags=$1P(link);$Y.push($1K);};return $Y;};this.getViewPort=function(){var scrollX=this.nav.scroll.scrollLeft-$L.shiftX;var scrollY=this.nav.scroll.scrollTop;var $Q={};if($i.viewType!=="Days"){var $J=$i.$ef(scrollX,scrollY);var $1t=$i.$eg($J);var $1O=$i.$eh($J);$Q.start=$1t.start;$Q.end=$1t.end;$Q.resources=$1O;}else{var $J=$i.$ef(scrollX,scrollY);var $1t=$i.$el($J);$Q.start=$1t.start;$Q.end=$1t.end;$Q.resources=[];};return $Q;};this.$ef=function(scrollX,scrollY){var $J={};$J.start={};$J.end={};$J.start.x=Math.floor(scrollX/$i.cellWidth);$J.end.x=Math.floor((scrollX+$i.nav.scroll.clientWidth)/$i.cellWidth);$J.start.y=$i.$em(scrollY).i;$J.end.y=$i.$em(scrollY+$i.nav.scroll.clientHeight).i;$J.start.x=Math.max($J.start.x,0);var $1Q=this.itline.length;if($J.end.x>=$1Q){$J.end.x=$1Q-1;};return $J;};this.$eg=function($J){var $j={};if(this.itline.length<=0){$j.start=this.startDate;$j.end=this.startDate;return $j;};if(!this.itline[$J.start.x]){throw 'Internal error: area.start.x is null.';};$j.start=this.itline[$J.start.x].start;$j.end=this.itline[$J.end.x].end;return $j;};this.$eh=function($J){if(!$J){var $J=this.$ef(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);};var $1O=[];$1O.ignoreToJSON=true;for(var i=$J.start.y;i<=$J.end.y;i++){var r=$i.rowlist[i];if(r&&!r.hidden){$1O.push(r.id);}};return $1O;};this.$el=function($J){if(!$J){var $J=this.$ef(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);};var $1O={};if($i.rowlist.length===0){return $1O;};var $1R=$i.itline[$i.itline.length-1].end.getTime()-$i.itline[0].start.getTime();$1O.start=$i.rowlist[$J.start.y]&&$i.rowlist[$J.start.y].start;$1O.end=$i.rowlist[$J.end.y]&&$i.rowlist[$J.end.y].start.addTime($1R);return $1O;};this.$ei=function(){var $1S=[];$1S.ignoreToJSON=true;for(var i=0;i<this.rowlist.length;i++){var $x=this.rowlist[i];if($x.level>0){continue;};if($x.isNewRow){continue;};var $1T=this.$en(i);$1S.push($1T);};return $1S;};this.$eo=function($1U){var $1V=[];$1V.ignoreToJSON=true;for(var i=0;i<$1U.length;i++){var $1B=$1U[i];var $x=$i.rowlist[$1B];if($x.isNewRow){continue;};$1V.push($i.$en($1B));};return $1V;};this.$en=function(i){var $x=this.rowlist[i];if(typeof $i.onGetNodeState==="function"){var $l={};$l.row=$x;$l.preventDefault=function(){$l.preventDefault.value=true;};$l.result={};$i.onGetNodeState($l);if($l.preventDefault.value){return $l.result;}};var $1T={};$1T.Value=$x.id;$1T.BackColor=$x.backColor;$1T.Name=$x.name;$1T.InnerHTML=$x.html;$1T.ToolTip=$x.toolTip;$1T.Expanded=$x.expanded;$1T.Children=this.$eo($x.children);$1T.Loaded=$x.loaded;$1T.IsParent=$x.isParent;$1T.Columns=this.$ep($x);if($x.start.getTime()!==$i.$cs().getTime()){$1T.Start=$x.start;};if($x.minHeight!==$i.rowMinHeight){$1T.MinHeight=$x.minHeight;};if($x.marginBottom!==$i.rowMarginBottom){$1T.MarginBottom=$x.marginBottom;};if($x.marginTop!==$i.rowMarginTop){$1T.MarginTop=$x.marginTop;};if($x.eventHeight!==$i.eventHeight){$1T.EventHeight=$x.eventHeight;};return $1T;};this.$ep=function($x){if(!$x.columns||$x.columns.length===0){return null;};var $1W=[];$1W.ignoreToJSON=true;for(var i=0;i<$x.columns.length;i++){var c={};c.InnerHTML=$x.columns[i].html;$1W.push(c);};return $1W;};this.$c8=function($1X){var $1Y=this.theme||this.cssClassPrefix;if($1Y){return $1Y+$1X;}else{return "";}};this.$dr=function(){var $1Z=$i.nav.top.className!==$i.$c8("_main");if(!$1Z){return;};$i.nav.top.className=$i.$c8("_main");$i.nav.dh1.className=$i.$c8("_divider_horizontal");$i.nav.dh2.className=$i.$c8("_divider_horizontal");$i.divResScroll.className=$i.$c8("_rowheader_scroll");$i.nav.divider.className=$i.$c8("_divider")+" "+$i.$c8("_splitter");$i.nav.scroll.className=$i.$c8("_scrollable");$i.$bW.className=$i.$c8("_matrix");$i.nav.loading.className=$i.$c8("_loading");};this.$eq=function(){this.nav.top.dispose=this.dispose;this.nav.limit;};this.dispose=function(){var c=$i;if(!c.$er){return;};if(c.$bc){return;};c.$bc=true;c.$e8();clearInterval(c.$es);clearInterval(c.$et);for(var name in c.timeouts){var $00=c.timeouts[name];if(DayPilot.isArray($00)){DayPilot.list($00).each(function(t){clearTimeout(t);});}else{clearTimeout($00);}};c.$bE();c.divBreaks=null;c.divCells=null;c.divCorner=null;c.divCrosshair=null;c.divEvents=null;if(c.divHeader){c.divHeader.rows=null;};c.divHeader=null;c.divLines=null;c.divNorth=null;c.divRange=null;c.divResScroll=null;c.divSeparators=null;c.divSeparatorsAbove=null;c.divStretch=null;c.divTimeScroll=null;c.$ck=null;c.$bp=null;c.$bW.calendar=null;c.$bW=null;c.nav.loading=null;c.nav.top.onmousemove=null;c.nav.top.onmouseout=null;c.nav.top.dispose=null;c.nav.top.ontouchstart=null;c.nav.top.ontouchmove=null;c.nav.top.ontouchend=null;c.nav.top.removeAttribute('style');c.nav.top.removeAttribute('class');c.nav.top.innerHTML="";c.nav.top.dp=null;c.nav.top=null;c.nav.scroll.onscroll=null;c.nav.scroll.root=null;c.nav.scroll=null;if(c.$eu){c.$eu.dispose();c.$eu=null;};if(c.daypilot){delete c.daypilot;};DayPilot.ue(window,'resize',c.$ev);DayPilotScheduler.unregister(c);$20=null;(function clearProps(){return;for(var name in c){c[name]=null;}})();};this.$ew=function($21){var event=null;if($21.nodeType){event=$21.event;}else{event=$21;};var $22=$i.$bW;var $23=$i.$ex(event);var ev=event;if($i.$ey($23.rowIndex)){return;};var $R=event.part.height||$i.$dp.eventHeight();var top=(event.part&&event.part.top&&$i.rowlist[event.part.dayIndex])?(event.part.top+$i.rowlist[event.part.dayIndex].top):$23.top;var $N=$23.left;var $24=(ev.cache&&typeof ev.cache.moveVDisabled!=='undefined')?!ev.cache.moveVDisabled:!ev.data.moveVDisabled;var $25=(ev.cache&&typeof ev.cache.moveHDisabled!=='undefined')?!ev.cache.moveHDisabled:!ev.data.moveHDisabled;if(!$24&&DayPilotScheduler.moving){top=$i.rowlist[ev.part.dayIndex].top;};if(!$25&&DayPilotScheduler.moving){$N=event.part.left;};var $26=document.createElement('div');$26.setAttribute('unselectable','on');$26.style.position='absolute';$26.style.width=($23.width)+'px';$26.style.height=$R+'px';$26.style.left=$N+'px';$26.style.top=top+'px';$26.style.zIndex=101;$26.style.overflow='hidden';var $05=document.createElement("div");$26.appendChild($05);$26.className=this.$c8("_shadow");$05.className=this.$c8("_shadow_inner");$i.divShadow.appendChild($26);$26.calendar=$i;return $26;};this.$em=function(y){var $j={};var element;var top=0;var $27=0;var $28=this.rowlist.length;for(var i=0;i<$28;i++){var $x=this.rowlist[i];if($x.hidden){continue;};$27+=$x.height;if(y<$27||i===$28-1){top=$27-$x.height;element=$x;break;}};$j.top=top;$j.bottom=$27;$j.i=i;$j.element=element;return $j;};this.links={};this.links.list=[];this.links.addData=function(link){$i.links.list.push(link);$1k.load();};this.links.load=function($29,$2a,$2b,$h){if(!$29){throw new DayPilot.Exception("links.load(): 'url' parameter required");};$h=$h||{};var $2c=function($l){var $2d={};$2d.exception=$l.exception;$2d.request=$l.request;if(typeof $2b==='function'){$2b($2d);}};var $2e=function($l){var r=$l.request;var $q;try{$q=JSON.parse(r.responseText);}catch(e){var $2f={};$2f.exception=e;$2c($2f);return;};if(DayPilot.isArray($q)){var $2g={};$2g.preventDefault=function(){this.preventDefault.value=true;};$2g.data=$q;if(typeof $2a==="function"){$2a($2g);};if($2g.preventDefault.value){return;};$i.links.list=$q;if($i.$bT){$i.update();}}};var $2h=$i.linksLoadMethod&&$i.linksLoadMethod.toUpperCase()==="POST";if($2h){DayPilot.ajax({"method":"POST","contentType":"application/json","data":{"start":$i.visibleStart().toString(),"end":$i.visibleEnd().toString()},"url":$29,"success":$2e,"error":$2c});}else{var $2i=$29;if(!$h.dontAddStartEnd){var $2j="start="+$i.visibleStart().toString()+"&end="+$i.visibleEnd().toString();if($2i.indexOf("?")>-1){$2i+="&"+$2j;}else{$2i+="?"+$2j;}};DayPilot.ajax({"method":"GET","url":$2i,"success":$2e,"error":$2c});}};var $1k={};this.$ez=$1k;$1k.clear=function(){$i.divLinksAbove.innerHTML='';$i.divLinksBelow.innerHTML='';$i.elements.links=[];};$1k.showLinkpoints=function(){var $Z=$Q.events();$Z.each(function($02){$1k.showLinkpoint($02);});};$1k.showLinkpoint=function($02){var $A=$i.linkPointSize;var $2k=$A/2;var $N=$02.event.part.left;var top=$i.rowlist[$02.event.part.dayIndex].top+$02.event.part.top;var $R=$02.event.part.height;var $O=$02.event.part.right;var $K=DayPilot.Util.div($i.divLinkpoints,$N-$2k,top-$2k+$R/2,$A,$A);$K.className=$i.$c8("_linkpoint");$K.style.boxSizing="border-box";$K.coords={x:$N,y:top+$R/2};$K.type="Start";$K.event=$02.event;$1k.activateLinkpoint($K);$i.elements.linkpoints.push($K);var end=DayPilot.Util.div($i.divLinkpoints,$O-$2k,top-$2k+$R/2,$A,$A);end.className=$i.$c8("_linkpoint");end.style.boxSizing="border-box";end.coords={x:$O,y:top+$R/2};end.type="Finish";end.event=$02.event;$1k.activateLinkpoint(end);$i.elements.linkpoints.push(end);};$1k.activateLinkpoint=function($02){$02.onmousedown=function(ev){var ev=ev||window.event;$2l.source=$02;$2l.calendar=$i;$1k.showLinkpoints();ev.preventDefault&&ev.preventDefault();ev.stopPropagation&&ev.stopPropagation();return false;};$02.onmousemove=function(ev){DayPilot.Util.addClass($02,$i.$c8("_linkpoint_hover"));$1k.clearHideTimeout();};$02.onmouseout=function(ev){if(!$2l.source||$2l.source.event!==$02.event){DayPilot.Util.removeClass($02,$i.$c8("_linkpoint_hover"));}};$02.onmouseup=function(ev){if($2l.source){var $X=$2l.source.type+"To"+$02.type;var $0M=$2l.source.event.id();var to=$02.event.id();var $l={};$l.from=$0M;$l.to=to;$l.type=$X;$l.id=null;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onLinkCreate==="function"){$i.onLinkCreate($l);if($l.preventDefault.value){return;}};var $2m=function(){if(!DayPilot.isArray($i.links.list)){$i.links.list=[];};$i.links.list.push({"from":$0M,"to":to,"type":$X,"id":$l.id});$1k.load();};switch($i.linkCreateHandling){case "Update":$2m();break;case "CallBack":$i.$eA($l);break;case "PostBack":$i.$eB($l);break;case "Notify":$2m();$i.$eC($l);break;};if(typeof $i.onLinkCreated==="function"){$i.onLinkCreated($l);}}};};$1k.hideLinkpoints=function(){$i.divLinkpoints.innerHTML='';$i.elements.linkpoints=[];};$1k.hideTimeout=null;$1k.hideLinkpointsWithDelay=function(){$1k.hideTimeout=setTimeout(function(){$1k.hideLinkpoints();},100);};$1k.clearHideTimeout=function(){if($1k.hideTimeout){clearTimeout($1k.hideTimeout);$1k.hideTimeout=null;}};$1k.load=function(){$1k.clear();if(!DayPilot.isArray($i.links.list)){return;};for(var i=0;i<$i.links.list.length;i++){var link=$i.links.list[i];$1k.drawLinkId(link.from,link.to,link);}};$1k.drawLinkId=function($0M,to,$06){var $K=$i.events.find($0M);var end=$i.events.find(to);$1k.drawLink($K,end,$06);};$1k.drawLink=function($0M,to,$06){var $2n=null;if($0M&&$0M.tagName&&$0M.tagName.toLowerCase()==="div"){$2n=$0M;}else{$2n=$i.$dh($0M);};var $2o=null;if(to&&to.tagName&&to.tagName.toLowerCase()==="div"){$2o=to;}else{$2o=$i.$dh(to);};if(!$2n){return;};if(!$2o){return;};var $X=$06.type||"FinishToStart";var $K,end;var $2p=$2n.offsetTop;var $2q=$2o.offsetTop;var $2r=$2n.offsetLeft+$2n.offsetWidth;var $2s=$2o.offsetLeft+$2o.offsetWidth;var $2t=$2o.offsetLeft;var $2u=$2n.offsetLeft;var $2v=$2o.offsetHeight;switch($X){case "FinishToStart":$K={x:$2r,y:$2p};end={x:$2t,y:$2q};if($K.y>end.y){if($2q+$2v>$2p){end.y=$K.y;}else if($K.x<=end.x){end.y+=$2v;end.bottom=true;}};break;case "StartToFinish":$K={x:$2u,y:$2p};end={x:$2s,y:$2q};break;case "StartToStart":$K={x:$2u,y:$2p};end={x:$2t,y:$2q};break;case "FinishToFinish":$K={x:$2r,y:$2p};end={x:$2s,y:$2q};break;};return $1k.drawLinkXy($K,end,$06);};$1k.clearShadow=function(){$i.divLinkShadow.innerHTML='';$i.elements.linkshadow=[];};$1k.drawShadow=function($0M,to){$1k.clearShadow();if(DayPilot.browser.ielt9){$1k.drawShadowOldStyle($0M,to);}else{var parent=$i.divLinkShadow;var $0x=DayPilot.line($0M.x,$0M.y,to.x,to.y,true);parent.appendChild($0x);$i.elements.linkshadow.push($0x);}};$1k.drawShadowOldStyle=function($0M,to){var nx=Math.min($0M.x,to.x);var $A=2;var parent=$i.divLinkShadow;var $2w="black";var h1=DayPilot.Util.div(parent,nx,$0M.y,$0M.x-nx,$A);h1.style.backgroundColor=$2w;$i.elements.linkshadow.push(h1);var v1=DayPilot.Util.div(parent,nx,$0M.y,$A,to.y-$0M.y);v1.style.backgroundColor=$2w;$i.elements.linkshadow.push(v1);var h3=DayPilot.Util.div(parent,nx,to.y,to.x-nx,$A);h3.style.backgroundColor=$2w;$i.elements.linkshadow.push(h3);var a=DayPilot.Util.div(parent,to.x-6,to.y-5,0,0);a.style.borderColor="transparent transparent transparent "+$2w;a.style.borderStyle="solid";a.style.borderWidth="6px";$i.elements.linkshadow.push(a);};$1k.drawLinkXy=function($0M,to,$06){var $j={"divs":[],"props":$06,"clear":function(){var link=this;DayPilot.de(link.divs);link.divs.forEach(function($02){DayPilot.rfa($i.elements.links,$02);});}};var $2x=$i.eventHeight/2;var $A=$06.width||1;var $X=$06.type||"FinishToStart";var $2w=$06.color;var style=$06.style;var $2y=$06.layer||"Above";var $2z=$2y==="Above";var $2A=$2z?$i.divLinksAbove:$i.divLinksBelow;var $R=$i.eventHeight;var $W=$i.linkBottomMargin;var $2B=function($02,$2C){if($2w){$02.style["border"+$2C+"Color"]=$2w;};if(style){$02.style["border"+$2C+"Style"]=style;}};var $2D=[];var $2E=function($02,$2F){$i.elements.links.push($02);$2G($02);$2H($02);$02.divs=$2D;if(!$2F){$2D.push($02);};$j.divs.push($02);};var $2H=function($02){$02.oncontextmenu=function(ev){ev=ev||window.event;if($i.contextMenuLink){var link=new DayPilot.Link($06,$i);$i.contextMenuLink.show(link);};ev.cancelBubble=true;ev.preventDefault?ev.preventDefault():null;}};var $2G=function($02){$02.onmouseenter=function(){DayPilot.Util.addClass($02.divs,$i.$c8("_link_hover"));};$02.onmouseleave=function(){DayPilot.Util.removeClass($02.divs,$i.$c8("_link_hover"));};};if($X==="FinishToStart"){if($0M.y===to.y&&$0M.x===to.x){var w=10;var $2I=$0M.x-w/2;var $2J=$0M.y+$R-$W-w/2;var a;if($2w){a=DayPilot.Util.div($2A,$2I,$2J,w,w);a.style.borderRadius=w+"px";a.style.backgroundColor=$2w;}else{a=DayPilot.Util.div($2A,$2I,$2J,w,w);a.className=$i.$c8("_link_dot");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}else if($0M.y>to.y||($0M.y==to.y&&to.bottom)){if($0M.x<=to.x){var $2K=$0M.x;var $2L=$0M.y+$R-$W;var $2I=to.x+$2x;var $2J=to.y;var h1=DayPilot.Util.div($2A,$2K,$2L,$2I-$0M.x,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,$2I,$2L,$A,$2J-$2L);v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var a;if($2w){a=DayPilot.Util.div($2A,$2I-5+Math.floor($A/2),$2J-5,0,0);if($0M.y<to.y){a.style.borderColor=$2w+" transparent transparent transparent";}else{a.style.borderColor="transparent transparent "+$2w+" transparent";};a.style.borderStyle="solid";a.style.borderWidth="5px";}else{a=DayPilot.Util.div($2A,$2I-6+Math.floor($A/2),$2J-6,6,6);if($0M.y<to.y){a.className=$i.$c8("_link_arrow_down");}else{a.className=$i.$c8("_link_arrow_up");};DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}else{var $2M=5;var $2N=to.y+$R+$2M;var h1=DayPilot.Util.div($2A,$0M.x,$0M.y+$R-$W,$2x+$A,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,$0M.x+$2x,$0M.y+$R-$W,$A,$2N-($0M.y+$R-$W));v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var h2=DayPilot.Util.div($2A,to.x-$2x,$2N,$0M.x+2*$2x+$A-to.x,$A);h2.style.boxSizing="border-box";h2.style.borderBottomWidth=$A+"px";h2.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h2,$06.cssClass);$2B(h2,"Bottom");$2E(h2);var v2=DayPilot.Util.div($2A,to.x-$2x,$2N,$A,to.y-$2N+$R-$W);v2.style.boxSizing="border-box";v2.style.borderRightWidth=$A+"px";v2.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v2,$06.cssClass);$2B(v2,"Right");$2E(v2);var h3=DayPilot.Util.div($2A,to.x-$2x,to.y+$R-$W,$2x,$A);h3.style.boxSizing="border-box";h3.style.borderBottomWidth=$A+"px";h3.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h3,$06.cssClass);$2B(h3,"Bottom");$2E(h3);var a;if($2w){a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,0,0);a.style.borderWidth="6px";a.style.borderColor="transparent transparent transparent "+$2w;a.style.borderStyle="solid";}else{a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,6,6);a.className=$i.$c8("_link_arrow_right");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}}else if($0M.y===to.y){if($0M.x<to.x){var $2K=$0M.x;var $2L=$0M.y+$R-$W;var $2I=to.x;var h1=DayPilot.Util.div($2A,$2K,$2L,$2I-$0M.x,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var a;if($2w){a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,0,0);a.style.borderWidth="6px";a.style.borderColor="transparent transparent transparent "+$2w;a.style.borderStyle="solid";}else{a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,6,6);a.className=$i.$c8("_link_arrow_right");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}else{var $2M=5;var $2N=to.y+$R+$2M;var h1=DayPilot.Util.div($2A,$0M.x,$0M.y+$R-$W,$2x+$A,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,$0M.x+$2x,$0M.y+$R-$W,$A,$2N-($0M.y+$R-$W));v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var h2=DayPilot.Util.div($2A,to.x-$2x,$2N,$0M.x+2*$2x+$A-to.x,$A);h2.style.boxSizing="border-box";h2.style.borderBottomWidth=$A+"px";h2.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h2,$06.cssClass);$2B(h2,"Bottom");$2E(h2);var v2=DayPilot.Util.div($2A,to.x-$2x,$2N,$A,to.y-$2N+$R-$W);v2.style.boxSizing="border-box";v2.style.borderRightWidth=$A+"px";v2.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v2,$06.cssClass);$2B(v2,"Right");$2E(v2);var h3=DayPilot.Util.div($2A,to.x-$2x,to.y+$R-$W,$2x,$A);h3.style.boxSizing="border-box";h3.style.borderBottomWidth=$A+"px";h3.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h3,$06.cssClass);$2B(h3,"Bottom");$2E(h3);var a;if($2w){a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,0,0);a.style.borderWidth="6px";a.style.borderColor="transparent transparent transparent "+$2w;a.style.borderStyle="solid";}else{a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,6,6);a.className=$i.$c8("_link_arrow_right");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}}else{if($0M.x>to.x){var $2z=5;var $2N=to.y-$2z;var h1=DayPilot.Util.div($2A,$0M.x,$0M.y+$R-$W,$2x+$A,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,$0M.x+$2x,$0M.y+$R-$W,$A,$2N-($0M.y+$R-$W));v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var h2=DayPilot.Util.div($2A,to.x-$2x,$2N,$0M.x+2*$2x+$A-to.x,$A);h2.style.boxSizing="border-box";h2.style.borderBottomWidth=$A+"px";h2.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h2,$06.cssClass);$2B(h2,"Bottom");$2E(h2);var v2=DayPilot.Util.div($2A,to.x-$2x,$2N,$A,to.y-$2N+$R-$W);v2.style.boxSizing="border-box";v2.style.borderRightWidth=$A+"px";v2.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v2,$06.cssClass);$2B(v2,"Right");$2E(v2);var h3=DayPilot.Util.div($2A,to.x-$2x,to.y+$R-$W,$2x,$A);h3.style.boxSizing="border-box";h3.style.borderBottomWidth=$A+"px";h3.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h3,$06.cssClass);$2B(h3,"Bottom");$2E(h3);var a;if($2w){a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,0,0);a.style.borderWidth="6px";a.style.borderColor="transparent transparent transparent "+$2w;a.style.borderStyle="solid";}else{a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,6,6);a.className=$i.$c8("_link_arrow_right");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}else{var $2K=$0M.x;var $2L=$0M.y+$R-$W;var $2I=to.x+$2x;var $2J=to.y;var h1=DayPilot.Util.div($2A,$2K,$2L,$2I-$0M.x,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,$2I,$2L,$A,$2J-$2L);v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var a;if($2w){a=DayPilot.Util.div($2A,$2I-5+Math.floor($A/2),$2J-5,0,0);if($0M.y<to.y){a.style.borderColor=$2w+" transparent transparent transparent";}else{a.style.borderColor="transparent transparent "+$2w+"transparent";};a.style.borderStyle="solid";a.style.borderWidth="5px";}else{a=DayPilot.Util.div($2A,$2I-6+Math.floor($A/2),$2J-6,6,6);if($0M.y<to.y){a.className=$i.$c8("_link_arrow_down");}else{a.className=$i.$c8("_link_arrow_up");};DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}}}else if($X==="StartToFinish"){var $2z=5;var $2N=to.y-$2z;var h1=DayPilot.Util.div($2A,to.x,to.y+$R-$W,$2x+$A,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,to.x+$2x,to.y+$R-$W,$A,$2N-(to.y+$R-$W)+0);v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var h2=DayPilot.Util.div($2A,$0M.x-$2x,$2N,to.x+2*$2x+$A-$0M.x,$A);h2.style.boxSizing="border-box";h2.style.borderBottomWidth=$A+"px";h2.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h2,$06.cssClass);$2B(h2,"Bottom");$2E(h2);var v2=DayPilot.Util.div($2A,$0M.x-$2x,$2N,$A,$0M.y+$R-$W-$2N+0);v2.style.boxSizing="border-box";v2.style.borderRightWidth=$A+"px";v2.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v2,$06.cssClass);$2B(v2,"Right");$2E(v2);var h3=DayPilot.Util.div($2A,$0M.x-$2x,$0M.y+$R-$W,$2x,$A);h3.style.boxSizing="border-box";h3.style.borderBottomWidth=$A+"px";h3.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h3,$06.cssClass);$2B(h3,"Bottom");$2E(h3);var a;if($2w){a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,0,0);a.style.borderColor="transparent "+$2w+" transparent transparent";a.style.borderStyle="solid";a.style.borderWidth="6px";}else{a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,6,6);a.className=$i.$c8("_link_arrow_left");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}else if($X==="StartToStart"){var nx=Math.min($0M.x,to.x)-$2x;var h1=DayPilot.Util.div($2A,nx,$0M.y+$R-$W,$0M.x-nx,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,nx,$0M.y+$R-$W,$A,to.y-$0M.y);v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var h3=DayPilot.Util.div($2A,nx,to.y+$R-$W,to.x-nx,$A);h3.style.boxSizing="border-box";h3.style.borderBottomWidth=$A+"px";h3.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h3,$06.cssClass);$2B(h3,"Bottom");$2E(h3);var a;if($2w){a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,0,0);a.style.borderColor="transparent transparent transparent "+$2w;a.style.borderStyle="solid";a.style.borderWidth="6px";}else{a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,6,6);a.className=$i.$c8("_link_arrow_right");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);}else if($X==="FinishToFinish"){var fx=Math.max(to.x,$0M.x)+$2x;var h1=DayPilot.Util.div($2A,$0M.x,$0M.y+$R-$W,fx-$0M.x,$A);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$A+"px";h1.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h1,$06.cssClass);$2B(h1,"Bottom");$2E(h1);var v1=DayPilot.Util.div($2A,fx,$0M.y+$R-$W,$A,to.y-$0M.y);v1.style.boxSizing="border-box";v1.style.borderRightWidth=$A+"px";v1.className=$i.$c8("_link_vertical");DayPilot.Util.addClass(v1,$06.cssClass);$2B(v1,"Right");$2E(v1);var h3=DayPilot.Util.div($2A,to.x,to.y+$R-$W,fx-to.x,$A);h3.style.boxSizing="border-box";h3.style.borderBottomWidth=$A+"px";h3.className=$i.$c8("_link_horizontal");DayPilot.Util.addClass(h3,$06.cssClass);$2B(h3,"Bottom");$2E(h3);var a;if($2w){a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,0,0);a.style.borderColor="transparent "+$2w+" transparent transparent";a.style.borderStyle="solid";a.style.borderWidth="6px";}else{a=DayPilot.Util.div($2A,to.x-6,to.y+$R-$W-5,6,6);a.className=$i.$c8("_link_arrow_left");DayPilot.Util.addClass(a,$06.cssClass);};$2E(a,true);};return $j;};this.$eA=function($l,$q){var $0Y={};$0Y.from=$l.from;$0Y.to=$l.to;$0Y.type=$l.type;$i.$cJ("LinkCreate",$0Y,$q);};this.$eC=function($l,$q){var $0Y={};$0Y.from=$l.from;$0Y.to=$l.to;$0Y.type=$l.type;$i.$cJ("LinkCreate",$0Y,$q,"Notify");};this.$eB=function($l,$q){var $0Y={};$0Y.from=$l.from;$0Y.to=$l.to;$0Y.type=$l.type;$i.$cI("LinkCreate",$0Y,$q);};this.$eD=function(i){var top=0;var $W=0;var $1B=0;if(i>this.rowlist.length-1){throw "Row index too high (DayPilotScheduler._getRowByIndex)";};for(var j=0;j<=i;j++){var $x=this.rowlist[j];if($x.hidden){continue;};$W+=$x.height;$1B++;};top=$W-$x.height;var $j={};$j.top=top;$j.height=$x.height;$j.bottom=$W;$j.i=$1B-1;$j.data=$x;return $j;};this.$eE=function(){if(this.backendUrl){return(typeof $i.events.list==='undefined')||(!$i.events.list);}else{return false;}};this.events.find=function(id){if(!$i.events.list||typeof $i.events.list.length==='undefined'){return null;};if(typeof id==="function"){return $i.$eF(id);};var $2O=$i.events.list.length;for(var i=0;i<$2O;i++){if($i.events.list[i].id===id){return new DayPilot.Event($i.events.list[i],$i);}};return null;};this.$eF=function(f){var $2O=$i.events.list.length;for(var i=0;i<$2O;i++){var e=new DayPilot.Event($i.events.list[i],$i);if(f(e)){return e;}};return null;};this.events.focus=function(e){var $02=$i.$eG(e);$02&&$02.focus();};this.events.scrollIntoView=function(e){var $02=$i.$eG(e);if(!$02){return;};var $1D=e.start();if($1D<$i.$cs()||$i.$cx()<$1D){$i.scrollTo($1D,"fast","middle");};var r=e.resource();if($i.getViewPort().resources.indexOf(r)===-1){$i.scrollToResource(r);}};this.events.all=function(){var $Y=[];for(var i=0;i<$i.events.list.length;i++){var e=new DayPilot.Event($i.events.list[i],$i);$Y.push(e);};return DayPilot.list($Y);};this.events.filter=function($l){$i.events.$eH=$l;$i.$da({"eventsOnly":true});};this.events.edit=function(e){var $02=$i.$dh(e);if(!$02&&!DayPilot.list($i.events.$eI.rows).isEmpty()){setTimeout(function(){$i.$cM($i.$dh(e));});return;};$i.$cM($02);};this.events.load=function($29,$2a,$2b){if(!$29){throw new DayPilot.Exception("events.load(): 'url' parameter required");};var $2c=function($l){var $2d={};$2d.exception=$l.exception;$2d.request=$l.request;if(typeof $2b==='function'){$2b($2d);}};var $2e=function($l){var r=$l.request;var $q;try{$q=JSON.parse(r.responseText);}catch(e){var $2f={};$2f.exception=e;$2c($2f);return;};if(DayPilot.isArray($q)){var $2g={};$2g.preventDefault=function(){this.preventDefault.value=true;};$2g.data=$q;if(typeof $2a==="function"){$2a($2g);};if($2g.preventDefault.value){return;};$i.events.list=$q;if($i.$bT){$i.update();}}};var $2h=$i.eventsLoadMethod&&$i.eventsLoadMethod.toUpperCase()==="POST";if($2h){DayPilot.ajax({"method":"POST","contentType":"application/json","data":{"start":$i.visibleStart().toString(),"end":$i.visibleEnd().toString()},"url":$29,"success":$2e,"error":$2c});}else{var $2i=$29;var $2j="start="+$i.visibleStart().toString()+"&end="+$i.visibleEnd().toString();if($2i.indexOf("?")>-1){$2i+="&"+$2j;}else{$2i+="?"+$2j;};DayPilot.ajax({"method":"GET","url":$2i,"success":$2e,"error":$2c});}};this.events.findRecurrent=function($2P,$0L){if(!$i.events.list||typeof $i.events.list.length==='undefined'){return null;};var $2O=$i.events.list.length;for(var i=0;i<$2O;i++){if($i.events.list[i].recurrentMasterId===$2P&&$i.events.list[i].start.getTime()===$0L.getTime()){return new DayPilot.Event($i.events.list[i],$i);}};return null;};this.events.$d2=function($q){var $1d=[];for(var i=0;i<$i.rowlist.length;i++){var $x=$i.rowlist[i];if($x.isNewRow){continue;};$i.$ct(i);for(var r=0;r<$x.events.length;r++){var rd=$x.events[r].data;if($i.$eJ(rd,$q)){$1d.push(i);$x.events.splice(r,1);break;}}};return $1d;};this.events.$eK=function($q){for(var i=0;i<$i.rowlist.length;i++){var $x=$i.rowlist[i];if($x.isNewRow){continue;};$i.$ct(i);for(var r=0;r<$x.events.length;r++){var re=$x.events[r];if($i.$eJ(re.data,$q)){return $x.events[r];}}};return null;};this.events.$d3=function($q){var $1d=[];var $2Q=$i.$eL()||$i.viewType==="Days";var $1B=DayPilot.indexOf($i.events.list,$q);$i.$eM($1B);for(var i=0;i<$i.rowlist.length;i++){var $x=$i.rowlist[i];if($x.isNewRow){continue;};$i.$ct(i);var ep=$i.$eN($q,$x);if(ep){if(typeof $i.onBeforeEventRender==='function'){ep.cache=$i.$bg.events[$1B];};$1d.push(i);if(!$2Q){break;}}};return $1d;};this.$eJ=function($2R,$2S){$2R=$2R instanceof DayPilot.Event?$2R.data:$2R;$2S=$2S instanceof DayPilot.Event?$2S.data:$2S;if($2R===$2S){return true;};if($2R.id===$2S.id){return true;};if(DayPilot.Util.isNullOrUndefined($2R.id)&&!DayPilot.Util.isNullOrUndefined($2R.recurrentMasterId)){return $2R.recurrentMasterId===$2S.recurrentMasterId&&new DayPilot.Date($2R.start)===new DayPilot.Date($2S.start);};return false;};this.events.update=function(e,$q,$h){var $0Y={};$0Y.oldEvent=new DayPilot.Event(e.copy(),$i);$0Y.newEvent=new DayPilot.Event(e.temp(),$i);var $h=$h||{};var $1c=new DayPilot.Action($i,"EventUpdate",$0Y,$q);var $2T=DayPilot.list($i.events.list).find(function($00){return $i.$eJ($00,e.data);});if(!$2T){return;};if($i.$du.scope){$i.$du.notify(function(){e.commit();});}else{$i.$bR.skip=true;var $2U=$i.eventUpdateInplaceOptimization||$h.inplace;if($2U&&$0Y.oldEvent.resource()===$0Y.newEvent.resource()&&$0Y.oldEvent.start()===$0Y.newEvent.start()&&$0Y.oldEvent.end()===$0Y.newEvent.end()){e.commit();var $02=$i.$dh(e);if($02){var $2V=$02.event.part;$i.$eO($02);DayPilot.rfa($i.elements.events,$02);e.part=$2V;}else{$c("Old div not found");};$i.events.$d2(e.data);var $1d=$i.events.$d3(e.data);$i.$d4($1d);var ue=$i.events.$eK(e.data);ue&&$i.$eP(ue);}else{var $1d=$i.events.$d2(e.data);e.commit();$1d=$1d.concat($i.events.$d3(e.data));$i.events.$eQ($1d);}};return $1c;};this.events.remove=function(e,$q){var $0Y={};$0Y.e=new DayPilot.Event(e.data,$i);var $1c=new DayPilot.Action($i,"EventRemove",$0Y,$q);var $1B=DayPilot.indexOf($i.events.list,e.data);if($1B>=0){$i.events.list.splice($1B,1);};if($i.$du.scope){$i.$du.notify();}else{$i.$bR.skip=true;var $1d=$i.events.$d2(e.data);var $2U=$i.eventUpdateInplaceOptimization;if($2U&&$1d.length===1&&!$i.events.$eR(e)){$i.$eS($i.rowlist[$1d[0]]);var $02=$i.$dh(e);if($02){var $1B=$i.elements.events.indexOf($02);$i.elements.events.splice($1B,1);$i.$eO($02);}}else{$i.events.$eQ($1d);}};return $1c;};this.events.add=function(e,$q){if(!(e instanceof DayPilot.Event)){e=new DayPilot.Event(e);};e.calendar=$i;if(!$i.events.list){$i.events.list=[];};var $2T=DayPilot.list($i.events.list).find(function($00){var $q=$00 instanceof DayPilot.Event?$00.data:$00;return $q===e.data;});if(!$2T){$i.events.list.push(e.data);};var $1c=new DayPilot.Action($i,"EventAdd",$0Y,$q);if(!$i.$bT){return $1c;};if($i.$du.scope){$i.$du.notify();}else{$i.$bR.skip=true;var $0Y={};$0Y.e=e;var $1d=$i.events.$d3(e.data);var $R=e.data.height||$i.eventHeight;var $2U=$i.eventUpdateInplaceOptimization;if($2U&&$1d.length===1&&!$i.events.$eR(e)&&$R<=$i.eventHeight&&!$i.eventVersionsEnabled){var $x=$i.rowlist[$1d[0]];$i.$eS($x);var ep=$x.events.find(function($00){return $00.data===e.data;});ep.part.top=0;ep.part.height=$R;ep.part.line=0;$i.$eP(ep);}else{$i.events.$eQ($1d);}};return $1c;};this.events.$eR=function(e){var $q=e instanceof DayPilot.Event?e.data:e;var $K=new DayPilot.Date($q.start);var end=new DayPilot.Date($q.end);var $2W=DayPilot.list($i.events.list).find(function($00){if($i.$eJ($q,$00)){return false;};if($q.resource!==$00.resource){return false;};var $2X=new DayPilot.Date($00.start);var $2Y=new DayPilot.Date($00.end);return DayPilot.Util.overlaps($K,end,$2X,$2Y);});return !!$2W;};this.events.addByData=function($q){$i.events.add(new DayPilot.Event($q));};this.events.removeByData=function($q){var e=$i.events.find($q.id);if(!e){throw new DayPilot.Exception("The event to be removed was not found");};$i.events.remove(e);};this.events.updateByData=function($q){var e=$i.events.find($q.id);if(!e){throw new DayPilot.Exception("The event to be updated was not found");};$i.events.remove(e);$i.events.add(new DayPilot.Event($q));};this.events.removeById=function(id){var e=$i.events.find(id);if(!e){throw new DayPilot.Exception("The event to be removed was not found");};$i.events.remove(e);};this.events.$eI={"rows":[]};this.events.$eT=null;this.events.$do=function(){clearTimeout($i.events.$eT);$i.events.$eI.rows=[];};this.events.$eU=0;this.events.$eQ=function($1d){var $2m=$i.events.$eI.rows;DayPilot.list($1d).each(function($x){$2m.push($x);});$i.events.$eI.rows=DayPilot.ua($2m);var $14=$i.events.immediateRefresh;if(!$i.events.$eT){$i.events.$eT=setTimeout($14,$i.events.$eU);}};this.events.immediateRefresh=function(){clearTimeout($i.events.$eT);$i.events.$eT=null;var $1d=$i.events.$eI.rows;$i.events.$eI.rows=[];$i.$d4($1d);$i.$d5();if($i.$bT){if($i.viewType==="Gantt"){$i.update();}else{$i.$d6($1d);$i.$bC();$i.$eV();}}};this.$bR={};this.$bR.enabled=false;this.$bR.skip=false;this.$bR.skipUpdate=function(){return $i.$bR.skip;};this.$bR.skipped=function(){$i.$bR.skip=false;};this.queue={};this.queue.list=[];this.queue.list.ignoreToJSON=true;this.queue.add=function($1c){if(!$1c){return;};if($1c.isAction){$i.queue.list.push($1c);}else{throw "DayPilot.Action object required for queue.add()";}};this.queue.notify=function($q){var $0Y={};$0Y.actions=$i.queue.list;$i.$cJ('Notify',$0Y,$q,"Notify");$i.queue.list=[];};this.queue.clear=function(){$i.queue.list=[];};this.queue.pop=function(){return $i.queue.list.pop();};this.cells.find=function($K,$1s){var $y=$i.getPixels(new DayPilot.Date($K));if(!$y){return $2Z();};var x=$y.i;var $x=$i.$bZ($1s);if(!$x){return $2Z();};var y=$x.index;return this.findXy(x,y);};this.cells.findByPixels=function(x,y){var $0K=$i.$cC(x);if(!$0K){return $2Z();};var x=$0K.x;var $x=$i.$em(y);if(!$x){return $2Z();};var y=$x.i;return this.findXy(x,y);};this.cells.all=function(){var $Y=[];var $1Q=$i.itline.length;var $30=$i.rowlist.length;for(var x=0;x<$1Q;x++){for(var y=0;y<$30;y++){var $P=$i.cells.findXy(x,y);$Y.push($P[0]);}};return $2Z($Y);};this.cells.$eW=function(x,y){var $0K=$i.$cL(x);var $x=$i.rowlist[y];var $1x=$x.start.getTime()-$i.$cs().getTime();var $K=$0K.start.addTime($1x);var end=$0K.end.addTime($1x);var $P={};$P.x=x;$P.y=y;$P.i=x+"_"+y;if(!$x.id){};$P.resource=$x.id;$P.start=$K;$P.end=end;$P.calendar=$i;$P.isParent=$x.children&&$x.children.length;$P.update=function(){if(!$i.rowlist[$P.y].hidden){var $1e=$i.$bg.cells[$P.i];$i.$eX($1e);var $J=$i.$c1();if($J.xStart<=$P.x&&$P.x<=$J.xEnd){if($J.yStart<=$P.y&&$P.y<=$J.yEnd){$i.$eY($P.x,$P.y);}}}};$P.utilization=function(name){if(!$x.sections){$x.calculateUtilization();};return $x.sections.forRange($K,end).maxSum(name);};$P.events=function(){return $x.events.forRange($K,end);};$P.div=$i.$bg.cells[$P.i];var p=$i.$eZ(x,y);$P.properties=p;return $P;};this.cells.findXy=function(x,y){if(DayPilot.isArray(x)){var $M=[];for(var i=0;i<x.length;i++){var o=x[i];$M.push($i.cells.$eW(o.x,o.y));};return $2Z($M);}else if(x===null||y===null){return $2Z();};var $P=$i.cells.$eW(x,y);return $2Z($P);};var $31=function(a){var $Y=DayPilot.list();if(DayPilot.isArray(a)){for(var i=0;i<a.length;i++){$Y.push(a[i]);}}else if(typeof a==='object'){$Y.push(a);};return $Y;};this.$f0=function(a){var $Y=DayPilot.list();if(DayPilot.isArray(a)){for(var i=0;i<a.length;i++){$Y.push(a[i]);}}else if(typeof a==='object'){$Y.push(a);};$Y.cssClass=function($32){this.each(function($00){$00.properties.cssClass=DayPilot.Util.addClassToString($00.properties.cssClass,$32);$00.update();});return this;};$Y.removeClass=function($32){this.each(function($00){$00.properties.cssClass=DayPilot.Util.removeClassFromString($00.properties.cssClass,$32);$00.update();});return this;};$Y.addClass=$Y.cssClass;$Y.html=function($0b){this.each(function($00){$00.properties.html=$0b;$00.update();});return this;};$Y.invalidate=function(){this.each(function($00){delete $i.$cu[$00.i];});return this;};return $Y;};var $2Z=this.$f0;this.$du={};this.$du.scope=null;this.$du.notify=function(f){if($i.$du.scope){DayPilot.Util.safeApply($i.$du.scope,f);}};this.debug=new DayPilot.Debug(this);this.$f1=function($u){if($i.viewType!=='Days'){throw "Checking row start when viewType !== 'Days'";};for(var i=0;i<$i.rowlist.length;i++){var $x=$i.rowlist[i];var $q=$x.element?$x.element.data:$x.data;var $K=$q.start;if($u.getTime()>=$K.getTime()&&$u.getTime()<$K.addDays(1).getTime()){return $K;}};return null;};this.$f2=function($u){var $K=$i.$cs();if($u.ticks===$K.ticks){return $u;};var $0D=$K;if($u.ticks<$K.ticks){var $33=this.itline[0].end.ticks-this.itline[0].start.ticks;while($0D.ticks>$u.ticks){$0D=$0D.addTime(-$33);};return $0D;};if($i.viewType==='Days'){var $34=this.$f1($u);var $0G=$34.getTime()-$i.$cs().getTime();var $P=this.$cE($u.addTime(-$0G));if($P.current){return $P.current.start.addTime($0G);};if($P.past){return $P.previous.end.addTime($0G);};throw "getBoxStart(): time not found";}else{var $P=this.$cE($u);if($P.current){return $P.current.start;};if($P.past){return $P.previous.end;};if($P.hidden){var $H=$P.next.start.getTime()-$u.getTime();var $35=$P.next.end.getTime()-$P.next.start.getTime();var $36=Math.ceil($H/$35)*$35;var $j=$P.next.start.addTime(-$36);return $j;};throw "getBoxStart(): time not found";}};this.$ex=function(e){var $x=this.$em($i.coords.y);if(typeof e.end !=='function'){throw "e.end function is not defined";};if(!e.end()){throw "e.end() returns null";};var $0Q=DayPilot.DateUtil.diff(e.rawend(),e.start());$0Q=Math.max($0Q,1);var $37=$0d.useBox($0Q);var $38=e.data&&e.data.type==="Milestone";var $39=$i.eventHeight;var $3a=0;var x=$i.coords.x;if($38){x+=$39/2;};if($i.scale==="Manual"){var $3b=(function(){var end=$i.getDate($i.coords.x,true,true);var $K=end.addTime(-$0Q);var $3c=$i.getPixels($K).boxLeft;var $3d=$i.getPixels(end).boxRight;var end=Math.min($3d,$i.coords.x);return end -$3c;})();var $0G=Math.min(DayPilotScheduler.moveOffsetX?DayPilotScheduler.moveOffsetX:0,$3b);x=$i.coords.x-$0G;};var $1x=0;var $3e=this.viewType==='Days'||this.$f3();if($3e&&!e.part.external){$1x=this.rowlist[e.part.dayIndex].start.getTime()-this.$cs().getTime();};if($37&&!$38){var $P=$i.$cE(e.start());var $3f=!$P.hidden&&!$P.past;$3a=e.start().getTime()-this.$f2(e.start().addTime(-$1x)).addTime($1x).getTime();if($3f){$3a=(function($3g,$0G){var $3h=$i.$f4($i.$cE($3g).current);var $3i=$i.$f4($i.$cC(x).cell);if($3h>$3i*1.2){var $3j=$0G>0?1:-1;var $0G=Math.abs($0G);while($0G>=$3i){$0G-=$3i;};$0G*=$3j;};return $0G;})(e.start(),$3a);}};var $3k=DayPilotScheduler.movingEvent?DayPilotScheduler.movingEvent.calendar:$i;if($3k!==$i){if($3k.$f5()!==$i.$f5()){$3a=0;}};var $3l=0;if(DayPilotScheduler.moveDragStart&&$i.scale!=="Manual"&&$3k===$i){if($37){var $3m=e.start().addTime(-$1x);var $3n=this.$f2($3m);$3l=DayPilotScheduler.moveDragStart.getTime()-$3n.getTime();var $3o=$i.$f5()*60*1000;$3l=Math.floor($3l/$3o)*$3o;}else{$3l=DayPilotScheduler.moveDragStart.getTime()-e.start().addTime(-$1x).getTime();}}else{$3l=0;};if(this.eventMoveToPosition){$3l=0;};var $K=this.getDate(x,true).addTime(-$3l).addTime($1x);if(DayPilotScheduler.resizing){$K=e.start();};if(this.snapToGrid){$K=this.$f2($K.addTime(-$1x)).addTime($1x);};$K=$K.addTime($3a);var end=$K.addTime($0Q);var $3p=$K;var $3q=end;if($3e){$3p=$K.addTime(-$1x);$3q=$3p.addTime($0Q);var $3r=$x.element.data.start.getTime()-this.$cs().getTime();$K=$3p.addTime($3r);end=$K.addTime($0Q);};if(DayPilotScheduler.moveDragStart&&$i.eventMoveSkipNonBusiness){var y=$x.i;var $2k=DayPilotScheduler.moveDragStart.addTime($1x);if(this.snapToGrid){$2k=this.$f2($2k.addTime(-$1x)).addTime($1x);};var $3s=!e.part.dayIndex;var $3t=0;if(!$3s){$3t=$i.$f6(e.start(),$2k,e.part.dayIndex);};var $0Q=$i.$f7(e);var $3u=$i.getDate(x,true);if($i.snapToGrid){$3u=$i.getDate(x);};var $0G=$i.$f8($3u,$3t,y);$K=$3u.addTime(-$0G).addTime($1x);if(this.snapToGrid){$K=this.$f2($K.addTime(-$1x)).addTime($1x);};if(!$3s){$3a=$i.$f6(this.$f2(e.start().addTime(-$1x)).addTime($1x),e.start(),y);}else{$3a=0;};$K=$K.addTime($3a);end=$i.$f9($K,$0Q,y);if(end>=$i.visibleEnd()){end=$i.visibleEnd();$K=end.addTime(-$i.$fa(end,$0Q));};$3p=$K.addTime(-$1x);$3q=end.addTime(-$1x);};var $3v=this.getPixels($3p);var $3w=this.getPixels($3q);var $N=($37)?$3v.boxLeft:$3v.left;var $A=($37)?($3w.boxRight-$N):($3w.left-$N);if($38){$A=$39;$N-=$A/2;};var $23={};$23.top=$x.top;$23.left=$N;$23.row=$x.element;$23.rowIndex=$x.i;$23.width=$A;$23.start=$K;$23.end=end;$23.relativeY=$i.coords.y-$x.top;return $23;};this.$fb=function($K,end){var $S=$i.$cE($K);var $T=$i.$cE(end);var $3x=null;var $3y=0;if($S.hidden){$3x=$K;};for(var x=$S.i;x<=$T.i;x++){var $P=$i.itline[x];if($3x&&$3x<$P.start){$3y+=$P.start.getTime()-$3x.getTime();};$3x=$P.end;};return $3y;};this.$f9=function($K,$0Q,y){var $3z=$0Q;var $x=$i.rowlist[y];var $1x=$x.data.start.getTime()-$i.$cs().getTime();var $3p=$K.addTime(-$1x);var $3A=$i.$fc($3p,y);if(!$3A){throw new DayPilot.Exception("No next cell found");};var x=DayPilot.indexOf($i.itline,$3A);if($3A.start>$K){}else{$3z-=$3A.end.getTime()-$3p.getTime();if($3z<=0){return $K.addTime($0Q);};x+=1;};for(var i=x;i<$i.itline.length;i++){var $P=$i.$eZ(i,y);if($P.business){var $0K=$i.itline[i];var $3B=$0K.start.addTime($1x);var $3C=$0K.end.addTime($1x);var $3D=$3C.getTime()-$3B.getTime();if($3z<=$3D){return $3B.addTime($3z);};$3z-=$3D;}};if(!$3B){$3B=$i.itline[$i.itline.length-1].end;};return $3B.addTime($3z);};this.$f6=function($K,end,y){var $x=$i.rowlist[y];var $1x=$x.data.start.getTime()-$i.$cs().getTime();var $P=$i.$cE($K);var $3p=$K.addTime(-$1x);var $3q=end.addTime(-$1x);var $3A=$i.$fc($3p,y);if(!$3A){throw new DayPilot.Exception("No next cell found");};var $0Q=0;var x=DayPilot.indexOf($i.itline,$3A);if($3A.start<=$3q){if(end<$3A.end.addTime($1x)){if($3A.start>$3p){return end.getTime()-$3A.start.addTime($1x).getTime();}else{return end.getTime()-$K.getTime();}};if($3p>$3A.start){$0Q+=$3A.end.getTime()-$3p.getTime();}else{$0Q+=$3A.end.getTime()-$3A.start.getTime();};x+=1;};for(var i=x;i<$i.itline.length;i++){var $P=$i.$eZ(i,y);if($P.business){var $0K=$i.itline[i];var $3B=$0K.start.addTime($1x);var $3C=$0K.end.addTime($1x);var $3D=$3C.getTime()-$3B.getTime();if(end<$3B){return $0Q;};if(end<$3C){$0Q+=end.getTime()-$3B.getTime();return $0Q;};$0Q+=$3D;}};var $3E=end.getTime()-$i.itline.last().end.addTime($1x).getTime();$0Q+=Math.min(0,$3E);return $0Q;};this.$f7=function(e){if(e.part.duration){if(isNaN(e.part.duration)){throw new DayPilot.Exception("Unable to get calculated duration");};return e.part.duration;};var y=e.part.dayIndex;return $i.$f6(e.start(),e.rawend(),y);};this.$fa=function($K,$0G){var $j=0;var $3z=$0G;var $P=$i.$cE($K);if(!$P.current){throw new DayPilot.Exception("Current cell not found.");};if($K.addTime(-$0G)>$P.current.start){return $0G;};$j+=$K.getTime()-$P.current.start.getTime();$3z-=$K.getTime()-$P.current.start.getTime();var x=DayPilot.indexOf($i.itline,$P.current);x-=1;var $3F=$P.current.start;while(x>=0){var $P=$i.itline[x];if($3F>$P.end){$j+=$3F.getTime()-$P.end.getTime();};$3F=$P.start;var $3D=$P.end.getTime()-$P.start.getTime();if($3z<=$3D){$j+=$3z;return $j;};$j+=$3D;$3z-=$3D;x-=1;};throw new DayPilot.Exception("Unable to backward calculate offset in visible timeline");};this.$f8=function($K,$0G,y){var $j=0;var $3z=$0G;var $P=$i.$cE($K);if(!$P.current){throw new DayPilot.Exception("Current cell not found.");};var x=DayPilot.indexOf($i.itline,$P.current);if($i.$eZ(x,y).business){if($K.addTime(-$0G)>=$P.current.start){return $0G;}}else{if($0G===0||$K.addTime(-$0G)>=$P.current.start){return $K.getTime()-$i.$fc($K,y).start.getTime();}};$j+=$K.getTime()-$P.current.start.getTime();$3z-=$K.getTime()-$P.current.start.getTime();x-=1;var $3F=$P.current.start;while(x>=0){var $P=$i.itline[x];if($3F>$P.end){$j+=$3F.getTime()-$P.end.getTime();};$3F=$P.start;var $3D=$P.end.getTime()-$P.start.getTime();if($i.$eZ(x,y).business){if($3z<=$3D){$j+=$3z;return $j;};$j+=$3D;$3z-=$3D;}else{$j+=$3D;};x-=1;};return $j+$3z;};this.$fc=function($0L,y){var $P=$i.$cE($0L);var i=0;if($P.past){return null;};if($P.current){i=$P.i;}else if($P.next){i=DayPilot.indexOf($i.itline,$P.next);}else{return null;};for(var x=i;x<$i.itline.length;x++){var $3G=$i.$fd(x,y);if($3G){return $i.itline[x];}};return null;};this.$fd=function(x,y){var $06=$i.$eZ(x,y);return $06.business;};this.$f5=function(){switch(this.scale){case "CellDuration":return this.cellDuration;case "Minute":return 1;case "Hour":return 60;case "Day":return 60*24;case "Week":return 60*24*7;case "Month":return 60*24*30;case "Year":return 60*24*365;case "Manual":if($i.itline.length>0){var $P=$i.itline[0];return($P.end.getTime()-$P.start.getTime())/(60*1000);}else{return $i.cellDuration;}};throw "can't guess cellDuration value";};this.$f4=function($0K){return $0K.end.ticks-$0K.start.ticks;};this.$ey=function(y){return this.treePreventParentUsage&&this.$fe(y);};this.$fe=function(y){var $x=this.rowlist[y];if($x.isParent){return true;};if(this.treeEnabled){if($x.children&&$x.children.length>0){return true;}};return false;};this.$ff={};this.$fg=function(){if(!$i.treeAutoExpand){return;};var $23=this.$ex(DayPilotScheduler.movingEvent);var y=$23.rowIndex;var $3H=this.$fe(y);var $3I=this.$ff;if($3I.timeout&&$3I.y!==y){clearTimeout($3I.timeout);$3I.timeout=null;};if($3H){$3I.y=y;var $3J=!$i.rowlist[$3I.y].expanded;if(!$3I.timeout&&$3J){$3I.timeout=setTimeout(function(){var $3J=!$i.rowlist[$3I.y].expanded;if($3J){$i.$fh($3I.y);$i.$fi();};$3I.timeout=null;},500);}}};this.$fj=function(){clearTimeout($i.$ff.timeout);};this.$fk=function(){var $3K=DayPilotScheduler.resizingShadow.width;var $3L=DayPilotScheduler.resizingShadow.left;var e=DayPilotScheduler.resizingEvent;var $3M=DayPilotScheduler.resizing.dpBorder;var $x=$i.rowlist[e.part.dayIndex];var $1x=0;$1x=$x.start.getTime()-$i.$cs().getTime();var $0p=null;var $13=null;var $3N=!$i.snapToGrid;if($3M==='left'){$0p=$i.getDate($3L,$3N).addTime($1x);$13=e.rawend();}else if($3M==='right'){$0p=e.start();$13=$i.getDate($3L+$3K,$3N,true).addTime($1x);};DayPilotScheduler.resizingShadow.start=$0p;DayPilotScheduler.resizingShadow.end=$13;$16.update();};this.exportAs=function($0w,$h){var $3O=$3P.generate($0w,$h);return new DayPilot.Export($3O);};this["export"]=this.exportAs;this.$fl={};var $3P=this.$fl;$3P.getWidth=function(){var $3Q=$3P.$fm;switch($3Q){case "viewport":return $i.nav.top.offsetWidth;case "full":return $i.$cb()+$3P.getRowHeaderWidth();case "range":return $i.getPixels($3P.getRangeEnd()).boxRight-$i.getPixels($3P.getRangeStart()).boxLeft+$3P.getRowHeaderWidth();default:throw "Unsupported export mode: "+$3Q;}};$3P.getHeight=function(){var $3Q=$3P.$fm;switch($3Q){case "viewport":return $i.nav.top.offsetHeight-DayPilot.sh($i.nav.scroll)-1;case "full":return $i.$fn()+$i.$cd()-DayPilot.sh($i.nav.scroll);case "range":var $1d=$3P.getRows();if($1d.length===0){return $i.$cd();}else{var $0M=$1d.first();var to=$1d.last();return to.top-$0M.top+to.height+$i.$cd();};default:throw "Unsupported export mode: "+$3Q;}};$3P.getRangeStart=function(){var $0M=$3P.$fo.dateFrom||$i.$cs();return new DayPilot.Date($0M);};$3P.getRangeEnd=function(){var to=$3P.$fo.dateTo||$i.$cx();return new DayPilot.Date(to);};$3P.getRangeResStart=function(){if(!$3P.$fo.resourceFrom){return $i.rowlist.find(function($x){return !$x.hidden});};return $i.$bZ($3P.$fo.resourceFrom);};$3P.getRangeResEnd=function(){if(!$3P.$fo.resourceTo){return $i.rowlist.last();};return $i.$bZ($3P.$fo.resourceTo);};$3P.getRowHeaderWidth=function(){return $i.$ce();};$3P.getTimeHeaderHeight=function(){return $i.$cd();};$3P.getCanvas=function(){return $3P.canvas();};$3P.getRectangles=function(){var $3R=$3P.getRowHeaderWidth();var $3S=$3P.getTimeHeaderHeight();var $3T={};$3T.main={"x":0,"y":0,"w":$3P.getWidth(),"h":$3P.getHeight()};$3T.corner={"x":0,"y":0,"w":$3R,"h":$3S};$3T.grid={"x":$3R,"y":$3S,"w":$3P.getWidth()-$3R,"h":$3P.getHeight()-$3S};var $A=$3T.grid.w;var $3U=$i.itline.last();if($3U&&($3U.left+$3U.width)<$3T.grid.w){$A=$3U.left+$3U.width;};var $R=$3T.grid.h;var $3V=$i.rowlist.last();if($3V&&($3V.top+$3V.height)<$3T.grid.h){$R=$3V.top+$3V.height;};$3T.gridContent={"x":$3R,"y":$3S,"w":$A,"h":$R};return $3T;};$3P.getRows=function(){var $3Q=$3P.$fm;var $j=DayPilot.list();var top,$W,$3W,$3X;switch($3Q){case "viewport":top=$i.$fp;$W=top+$i.nav.scroll.offsetHeight;$3W=$i.$em(top).i;$3X=$i.$em($W).i;break;case "full":top=0;$3W=0;$3X=$i.rowlist.length;break;case "range":var $0M=$3P.getRangeResStart();var to=$3P.getRangeResEnd();if(!$0M){throw "Resource specified using resourceFrom option not found during export.";};if(!to){throw "Resource specified using resourceTo option not found during export.";};$3W=$0M.index;$3X=to.index;break;};if($3X<$i.rowlist.length){$3X+=1;};for(var y=$3W;y<$3X;y++){var $x=$i.rowlist[y];if($x.hidden){continue;};$j.push($x);};$j.offset=$3W;return $j;};$3P.getEvents=function(){var $3Q=$3P.$fm;switch($3Q){case "full":var $3Y=DayPilot.list();DayPilot.list($i.rowlist).each(function($x){if($x.hidden){return;};DayPilot.list($x.events).each(function(e){$3Y.push(e);});});return $3Y;case "viewport":return $Q.events().map(function($02){return $02.event;});case "range":var $3Y=DayPilot.list();var $K=$3P.getRangeStart();var end=$3P.getRangeEnd();$3P.getRows().each(function($x){DayPilot.list($x.events).filter(function($00){return DayPilot.Util.overlaps($00.start(),$00.end(),$K,end)}).each(function(e){$3Y.push(e);});});return $3Y;default:throw "Unsupported export mode: "+$3Q;}};$3P.getTimeline=function(){var $3Q=$3P.$fm;switch($3Q){case "full":return DayPilot.list($i.itline).addProps({"offset":0});case "viewport":return $3P.getViewportTimeline();case "range":return $3P.getRangeTimeline();default:throw "Unsupported export mode: "+$3Q;}};$3P.getRangeTimeline=function(){var $j=DayPilot.list();if($i.itline&&$i.itline.length>0){var $K=$i.$cE($3P.getRangeStart()).i;var end=$i.$cE($3P.getRangeEnd()).i;var $3Z=$i.$fq();end=Math.min(end,$3Z-1);$K=Math.max($K,0);for(var x=$K;x<=end;x++){var $P=$i.itline[x];$j.push($P);};$j.offset=$K;};return $j;};$3P.getViewportTimeline=function(){var $j=DayPilot.list();if($i.itline&&$i.itline.length>0){var $N=$i.$fr;var $O=$N+$i.$fs;var $K=$i.$cC($N).x;var end=$i.$cC($O,true).x;var $3Z=$i.$fq();end=Math.min(end,$3Z);$K=Math.max($K,0);for(var x=$K;x<=end;x++){var $P=$i.itline[x];$j.push($P);};$j.offset=$K;};return $j;};$3P.getTimeHeader=function(y){var $3Q=$3P.$fm;if($3Q==="full"){return DayPilot.list($i.timeHeader[y]);}else{var $j=DayPilot.list();var $40,$41;$40=$3P.getViewportOffsetStart();$41=$40+$3P.getViewportOffsetWidth();var $42=$i.$ft(y,$40);var $43=$i.$ft(y,$41);if(!$43){$43={"x":$i.timeHeader[y].length-1};};for(var x=$42.x;x<=$43.x;x++){var $P=$i.timeHeader[y][x];$j.push($P);};return $j;}};$3P.fakeDurationBar=function(){var $02=document.createElement("div");$02.style.display="none";$02.className=$i.$c8($07.event);var $44=document.createElement("div");$44.className=$i.$c8($07.eventBar);var $05=document.createElement("div");$05.className=$i.$c8($07.eventBarInner);document.body.appendChild($02);$44.appendChild($05);$02.appendChild($44);return $02;};$3P.fakeCell=function(){var $02=document.createElement("div");$02.style.display="none";$02.className=$i.$c8("_cell");$02.style.position="absolute";$02.style.top="-2000px";$02.style.left="-2000px";var $05=document.createElement("div");$05.className=$i.$c8("_cell_inner");$02.appendChild($05);$i.divCells.appendChild($02);return $02;};$3P.fakeRowHeader=function(){var $02=document.createElement("div");$02.style.display="none";$02.className=$i.$c8("_rowheader");$02.style.position="absolute";$02.style.top="-2000px";$02.style.left="-2000px";var $05=document.createElement("div");$05.className=$i.$c8("_rowheader_inner");$02.appendChild($05);$i.divResScroll.appendChild($02);return $02;};$3P.fakeExpand=function(){var $02=document.createElement("div");$02.style.display="none";$02.className=$i.$c8('_tree_image_expand');document.body.appendChild($02);return $02;};$3P.extractUrl=function($45){var $46=/url\((")?([^"].*[^"])\1\)/.exec($45);if(!$46){return null;};return $46[2];};$3P.getImages=function(){var $j={};var $1T=$3P.fakeExpand();$j.expand=$3P.extractUrl(new DayPilot.StyleReader($1T).get("background-image"));$1T.className=$i.$c8("_tree_image_collapse");$j.collapse=$3P.extractUrl(new DayPilot.StyleReader($1T).get("background-image"));$1T.className=$i.$c8("_tree_image_no_children");$j.nochildren=$3P.extractUrl(new DayPilot.StyleReader($1T).get("background-image"));DayPilot.de($1T);return $j;};$3P.getFont=function(element){return new DayPilot.StyleReader(element).getFont();};$3P.getViewportOffsetStart=function(){var $3Q=$3P.$fm;switch($3Q){case "full":return 0;case "viewport":return $i.nav.scroll.scrollLeft;case "range":return $i.getPixels($3P.getRangeStart()).boxLeft;}};$3P.getViewportOffsetTop=function(){var $3Q=$3P.$fm;switch($3Q){case "full":return 0;case "viewport":return $i.nav.scroll.scrollTop;case "range":return $3P.getRangeResStart().top;}};$3P.getViewportOffsetWidth=function(){var $3Q=$3P.$fm;switch($3Q){case "full":return $i.$cb();case "viewport":return $i.nav.scroll.offsetWidth;case "range":return $i.getPixels($3P.getRangeEnd()).boxRight-$3P.getViewportOffsetStart();}};$3P.excelBoard=function(){var $47=new DayPilot.Excel();var $48=$47.worksheets.create("Scheduler");var $49=new DayPilot.StyleReader($i.nav.corner).get("background-color");var $4a=new DayPilot.StyleReader($i.nav.top).get("border-top-color");var $4b=DayPilot.list($i.elements.events).map(function($00){return $00.firstChild;}).last();var $4c=new DayPilot.StyleReader($4b).get("border-right-color");$47.styles.getDefault().setBackColor("#ffaaaa");var $4d=$47.styles.create();$4d.setHorizontalAlignment("Center");$4d.setBackColor($49);$4d.setBorderColor($4a);var $4e=$47.styles.create();$4e.setVerticalAlignment("Top");$4e.setBackColor($49);$4e.setBorderColor($4a);var $4f=$47.styles.create();$4f.setVerticalAlignment("Top");$4f.setBackColor("#ff0000");$4f.setBorderColor($4c);$48.enableGridlines(false);$48.cell(0,0).setRowspan($i.timeHeader.length).setStyle($4d);$48.cell(10,10).setText("hi there");DayPilot.list($i.timeHeader).each(function($00,y){var $0G={"x":1,"y":0};$3P.getTimeHeader(y,"full").each(function($P,x){var $4g=$P.colspan;$48.cell(x+$0G.x,y+$0G.y).setText($P.innerHTML).setColspan($4g).setStyle($4d);});});DayPilot.list($i.rowlist).each(function($x,y){var $0G={"x":0,"y":1};var $1Y="";for(var i=0;i<$x.level;i++){$1Y+="  ";};$48.cell($0G.x,y+$0G.y).setText($1Y+$x.html).setRowspan($x.lines.length).setStyle($4e);});var $0G={"x":0,"y":$i.timeHeader.length};var $4h=$0G.y;DayPilot.list($i.rowlist).each(function($x,y){DayPilot.list($x.lines).each(function($0x,i){var $4i=$0G.x;DayPilot.list($0x).each(function(e){var $K=$i.$cE(e.start()).i;var end=$i.$cE(e.end()).i;var $4g=1+end -$K;$48.cell($K+$4i,y+$4h).setText(e.client.html()).setColspan($4g).setStyle($4f);$4i+=$4g-1;});});$4h+=$x.lines.length-1;});return $47;};$3P.$fo=null;$3P.$fm=null;$3P.generate=function($0w,$h){if(typeof $0w==="object"){$h=$0w;$0w=null;};var $h=$h||{};var $0w=$0w||$h.format||"svg";var $4j=$h.scale||1;if($0w==="xls"){return $3P.excelBoard();};if($0w.toLowerCase()==="jpg"){$0w="jpeg";};var $3Q=$h.area||"viewport";$3P.$fo=$h;$3P.$fm=$3Q;$3P.getRows().each(function($x){$i.$fu($x);});var $A=$3P.getWidth();var $R=$3P.getHeight();var $3O;switch($0w.toLowerCase()){case "svg":$3O=new DayPilot.Svg($A,$R);break;case "png":$3O=new DayPilot.Canvas($A,$R,"image/png",$4j);break;case "jpeg":$3O=new DayPilot.Canvas($A,$R,"image/jpeg",$4j,$h.quality);break;default:throw "Export format not supported: "+$0w;};var $3T=$3P.getRectangles();var $4k=$3P.getImages();var $4l=new DayPilot.StyleReader($i.nav.top).get("background-color");var $49=new DayPilot.StyleReader($i.nav.corner).get("background-color");var $4a=new DayPilot.StyleReader($i.nav.top).get("border-top-color");var $4m=new DayPilot.StyleReader($i.nav.divider).get("background-color");var $4b=DayPilot.list($i.elements.events).map(function($00){return $00.firstChild;}).last();var $4c=new DayPilot.StyleReader($4b).get("border-right-color");var $4n=$3P.getFont($4b);var $4o=new DayPilot.StyleReader($4b).get("color");var $4p=new DayPilot.StyleReader($4b).get("background-color");$4p=DayPilot.Util.isTransparentColor($4p)?"white":$4p;var $44=$3P.fakeDurationBar();var $4q=new DayPilot.StyleReader($44.firstChild).get("background-color");var $4r=new DayPilot.StyleReader($44.firstChild.firstChild).get("background-color");DayPilot.de($44);var $P=$3P.fakeCell();var $4s=new DayPilot.StyleReader($P).get("background-color");DayPilot.Util.addClass($P,$i.$c8("_cell_business"));var $4t=new DayPilot.StyleReader($P).get("background-color");var $4u=$3P.getFont($P);var $4v=new DayPilot.StyleReader($P).get("color");DayPilot.de($P);var $4w=DayPilot.Util.firstPropValue($i.$bg.linesVertical);var $4x=new DayPilot.StyleReader($4w).get("background-color");var $4y=$i.$bg.timeHeader["0_0"];var $4z=$3P.getFont($4y);var $4A=new DayPilot.StyleReader($4y).get("color");var $4B=new DayPilot.StyleReader($4y).get("background-color");var $4C=$3P.fakeRowHeader();var $4D=$3P.getFont($4C);var $4E=new DayPilot.StyleReader($4C).get("color");var $4F=new DayPilot.StyleReader($4C).get("background-color");DayPilot.de($4C);if($i.rowHeaderColumns&&$i.$eu&&$i.$eu.blocks[0]){var $4G=$i.$eu.blocks[0].section.firstChild;var $4H=new DayPilot.StyleReader($4G).getFont();var $4I=new DayPilot.StyleReader($4G).get("color");};var $40=$3P.getViewportOffsetStart();var $4J=$3P.getViewportOffsetTop();$3O.fillRect($3T.main,"white");$3O.fillRect($3T.main,$4l);$3O.fillRect($3T.corner,$49);var $4K=$3T.corner.x;DayPilot.list($i.rowHeaderColumns).each(function($4L,i){var $A=$i.rowHeaderCols[i];var $4M={};$4M.x=$4K;$4M.w=$A+1;$4M.y=$3T.corner.h-$i.$eu.height;$4M.h=$i.$eu.height+1;var $4N=3;var $4O=DayPilot.Util.copyProps($4M);$4O.x+=$4N;$4O.w-=$4N;var $4P=$4L.name||$4L.title||"";$3O.text($4O,$4P,$4H,$4I);$3O.rect($4M,$4a);$4K+=$A;});var $4Q=typeof $i.onBeforeTimeHeaderExport==="function";DayPilot.list($i.timeHeader).each(function($00,y){$3P.getTimeHeader(y,$3Q).each(function($P){var $N=$3T.grid.x+$P.left-$40;var $A=$P.width;var $4R=$4S.timeHeader(y);var top=$4R.top;var $R=$4R.height;var $4P=$P.innerHTML;var $4l=$P.backColor;if($4Q){var $l={};$l.header={};$l.header.start=$P.start;$l.header.end=$P.end;$l.header.level=y;$l.header.text=$P.text;$l.header.html=$P.innerHTML;$l.text=$P.innerHTML;$l.backColor=$P.backColor;$i.onBeforeTimeHeaderExport($l);$4P=$l.text;$4l=$l.backColor;};var $4T=Math.max(0,$3T.grid.x-$N);$N+=$4T;$A-=$4T;var $4T=Math.max(0,$N+$A-($3T.grid.x+$3T.grid.w));$A-=$4T;var $4U={"x":$N,"y":top,"w":$A+1,"h":$R+1};$4l=$4l||$4B;$3O.fillRect($4U,$4l);$3O.rect($4U,$4a);$3O.text($4U,$4P,$4z,$4A,"center");});});$3P.getTimeline().each(function($P){var $N=$3T.grid.x+$P.left-$40;var $4T=Math.max(0,$3T.grid.x-$N);$N+=$4T;if($N===$3T.grid.x){return;};$3O.line($N,$3T.grid.y+1,$N,$3T.grid.y+$3T.grid.h-2,$4x);});var $4V=typeof $i.onBeforeCellExport==="function";$3P.getRows().each(function($x,y,$1d){var y=$x.index;$3P.getTimeline().each(function($P,x,$4W){var x=$4W.offset+x;var $06=$i.$eZ(x,y);var $4X=$06.business;var $l=$i.$fv(x,y);var $4P=$06.html;var $4Y=$06.horizontalAlignment||"left";var $4l=$06.backColor||($4X?$4t:$4s);if($4V){if(!$l){$l={};$l.cell=$i.cells.findXy(x,y)[0];};$l.text=$4P;$l.horizontalAlignment=$4Y;$l.backColor=$4l;$i.onBeforeCellExport($l);$4P=$l.text;$4Y=$l.horizontalAlignment;$4l=$l.backColor;};var top=$3T.grid.y+$x.top-$4J;var $4Z=Math.max(0,$3T.grid.y-top);top+=$4Z;var $N=$3T.grid.x+$P.left-$40;var $4T=Math.max(0,$3T.grid.x-$N);$N+=$4T;var $4M={"x":$N,"y":top,"w":$P.width,"h":$x.height};$3O.fillRect($4M,$4l);var $50={};$50.x=$4M.x+1;$50.y=$4M.y+1;$50.w=$4M.w-2;$50.h=$4M.h-2;if($4P){$3O.text($50,$4P,$4u,$4v,$4Y);}});});$3P.getRows().each(function($x){var top=$3T.grid.y+$x.top-$4J;var $4Z=Math.max(0,$3T.grid.y-top);top+=$4Z;if(top===$3T.grid.y){return;};$3O.line($3T.gridContent.x+1,top,$3T.gridContent.x+$3T.gridContent.w-1,top,$4x);});var $51=typeof $i.onBeforeRowHeaderRender==="function";var $52=typeof $i.onBeforeRowHeaderExport==="function";$3P.getRows().each(function($x){var top=$3T.grid.y+$x.top-$4J;var $4Z=Math.max(0,$3T.grid.y-top);top+=$4Z;var $53=$i.treeEnabled&&!$x.isNewRow;var $54=10;var $N=$53?$x.level*$i.treeIndent+$i.treeImageMarginLeft:3;var $4M={"x":0,"y":top,"w":$3T.grid.x+1,"h":$x.height+1};var $06=$x;if($51){var $55=$i.$fw($x);$06=$55.row;};var $l={};$l.text=$06.html;$l.backColor=$06.backColor||$4F;$l.fontSize=$4D.size;$l.fontFamily=$4D.family;$l.fontStyle=$4D.style;$l.fontColor=$06.fontColor||$4E;$l.borderColor=$4a;$l.horizontalAlignment="left";$l.row=$i.$dV($x);$l.row.columns=[];$06.columns.forEach(function(c){var $56=DayPilot.Util.copyProps(c,{},["html","backColor","horizontalAlignment"]);$56.text=c.html;$56.fontSize=$l.fontSize;$56.fontFamily=$l.fontFamily;$56.fontStyle=$l.fontStyle;$56.fontColor=$l.fontColor;$56.horizontalAlignment=$56.horizontalAlignment||$l.horizontalAlignment;$56.backColor=$56.backColor||$l.backColor;$l.row.columns.push($56);});if($x.isNewRow){$l.text=$i.rowCreateHtml;};if($52){$i.onBeforeRowHeaderExport($l);};var $57={"x":$N,"y":top+$i.treeImageMarginTop,"w":10,"h":10};var $58=$53?$N+$54+3:$N;var $59=$53?$4M.w-$58:$4M.w;var $4O={"x":$58,"y":top,"w":$59,"h":$x.height+1};if($i.rowHeaderCols){$4O.w=$i.rowHeaderCols[0]-$58;};$3O.fillRect($4M,$l.backColor);$3O.text($4O,$l.text,{"size":$l.fontSize,"family":$l.fontFamily,"style":$l.fontStyle},$l.fontColor,$l.horizontalAlignment);$3O.rect($4M,$l.borderColor);if($53){var $5a=null;if(DayPilot.list($x.children).isEmpty()){$5a=$4k.nochildren;}else if($x.expanded){$5a=$4k.collapse;}else{$5a=$4k.expand;};$3O.image($57,$5a);};if($i.rowHeaderCols){var $N=$4M.x;DayPilot.list($i.rowHeaderCols).each(function(w,i){var $5b=(i===0);if(!$5b){var $4L=$l.row.columns[i-1]||{};var $4U=DayPilot.Util.copyProps($4M);$4U.x=$N;$4U.w=w+1;var $4N=3;var $5c=DayPilot.Util.copyProps($4U);$5c.x+=$4N;$5c.w-=$4N;var $4l=$4L.backColor||$l.backColor;$3O.fillRect($4U,$4l);if($4L.text){$3O.text($5c,$4L.text,{"size":$4L.fontSize,"family":$4L.fontFamily,"style":$4L.fontStyle},$4L.fontColor,$4L.horizontalAlignment);};$3O.rect($4U,$l.borderColor);};$N+=w;});}});$3P.getEvents().each(function(e){var $5d=$i.rowlist[e.part.dayIndex].top;var $A=e.part.width;var $5e=e.part.barWidth;var $5f=e.client&&e.client.barVisible&&e.client.barVisible();var top=$3T.grid.y+$5d+e.part.top-$4J;var $4Z=Math.max(0,$3T.grid.y-top);top+=$4Z;var $N=$3T.grid.x+e.part.left-$40;var $4T=Math.max(0,$3T.grid.x-$N);$N+=$4T;$A-=$4T;$5e-=$4T;var $0A=e.cache||e.data;var $5g=$0A.barColor||$4r;var $5h=$0A.barBackColor||$4q;var $4l=$0A.backColor||$4p;var $5i=$0A.fontColor||$4o;var $5j=5;var $5k=2;var $5l=2;var $l={};$l.e=e;$l.text=e.text?e.text():e.client.html();$l.fontSize=$4n.size;$l.fontFamily=$4n.family;$l.fontStyle=$4n.style;$l.fontColor=$5i;$l.backColor=$4l;$l.borderColor=$4c;$l.horizontalAlignment="left";$l.barHeight=$5j;$l.textPadding=$5l;if(typeof $i.onBeforeEventExport==="function"){$i.onBeforeEventExport($l);};var $4M={"x":$N,"y":top,"w":$A,"h":e.part.height};var $5m={"x":$N,"y":top,"w":$A,"h":$l.barHeight};var $5n={"x":$N+e.part.barLeft,"y":top,"w":$5e,"h":$l.barHeight};var $5o={"x":$N+$5k,"y":top+$l.barHeight,"w":$A-$5k,"h":e.part.height-$l.barHeight};$3O.fillRect($4M,$l.backColor);$3O.text($4M,$l.text,{"size":$l.fontSize,"family":$l.fontFamily,"style":$l.fontStyle},$l.fontColor,$l.horizontalAlignment,$l.textPadding);$3O.rect($4M,$l.borderColor);if($5f){$3O.fillRect($5m,$5h);if($5e>0){$3O.fillRect($5n,$5g);}};DayPilot.list($0A.areas).each(function($J){var $5p=$J.visibility||$J.v;if($5p==="Hover"){return;};var $5q=$J.left;if($J.start){$5q=$i.getPixels(new DayPilot.Date($J.start)).left-e.part.left;};var $A=$J.width||$J.w;if($J.right){$A=(e.part.width-$J.right)-$5q;}else if($J.end){$A=$i.getPixels(new DayPilot.Date($J.end)).left-$J.left-e.part.left+1;};var $5r=$J.top;var $R=$J.height||$J.h;if(typeof $J.bottom==="number"){$R=(e.part.height-$J.bottom)-$5r;};var $4M={"x":$N+$5q,"y":top+$5r,"w":$A,"h":$R};if($J.backColor){$3O.fillRect($4M,$J.backColor);};if($J.image){var $3P=new Image();$3P.src=$J.image;$3O.image($4M,$3P);}else if($J.html){$3O.text($4M,$J.html,{"size":$J.fontSize||$l.fontSize,"family":$J.fontFamily||$l.fontFamily,"style":$J.fontStyle||$l.fontStyle},$J.fontColor||$l.fontColor,null,$J.padding);}});});$3O.rect($3T.main,$4a);$3O.line($3T.grid.x,0,$3T.grid.x,$3T.main.h,$4m);$3O.line(0,$3T.grid.y,$3T.main.w,$3T.grid.y,$4m);return $3O;};this.$fx={};var $5s=this.$fx;$5s.findJointDivs=function(e){var id=e.data.join;if(!id){return DayPilot.list();};var $2D=DayPilot.list($i.elements.events).filter(function($00){return $00.event.data.join===id&&$00.event!==e;});return $2D;};this.$fy={};var $16=this.$fy;$16.divs=[];$16.list=[];$16.forbidden=false;$16.additional=function(){var $Y=DayPilot.list();var $5t=$i.multiselect.isSelected(DayPilotScheduler.resizing.event);var $5u=$i.allowMultiResize;var $Y=DayPilot.list();if($5t&&$5u){$Y=DayPilot.list($i.multiselect.$d7).filter(function($00){return $00!==DayPilotScheduler.resizing;});};if($i.jointEventsResize){var j=$5s.findJointDivs(DayPilotScheduler.resizingEvent);$Y=$Y.concat(j);};return $Y;};$16.update=function(){$16.clear();$16.draw();};$16.clear=function(){DayPilot.de($16.divs);$16.divs=[];};$16.draw=function(){if(!DayPilotScheduler.resizing){return;};var e=DayPilotScheduler.resizingEvent;var $26=DayPilotScheduler.resizingShadow;var $5v=$26.start.getTime()-e.start().getTime();var $5w=$26.end.getTime()-e.end().getTime();var $5x=0;$16.list=[];$16.forbidden=false;$16.invalid=false;$16.rowoffset=$5x;$16.additional().each(function($00){if(!$00.event){return;};var event=$00.event;var $x=$i.rowlist[event.part.dayIndex+$5x];if(!$x){$16.invalid=true;return;};var top=event.part.top+$x.top;var $R=event.part.height;if($5x){top=$x.top;$R=$x.height;};var $3p=event.start().addTime($5v);var $3q=event.end().addTime($5w);var $17={};$17.event=event;$17.start=$3p;$17.end=$3q;$17.overlapping=false;$16.list.push($17);var $3v=$i.getPixels($3p);var $3w=$i.getPixels($3q);var $0Q=DayPilot.DateUtil.diff(event.rawend(),event.start());$0Q=Math.max($0Q,1);var $37=$0d.useBox($0Q);var $N=($37)?$3v.boxLeft:$3v.left;var $A=($37)?($3w.boxRight-$N):($3w.left-$N);var $02=document.createElement("div");$02.style.position="absolute";$02.style.left=$N+"px";$02.style.top=top+"px";$02.style.height=$R+"px";$02.style.width=$A+"px";$02.style.zIndex=101;$02.style.overflow="hidden";$02.className=$i.$c8("_shadow");$02.info=$17;var $05=document.createElement("div");$05.className=$i.$c8("_shadow_inner");$02.appendChild($05);$i.$bW.appendChild($02);$16.divs.push($02);});if($16.invalid){var $5y=$i.$c8("_shadow_overlap");DayPilot.list($16.divs).each(function($00){DayPilot.Util.addClass($00,$5y);});return;};DayPilot.list($16.divs).each(function($00){if(!$00.info){return;};var $02=$00;var $17=$00.info;var event=$00.info.event;var $x=$i.rowlist[event.part.dayIndex+$5x];var $3v=$i.getPixels($17.start);var $3w=$i.getPixels($17.end);var $N=$3v.left;var $A=$3w.left-$N;var $5z=DayPilot.list($16.list).map(function($00){return $00.event.data;}).add(DayPilotScheduler.resizing.event.data);$i.$fz($02,$x,$N,$A,$5z);$i.$fA($02,$17.start,$17.end,$17.resource);if($02.overlapping){$17.overlapping=true;$16.forbidden=true;}});};this.$fB={};var $5A=this.$fB;$5A.modifiedProps=function(){var $5B=new DayPilot.Scheduler();var $5C=DayPilot.Util.members($i,2);var $j=[];$j.push("<div id='dp'></div>");$j.push("<script>");$j.push("var dp = new DayPilot.Scheduler('dp');");$5C.properties.each(function($00){var name=$00.name;var $5D=name.split(".");var $5E=$5D.length>1;var $5F,$5G;if($5E){var $5H=$5D[0];var $5I=$5D[1];$5F=JSON.stringify($5B[$5H][$5I]);$5G=JSON.stringify($i[$5H][$5I]);}else{$5F=JSON.stringify($5B[name]);$5G=JSON.stringify($i[name]);};if($5F!==$5G){$j.push("dp."+name+" = "+$5G+";");}});$5C.events.each(function($00){var name=$00.name;if(typeof $i[name]==="function"){$j.push("dp."+name+" = "+$i[name].toString()+";");}});$j.push("dp.init();");$j.push("</script>");return $j.join("\n");};this.$fC={};var mm=this.$fC;mm.divs=[];mm.list=[];mm.forbidden=false;mm.verticalAll=function(){return $i.multiMoveVerticalMode==="All";};mm.additional=function(){var $Y=DayPilot.list();var $5t=$i.multiselect.isSelected(DayPilotScheduler.movingEvent);var $5u=$i.allowMultiMove;var $Y=DayPilot.list();if($5t&&$5u){$Y=DayPilot.list($i.multiselect.$d7).filter(function($00){return $00!==DayPilotScheduler.moving&&$00!==$0R.moving;});};if($i.jointEventsMove){var j=$5s.findJointDivs(DayPilotScheduler.movingEvent);$Y=$Y.concat(j);};return $Y;};mm.update=function(){mm.clear();mm.draw();};mm.draw=function(){if(!DayPilotScheduler.moving){return;};var e=DayPilotScheduler.movingEvent;var $K=DayPilotScheduler.movingShadow.start;var $0G=$K.getTime()-e.start().getTime();var $5J=e.part.dayIndex;var $5K=DayPilot.indexOf($i.rowlist,DayPilotScheduler.movingShadow.row);var $5x=$5K-$5J;if(!mm.verticalAll()){$5x=0;};mm.list=[];mm.forbidden=false;mm.invalid=false;mm.rowoffset=$5x;mm.additional().each(function($00){if(!$00.event){return;};var event=$00.event;var $x=$i.rowlist[event.part.dayIndex+$5x];if(!$x){mm.invalid=true;return;};var top=event.part.top+$x.top;var $R=event.part.height;if($5x){top=$x.top;$R=$x.height;};var $3p=event.start().addTime($0G);var $3q=event.end().addTime($0G);var $17={};$17.event=event;$17.start=$3p;$17.end=$3q;$17.resource=$x.id;$17.overlapping=false;mm.list.push($17);var $3v=$i.getPixels($3p);var $3w=$i.getPixels($3q);var $0Q=DayPilot.DateUtil.diff(event.rawend(),event.start());$0Q=Math.max($0Q,1);var $37=$0d.useBox($0Q);var $N=($37)?$3v.boxLeft:$3v.left;var $A=($37)?($3w.boxRight-$N):($3w.left-$N);var $02=document.createElement("div");$02.style.position="absolute";$02.style.left=$N+"px";$02.style.top=top+"px";$02.style.height=$R+"px";$02.style.width=$A+"px";$02.style.zIndex=101;$02.style.overflow="hidden";$02.className=$i.$c8("_shadow");$02.info=$17;var $05=document.createElement("div");$05.className=$i.$c8("_shadow_inner");$02.appendChild($05);$i.$bW.appendChild($02);mm.divs.push($02);});if(mm.invalid){var $5y=$i.$c8("_shadow_overlap");DayPilot.list(mm.divs).each(function($00){DayPilot.Util.addClass($00,$5y);});return;};DayPilot.list(mm.divs).each(function($00){if(!$00.info){return;};var $02=$00;var $17=$00.info;var event=$00.info.event;var $x=$i.rowlist[event.part.dayIndex+$5x];var $3v=$i.getPixels($17.start);var $3w=$i.getPixels($17.end);var $N=$3v.left;var $A=$3w.left-$N;var $5z=DayPilot.list(mm.list).map(function($00){return $00.event.data;}).add(DayPilotScheduler.movingEvent.data);$i.$fz($02,$x,$N,$A,$5z);$i.$fA($02,$17.start,$17.end,$17.resource);if($02.overlapping){$17.overlapping=true;mm.forbidden=true;}});};mm.clear=function(){DayPilot.de(mm.divs);mm.divs=[];};this.$fD=function(){var $23=$i.coords;var $3M=DayPilotScheduler.resizing.dpBorder;var e=DayPilotScheduler.resizing.event;var $5L=e.part.left;if($3M=="right"){$5L+=e.part.width;};var $5M=DayPilotScheduler.resizing.event.calendar.cellWidth;var $5N=DayPilotScheduler.resizing.event.part.width;var $5O=DayPilotScheduler.resizing.event.part.left;var $5P=0;var $5Q=($23.x-$5L);var $5R,$5S;if($3M==='right'){$5R=$5O;if($i.snapToGrid){var $0K=$i.$cC($5N+$5O+$5Q).cell;var $5T=$0K.left+$0K.width;$5S=$5T-$5O;if($5S<$5M){$5S=$5M;}}else{$5S=$5N+$5Q;};var $z=$i.$cb();if($5O+$5S>$z){$5S=$z-$5O;};DayPilotScheduler.resizingShadow.left=$5O;DayPilotScheduler.resizingShadow.width=$5S;}else if($3M==='left'){if($i.snapToGrid){if($5Q>=$5N){$5Q=$5N;};$5R=Math.floor((($5O+$5Q)+0)/$5M)*$5M;if($5R<$5P){$5R=$5P;}}else{$5R=$5O+$5Q;};$5S=$5N-($5R-$5O);var $O=$5O+$5N;var $5U=$5M;if(!$i.snapToGrid){$5U=1;}else if($i.useEventBoxes==="Never"){if($5N<$5M){$5U=$5N;}else{$5U=1;}};if($5S<$5U){$5S=$5U;$5R=$O-$5S;};DayPilotScheduler.resizingShadow.left=$5R;DayPilotScheduler.resizingShadow.width=$5S;}else{throw "Invalid dpBorder.";};(function checkOverlap(){DayPilotScheduler.resizingShadow.overlapping=false;var ev=DayPilotScheduler.resizing.event;var $x=$i.rowlist[ev.part.dayIndex];var $N=$5R;var $A=$5S;$i.$fz(DayPilotScheduler.resizingShadow,$x,$N,$A,ev.data);var $26=DayPilotScheduler.resizingShadow;var $w={"start":$26.start,"end":$i.$cY($26.end)};$i.$fA(DayPilotScheduler.resizingShadow,$w.start,$w.end,$x.id);})();$i.$fE();};this.$fi=function(){var scroll=this.nav.scroll;if(!$i.coords){return;};if(!DayPilotScheduler.movingEvent){return;};$i.$cg();var $26=DayPilotScheduler.movingShadow;var $23=this.$ex(DayPilotScheduler.movingEvent);if($i.$ey($23.rowIndex)){return;};var ev=DayPilotScheduler.movingEvent;var $5V=0;var $5W=0;(function calculatePosition(){if($i.$b8){var y=$23.relativeY;var $5X=$i.$cC($23.left).x;var $x=$23.row;var $56=$x.evColumns[$5X];var e=$56.events.find(function(e){return y<e.part.top+e.part.height+$i.eventMarginBottom;});if(!e){e=$56.events.last();};if(e){$5W=e.part.top;$5V=DayPilot.indexOf($56.events,e);if((y-e.part.top)>e.part.height/2){$5W=e.part.top+e.part.height+$i.eventMarginBottom/2;$5V+=1;}}}else{var y=$23.relativeY;var $x=$23.row;var top=0;var lh=$i.$dp.eventHeight();var $z=$x.lines.length;for(var i=0;i<$x.lines.length;i++){var $0x=$x.lines[i];if($0x.isFree($23.left,$i.cellWidth)){$z=i;break;}};var $G=Math.floor((y-top+lh/ 2)/ lh);var $G=Math.min($z,$G);var $G=Math.max(0,$G);$5V=$G;$5W=$i.rowMarginTop+$5V*($i.$dp.eventHeight()+$i.eventMarginBottom)+$i.eventMarginBottom/2;}})();if($5W>0){$5W-=3;};var $24=(ev.cache&&typeof ev.cache.moveVDisabled!=='undefined')?!ev.cache.moveVDisabled:!ev.data.moveVDisabled;var $25=(ev.cache&&typeof ev.cache.moveHDisabled!=='undefined')?!ev.cache.moveHDisabled:!ev.data.moveHDisabled;var $5Y=!mm.additional().isEmpty();if($5Y&&$i.multiMoveVerticalMode==="Disabled"){$24=false;};if($24){if(!this.$ey($23.rowIndex)){$26.row=$23.row;$26.style.height=Math.max($23.row.height,0)+'px';$26.style.top=($23.top)+'px';if($i.eventMoveToPosition){$26.style.top=($23.top+$5W)+"px";$26.style.height="3px";$26.line=$5V;}}else{var $1y=$26.row;var $5Z=1;if($1y){$5Z=$23.rowIndex<$1y.index?1:-1;}else{return;};for(var i=$23.rowIndex;i!==$1y.index;i+=$5Z){var $x=this.rowlist[i];if(!this.$ey(i)&&!$x.hidden){$26.style.top=($x.top)+'px';$26.style.height=Math.max($x.height,0)+'px';$26.row=$x;if($i.eventMoveToPosition){$5V=$5Z>0?0:$x.lines.length-1;$26.style.top=($23.top+$5W)+"px";$26.style.height="3px";$26.line=$5V;};break;}}}}else{var $1y=$i.rowlist[ev.part.dayIndex];var $z=$1y.lines.length;for(var i=0;i<$1y.lines.length;i++){var $0x=$1y.lines[i];if($0x.isFree($23.left,$i.cellWidth)){$z=i;break;}};if(!$5Y){$26.style.height=Math.max($1y.height,0)+'px';$26.style.top=($1y.top)+'px';};$26.row=$1y;if($i.eventMoveToPosition&&!$5Y){if($23.row===$1y){$26.style.top=($1y.top+$5W)+"px";$26.style.height="3px";$26.line=$5V;}else{var $G=($23.rowIndex>$1y.index&&$z>0)?$z*$i.$dp.eventHeight()-3:0;$26.style.top=($1y.top+$G)+"px";$26.style.height="3px";$26.line=0;}}};if($25){$26.style.left=$23.left+'px';if($i.eventMoveToPosition){$26.style.width=($i.cellWidth)+'px';}else{$26.style.width=($23.width)+'px';};$26.start=$23.start;$26.end=$23.end;}else{$26.style.left=ev.part.left+"px";$26.start=ev.start();$26.end=ev.rawend();$23.left=ev.part.left;};(function checkOverlap(){$26.overlapping=false;var $x=$26.row;var $q=ev.data;var $A=$23.width;var $N=$23.left;var $5z=DayPilot.list(mm.list).map(function($00){return $00.event.data;}).add($q);$i.$fz($26,$x,$N,$A,$5z);$i.$fA(DayPilotScheduler.movingShadow,$26.start,$26.end,$26.row.id);})();(function(){var $0H=$i.$dG;if($0H&&$0H.start.getTime()===$26.start.getTime()&&$0H.end.getTime()===$26.end.getTime()&&$0H.resource===$26.row.id){return;};mm.update();var external=(DayPilotScheduler.drag?true:false)&&ev.part.external;var $l={};$l.start=$26.start;$l.end=$i.$cY($26.end);$l.duration=new DayPilot.Duration($l.start,$l.end);$l.e=ev;$l.external=external;$l.resource=$26.row.id;$l.html=null;$l.row=$i.$dV($26.row);$l.position=$26.line;$l.overlapping=$26.overlapping||mm.forbidden;$l.allowed=true;$l.left={};$l.left.html=$l.start.toString($i.eventMovingStartEndFormat,$0d.locale());$l.left.enabled=$i.eventMovingStartEndEnabled;$l.left.space=5;$l.left.width=null;$l.right={};$l.right.html=$l.end.toString($i.eventMovingStartEndFormat,$0d.locale());$l.right.enabled=$i.eventMovingStartEndEnabled;$l.right.space=5;$l.right.width=null;$l.multimove=DayPilot.list(mm.list);$l.shift=$i.coords.shift;$l.ctrl=$i.coords.ctrl;$l.meta=$i.coords.meta;$l.alt=$i.coords.alt;$l.areaData=DayPilot.Global.movingAreaData;$l.link=null;var $17={};$17.event=ev;$17.start=$l.start;$17.end=$l.end;$17.overlapping=$l.overlapping;$17.resource=$l.resource;$l.multimove.splice(0,0,$17);$i.$dG=$l;var $0o={"start":$l.start,"end":$l.end,"resource":$l.resource};if(typeof $i.onEventMoving==='function'){$i.onEventMoving($l);};$26.allowed=$l.allowed;if($l.start!==$0o.start||$l.end !==$0o.end){var $K=$l.start;var end=$i.$dD($l.end);$26.start=$K;$26.end=end;var $0Q=DayPilot.DateUtil.diff($K,end);$0Q=Math.max($0Q,1);var $37=$0d.useBox($0Q);var $N=$37?$i.getPixels($K).boxLeft:$i.getPixels($K).left;var $O=$37?$i.getPixels(end).boxRight:$i.getPixels(end).left;$26.style.left=$N+"px";$26.style.width=($O-$N)+"px";};if($l.resource!==$0o.resource){var $x=$i.$bZ($l.resource);if($x){$26.row=$x;$26.style.height=Math.max($x.height,0)+'px';$26.style.top=($x.top)+'px';if($i.eventMoveToPosition){$26.style.top=($x.top+$5W)+"px";$26.style.height="3px";$26.line=$5V;}}};if($l.html){$26.firstChild.innerHTML=$l.html;}else{$26.firstChild.innerHTML="";};$i.$fF($26,$l);$i.$fG(DayPilotScheduler.movingShadow,$l);if($l.link){if(DayPilot.Global.movingLink){DayPilot.Global.movingLink.clear();};DayPilot.Global.movingLink=$1k.drawLink($l.link.from,$26,$l.link);}})();};this.$fz=function($26,$x,$N,$A,$q){if($i.allowEventOverlap){return;};(function calculate(){$26.overlapping=false;for(var i=0;i<$x.lines.length;i++){var $0x=$x.lines[i];if(!$0x.isFree($N,$A,$q)){$26.overlapping=true;return;}};if(!$i.allowMultiRange){return;};var $60=$x.index;var $61=DayPilot.list(mr.list).some(function($00){var $02=$00.div;var $62=parseInt($02.style.left);var $63=parseInt($02.style.width);var ry=$00.start.y;if($26===$02){return false;};if(ry!==$60){return false;};return DayPilot.Util.overlaps($N,$N+$A,$62,$62+$63);});if($61){$26.overlapping=true;return;}})();var $2W=$26.overlapping;var $5y=$i.$c8("_shadow_overlap");if($2W){DayPilot.Util.addClass($26,$5y);}else{DayPilot.Util.removeClass($26,$5y);}};this.$fA=function($26,$K,end,$1s){var $64=($i.cellConfig&&$i.cellConfig.hasDisabled)||$i.$cu.$fH;if(!$64){return;};var $65=$i.$fI($K,end,$1s);if($65){$26.overlapping=true;};var $5y=$i.$c8("_shadow_overlap");if($26.overlapping){DayPilot.Util.addClass($26,$5y);}else{DayPilot.Util.removeClass($26,$5y);}};this.$fI=function($K,end,$1s){var $M=$i.rows.find($1s).cells.forRange($K,end);if(!$M){return false;};var $65=$M.some(function($P){return $P.properties.disabled;});return $65;};this.$fF=function($26,$l){var $5y=$i.$c8("_shadow_forbidden");if(!$l.allowed||mm.invalid){DayPilot.Util.addClass($26,$5y);}else{DayPilot.Util.removeClass($26,$5y);}};this.$fG=function($26,$l){var $66=5;this.$fJ();if($26.calendar!==$i){return;};var $G={};$G.left=parseInt($26.style.left);$G.top=parseInt($26.style.top);$G.right=$G.left+parseInt($26.style.width);var $A=$l.left.width||10;var $N=document.createElement("div");$N.style.position="absolute";$N.style.left=($G.left-$A-$l.left.space)+"px";$N.style.top=$G.top+"px";$N.style.height=$i.eventHeight+"px";$N.style.overflow="hidden";$N.style.boxSizing="border-box";$N.innerHTML=$l.left.html;$N.className=this.$c8("_event_move_left");$N.onmousemove=$i.$fK;if($l.left.enabled){$i.divHover.appendChild($N);if($l.left.width){$N.style.width=$A+"px";}else{$N.style.whiteSpace="nowrap";var $67=$N.offsetWidth;var $68=$G.left-$67-$l.left.space;$N.style.width=$67+"px";$N.style.left=$68+"px";var $69=$i.nav.scroll.scrollLeft;if($68<$69){$i.divHover.removeChild($N);};var $6a=$i.$fL()+($68-$69);if($6a>0){$N.style.left=$6a+"px";$N.style.top=($G.top-$i.nav.scroll.scrollTop+$i.$cd())+"px";$i.nav.top.appendChild($N);$i.elements.hover.push($N);}}};var $A=$l.right.width||10;var $O=document.createElement("div");$O.style.position="absolute";$O.style.left=($G.right+$l.right.space)+"px";$O.style.top=$G.top+"px";$O.style.height=$i.eventHeight+"px";$O.style.overflow="hidden";$O.style.boxSizing="border-box";if($l.right.width){$O.style.width=$l.right.width+"px";}else{$O.style.whiteSpace="nowrap";};$O.innerHTML=$l.right.html;$O.className=this.$c8("_event_move_right");$O.onmousemove=$i.$fK;if($l.right.enabled){$i.divHover.appendChild($O);var $6b=$i.nav.scroll.scrollWidth;var $6c=$G.right+$l.right.space+$O.offsetWidth;if($6c>=$6b){$i.divHover.removeChild($O);}}};this.$fJ=function(){$i.divHover.innerHTML='';DayPilot.de($i.elements.hover);$i.elements.hover=[];};this.$fM=function(){var $6d=$i.rowHeaderColumnDefaultWidth;if(this.rowHeaderColumns){this.rowHeaderCols=DayPilot.Util.propArray(this.rowHeaderColumns,"width",$6d);}else{this.rowHeaderCols=null;}};this.$fL=function(){var $3Z=0;this.$fM();if(this.rowHeaderCols){for(var i=0;i<this.rowHeaderCols.length;i++){$3Z+=this.rowHeaderCols[i];}}else{$3Z=this.rowHeaderWidth;};return $3Z;};this.$fN=function(){return this.$fO($i.progressiveRowRenderingPreload);};this.$fO=function($6e){var $6e=$6e||0;var $K=0;var end=$i.rowlist.length;var $6f=$i.progressiveRowRendering;if($6f){var $J=$i.$c1();$K=$J.yStart;end=$J.yEnd+1;$K=Math.max(0,$K-$6e);end=Math.min($i.rowlist.length,end +$6e);};return{"start":$K,"end":end}};this.$fP=function(){if(!this.$fQ()){return;};var $1Z=false;var $6g=0;if(this.rowHeaderWidthAutoFit){var $6h=this.divHeader;if(!$6h){return;};if(!$6h.rows){return;};var $z=[];var $1t=$i.$fN();for(var i=$1t.start;i<$1t.end;i++){var $x=$6h.rows[i];if(!$x){continue;};if($x.hidden){continue;};if($x.autofitDone){continue;};$x.autofitDone=true;for(var j=0;j<$x.cells.length;j++){var $05=$x.cells[j].firstChild.firstChild;if(!$05||!$05.style){continue;};var $6i=$05.style.width;var $6j=$05.style.right;$05.style.position="absolute";$05.style.width="auto";$05.style.right="auto";$05.style.whiteSpace="nowrap";var w=$05.offsetWidth+2;$05.style.position="";$05.style.width=$6i;$05.style.right=$6j;$05.style.whiteSpace="";if(typeof $z[j]==='undefined'){$z[j]=0;};$z[j]=Math.max($z[j],w);}};this.$fM();if(this.rowHeaderCols){for(var i=0;i<$z.length;i++){if(this.rowHeaderCols[i]){if($z[i]>this.rowHeaderCols[i]){this.rowHeaderCols[i]=$z[i];$1Z=true;};$6g+=this.rowHeaderCols[i];}}}else{$6g=this.rowHeaderWidth;if(this.rowHeaderWidth<$z[0]+$i.rowHeaderWidthMarginRight){$6g=$z[0]+$i.rowHeaderWidthMarginRight;$1Z=true;}}};if($1Z){if(this.$eu){this.$eu.widths=this.rowHeaderCols;this.$eu.updateWidths();DayPilot.Util.updatePropsFromArray(this.rowHeaderColumns,"width",this.rowHeaderCols);};if(!this.rowHeaderScrolling){this.rowHeaderWidth=$6g;};this.$dm();this.$fR();}};this.$bv=function(){this.$fS=true;this.$fM();var $3Z=this.$fL();var $6k=this.divHeader;if($6k){if(DayPilot.browser.ie){for(var i=0;i<$6k.childNodes.length;i++){DayPilot.de($6k.childNodes[i]);}};$6k.innerHTML='';DayPilot.puc($6k);}else{$6k=document.createElement("div");$6k.onmousemove=function(){$i.$fT();};this.divHeader=$6k;};$6k.style.width=$3Z+"px";$6k.style.height=$i.$bd+"px";$6k.rows=[];var $6f=$i.progressiveRowRendering;if($6f){$c();}else{var m=this.rowlist.length;for(var i=0;i<m;i++){$i.$fU(i);}};$i.$fV();this.divResScroll.appendChild($6k);if(this.rowHeaderWidthAutoFit){this.$fP();}};this.$dn=function(){if(!$i.progressiveRowRendering){return;};var $J=this.$fN();for(var i=0;i<$i.rowlist.length;i++){if($J.start<=i&&i<$J.end){$i.$fU(i);}else{$i.$fW(i);}};if(this.rowHeaderWidthAutoFit){var $5N=$i.$ce();this.$fP();var $5S=$i.$ce();if($5S!==$5N){var $6l=this.cellWidth;this.$bq();var $6m=this.cellWidth;if($6m!==$6l){$i.$br();$i.$bw();$i.$bC();$i.$bu();$i.$fX();}}}};this.$fV=function(){var $6k=$i.divHeader;var c=document.createElement("div");c.style.position="absolute";$6k.appendChild(c);$i.nav.resScrollSpace=c;c.setAttribute("unselectable","on");var $02=document.createElement("div");$02.style.position="relative";$02.style.height="100%";$02.className=this.$c8('_rowheader');c.appendChild($02);var $3Z=this.$fL();var c=$i.nav.resScrollSpace;c.style.width=$3Z+"px";c.style.top=this.$bd+"px";c.style.height=($i.divResScroll.clientHeight+20)+"px";};this.$fW=function(i){var $x=$i.divHeader.rows[i];if(!$x){return;};DayPilot.de($x.cells);$i.divHeader.rows[i]=null;};this.$dx=function(i){this.$fW(i);this.$fU(i);};this.$fU=function(i){var $6k=$i.divHeader;var $6n=this.divHeader;if($6n.rows[i]){return;};var $6o=this.rowHeaderCols;var $1W=$6o?this.rowHeaderCols.length:0;var $3Z=this.$fL();var $x=this.rowlist[i];if(!$x){return;};if($x.hidden){return;};var $l=this.$fw($x);$6n.rows[i]={};$6n.rows[i].cells=[];var c=document.createElement("div");c.style.position="absolute";c.style.top=$x.top+"px";c.row=$x;c.index=i;var $06=$l.row;var $A=$6o?$6o[0]:this.rowHeaderWidth;c.style.width=($A)+"px";c.style.border="0px none";if($06.toolTip){c.title=$06.toolTip;};c.setAttribute("unselectable","on");if(typeof $06.ariaLabel!=="undefined"){c.setAttribute("aria-label",$06.ariaLabel);}else{c.setAttribute("aria-label",$06.html);};c.onmousemove=$i.$fY;c.onmouseout=$i.$fZ;c.onmouseup=$i.$g0;c.oncontextmenu=$i.$g1;c.onclick=$i.$g2;c.ondblclick=$i.$g3;var $02=document.createElement("div");$02.style.width=($A)+"px";$02.setAttribute("unselectable","on");$02.className=this.$c8('_rowheader');if($06.cssClass){DayPilot.Util.addClass($02,$06.cssClass);};if($06.backColor){$02.style.background=$06.backColor;};if($06.fontColor){$02.style.color=$06.fontColor;};if($06.horizontalAlignment){$02.style.textAlign=$06.horizontalAlignment;};$02.style.height=($x.height)+"px";$02.style.overflow='hidden';$02.style.position='relative';var $05=document.createElement("div");$05.setAttribute("unselectable","on");$05.className=this.$c8('_rowheader_inner');$02.appendChild($05);var $0R=this.rowMoveHandling!=="Disabled";var $6p=10;var $08=$06.areas||[];if($0R&&!$06.moveDisabled){$08.push({"v":"Hover","w":$6p,"bottom":0,"top":0,"left":0,"css":$i.$c8("_rowmove_handle"),"action":"Move"});};var ro=$i.$dV($x);DayPilot.Areas.attach($02,ro,{"areas":$08,"allowed":function(){return !$6q.row;}});var $3M=document.createElement("div");$3M.style.position="absolute";$3M.style.bottom="0px";$3M.style.width="100%";$3M.style.height="1px";$3M.className=this.$c8($07.resourcedivider);$02.appendChild($3M);(function drawText(){if($i.treeEnabled&&!$x.isNewRow){var $N=$x.level*$i.treeIndent+$i.treeImageMarginLeft;if($0R){$N+=$6p;};var $A=10;var $3I=document.createElement("div");$3I.style.width="10px";$3I.style.height=$A+"px";$3I.style.backgroundRepeat="no-repeat";$3I.style.position='absolute';$3I.style.left=$N+'px';$3I.style.top=$i.treeImageMarginTop+"px";if(!$x.loaded&&$x.children.length===0){$3I.className=$i.$c8('_tree_image_expand');$3I.style.cursor='pointer';$3I.index=i;$3I.onclick=function(ev){$i.$g4(this.index);ev=ev||window.event;ev.cancelBubble=true;};}else if($x.children.length>0){if($x.expanded){$3I.className=$i.$c8('_tree_image_collapse');}else{$3I.className=$i.$c8('_tree_image_expand');};$3I.style.cursor='pointer';$3I.index=i;$3I.onclick=function(ev){$i.$fh(this.index);ev=ev||window.event;ev.cancelBubble=true;};}else{$3I.className=$i.$c8('_tree_image_no_children');};$05.appendChild($3I);};var $4P=document.createElement("div");if($i.treeEnabled){$4P.style.marginLeft=($N+$A)+"px";};$4P.innerHTML=$06.html;c.textDiv=$4P;c.cellDiv=$02;$05.appendChild($4P);})();c.appendChild($02);$6k.appendChild(c);$6n.rows[i].cells.push(c);if(!$x.columns||$x.columns.length===0){c.colSpan=$1W>0?$1W:1;$02.style.width=$3Z+"px";}else{var $N=$A;for(var j=1;j<$1W;j++){var $4L=$06.columns[j-1]||{};var c=document.createElement("div");c.style.position="absolute";c.style.top=$x.top+"px";c.style.left=$N+"px";$6k.appendChild(c);$6n.rows[i].cells.push(c);c.row=$x;c.index=i;if($06.toolTip){c.title=$06.toolTip;};c.setAttribute("unselectable","on");c.onmousemove=$i.$fY;c.onmouseout=$i.$fZ;c.onmouseup=$i.$g0;c.oncontextmenu=$i.$g1;c.onclick=$i.$g2;c.ondblclick=$i.$g3;var $02=document.createElement("div");var w=$6o[j];$N+=w;var $4l=$4L.backColor||$06.backColor;if($4l){$02.style.backgroundColor=$4l;};$02.style.width=w+"px";$02.style.height=($x.height)+"px";$02.style.overflow='hidden';$02.style.position='relative';$02.setAttribute("unselectable","on");DayPilot.Util.addClass($02,this.$c8("_rowheader"));DayPilot.Util.addClass($02,this.$c8("_rowheadercol"));DayPilot.Util.addClass($02,this.$c8("_rowheadercol"+j));if($06.cssClass){DayPilot.Util.addClass($02,$06.cssClass);};if($4L.cssClass){DayPilot.Util.addClass($02,$4L.cssClass);};if($4L.horizontalAlignment){$02.style.textAlign=$4L.horizontalAlignment;};var $05=document.createElement("div");$05.setAttribute("unselectable","on");$05.className=this.$c8("_rowheader_inner");$02.appendChild($05);var $3M=document.createElement("div");$3M.style.position="absolute";$3M.style.bottom="0px";$3M.style.width="100%";$3M.style.height="1px";$3M.className=this.$c8("_resourcedivider");$02.appendChild($3M);var $4P=document.createElement("div");var $6r=$4L.html||"";$4P.innerHTML=$6r;c.textDiv=$4P;c.cellDiv=$02;$05.appendChild($4P);DayPilot.Areas.attach($02,ro,{"areas":$4L.areas,"allowed":function(){return !$6q.row;}});c.appendChild($02);}}};this.$g1=function(){var $x=this.row;if($x.contextMenu){$x.contextMenu.show($i.$dV($x));};return false;};this.$g2=function(ev){if($1N.cancelClick){return;};var $x=this.row;var r=$i.$dV($x,this.index);if($x.isNewRow){$i.$e1.edit($x);return;};$i.$dY(r,ev.ctrlKey,ev.shiftKey,ev.metaKey);};this.$g3=function(ev){if($i.timeouts.resClick){for(var $12 in $i.timeouts.resClick){window.clearTimeout($i.timeouts.resClick[$12]);};$i.timeouts.resClick=null;};var $x=this.row;var e=$i.$dV($x,this.index);if($i.$bQ()){var $l={};$l.resource=e;$l.row=e;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onRowDoubleClick==='function'){$i.onRowDoubleClick($l);if($l.preventDefault.value){return;}};switch($i.rowDoubleClickHandling){case 'PostBack':$i.rowDoubleClickPostBack(e);break;case 'CallBack':$i.rowDoubleClickCallBack(e);break;case 'Select':$i.$e0($x,ev.ctrlKey,ev.shiftKey,ev.metaKey);break;case 'Edit':$i.$e1.edit($x);break;};if(typeof $i.onRowDoubleClicked==='function'){$i.onRowDoubleClicked($l);}}else{switch($i.rowDoubleClickHandling){case 'PostBack':$i.rowDoubleClickPostBack(e);break;case 'CallBack':$i.rowDoubleClickCallBack(e);break;case 'JavaScript':$i.onRowDoubleClick(e);break;case 'Select':$i.$e0($x,ev.ctrlKey,ev.shiftKey,ev.metaKey);break;case 'Edit':$i.$e1.edit($x);break;}}};this.rowDoubleClickPostBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cI("RowDoubleClick",$0Y,$q);};this.rowDoubleClickCallBack=function(e,$q){var $0Y={};$0Y.resource=e;this.$cJ("RowDoubleClick",$0Y,$q);};this.$g5=function(ev){if($i.timeHeaderClickHandling==="Disabled"){return;};var $P={};$P.start=this.cell.start;$P.level=this.cell.level;$P.end=this.cell.end;if(!$P.end){$P.end=new DayPilot.Date($P.start).addMinutes($i.cellDuration);};$i.$e2($P);};this.$dV=function($x){return new DayPilot.Row($x,$i);};this.$ct=function(i){var $x=this.rowlist[i];if(!$x.events){$x.resetEvents();};if($x.data){return;};$x.data={};$x.data.start=new DayPilot.Date($x.start);$x.data.startTicks=$x.data.start.getTime();var $0Q=this.$cx().getTime()-this.$cs().getTime();$x.data.end=$0d.isResourcesView()?$x.data.start.addTime($0Q):$x.data.start.addDays(1);$x.data.endTicks=$x.data.end.getTime();$x.data.offset=$x.start.getTime()-this.$cs().getTime();$x.data.i=i;};this.$bu=function($Z){if($Z){this.events.list=$Z;}else if(!this.events.list){this.events.list=[];};if(this.events.list!=null&&!DayPilot.isArray(this.events.list)){throw "DayPilot.Scheduler.events.list expects an array object";};$20.prepareRows(true);var $Y=this.events.list;var $6s=$Y.length;var $6t=typeof this.onBeforeEventRender==='function';var $1d;var $6u=$i.viewType==="Resources";for(var j=0;j<$6s;j++){var $6v=$Y[j];if(!$6v){continue;};if(typeof $6v!=="object"){throw new DayPilot.Exception("Event data item must be an object");};if(!$6v.start){throw new DayPilot.Exception("Event data item must specify 'start' property");};if($6v instanceof DayPilot.Event){throw "DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.";};var $6w=typeof $6v.id==="string"||typeof $6v.id==="number";if(!$6w){var $6x=typeof $6v.recurrentMasterId==="string"||typeof $6v.recurrentMasterId==="number";if(!$6x){throw new DayPilot.Exception("All events must have an id property (string or number)");}};if($6v.type==="Milestone"){$6v.end=$6v.start;};if($6t){this.$eM(j);};if($6v.resource==="*"){$1d=$i.rowlist;}else if($6u){$1d=DayPilot.list($20.rowcache[$6v.resource]).concat($20.rowcache["*"]);}else if($i.viewType==="Days"){$1d=$i.rowlist;}else if($i.viewType==="Gantt"){$1d=$20.rowcache[$6v.id];};for(var x=0;$1d&&x<$1d.length;x++){var $x=$1d[x];var ep=this.$eN($6v,$x);if(!ep){continue;};if($6t){ep.cache=this.$bg.events[j];}}};DayPilot.list($i.rowlist).each(function($x){$i.$eS($x);});this.$d5();};this.$g6={};var $20=this.$g6;$20.rowCache={};$20.prepareRows=function($6y){$20.rowcache={};for(var i=0;i<$i.rowlist.length;i++){var $x=$i.rowlist[i];if($6y){$x.resetEvents();};$i.$ct(i);if(!$x.id){continue;};var $6z=$x.id.toString();if(!$20.rowcache[$6z]){$20.rowcache[$6z]=DayPilot.list();};$20.rowcache[$6z].push($x);}};$20.loadEvent=function($6v){};this.$eL=function(){var $6A={};if($i.viewType!=="Resources"){return false;};for(var i=0;i<$i.rowlist.length;i++){var $x=$i.rowlist[i];var id=$x.id;if($6A[id]){return true;};$6A[id]=true;};return false;};this.$eM=function(i){var $0A=this.$bg.events;var $q=this.events.list[i];var $6B={};if($q instanceof DayPilot.Event){$q=$q.data;};for(var name in $q){$6B[name]=$q[name];};if(typeof this.onBeforeEventRender==='function'){var $l={};$l.e=$6B;$l.data=$6B;$l.onElementCreate=null;$l.onElementRemove=null;this.onBeforeEventRender($l);DayPilot.Util.copyProps($l,$6B,["onElementCreate","onElementRemove"]);};$0A[i]=$6B;};this.$eS=function($x){$x.lines=[];$x.sections=null;if($x.isNewRow){return;};if(this.sortDirections){$x.events.sort(this.$g7);}else if(!$i.$b8){$x.events.sort(this.$g8);};var $6C=$i.$b8;if($6C){$6D.loadRow($x);return;};var $6E=$i.groupConcurrentEvents;if($6E){for(var i=0;i<$x.blocks.length;i++){$x.blocks[i].clear();}};DayPilot.list($x.events).each(function(e){if(e.part.height){return;};if($x.eventHeight){e.part.height=$x.eventHeight;return;};e.part.height=$0d.eventHeight();});for(var j=0;j<$x.events.length;j++){var e=$x.events[j];$x.putIntoLine(e);if($6E){$x.putIntoBlock(e);}};var $6F=0;for(var i=0;i<$x.lines.length;i++){var $0x=$x.lines[i];$0x.top=$6F;$6F+=($0x.height||$x.eventHeight)*$x.eventStackingLineHeight/100;};if($6E){for(var j=0;j<$x.blocks.length;j++){var $6G=$x.blocks[j];$6G.lines=[];$6G.events.sort(this.$g7);for(var k=0;k<$6G.events.length;k++){var e=$6G.events[k];$6G.putIntoLine(e);};if($6G.lines.length<=$i.groupConcurrentEventsLimit){$6G.expanded=true;};var $6H=DayPilot.list($6G.events).map(function(e){return e.id();}).some(function($00){return DayPilot.contains($i.$g9,$00);});if($6H){$6G.expanded=true;};var $6F=0;for(var i=0;i<$6G.lines.length;i++){var $0x=$6G.lines[i];$0x.top=$6F;$6F+=($0x.height||$x.eventHeight)*$x.eventStackingLineHeight/100;}}}};this.$d4=function($1d){$1d=DayPilot.ua($1d);for(var i=0;i<$1d.length;i++){var ri=$1d[i];$i.$eS($i.rowlist[ri]);};if($i.$b8){$6D.calculateEventPositions();}else{for(var i=0;i<$1d.length;i++){var ri=$1d[i];var $x=$i.rowlist[ri];$i.$fu($x);}}};this.$f3=function(){var $K=$i.scale==="Manual"?$i.itline[0].start:$i.startDate;return DayPilot.list($i.rowlist).some(function($00){if(!$00.start){return false;};return $00.start.getTime()!==new DayPilot.Date($K).getTime();});};this.$eN=function(e,$x){if($x.hideEvents){return;};var $K=new DayPilot.Date(e.start);var end=new DayPilot.Date(e.end);end=$i.$dD(end);var $6I=$K.ticks;var $6J=end.ticks;if($6J<$6I){return null;};var $0A=null;if(typeof $i.onBeforeEventRender==='function'){var $1B=DayPilot.indexOf($i.events.list,e);$0A=$i.$bg.events[$1B];};if($0A){if($0A.hidden){return null;}}else if(e.hidden){return null;};var $6K=false;switch(this.viewType){case 'Days':$6K=!($6J<=$x.data.startTicks||$6I>=$x.data.endTicks)||($6I===$6J&&$6I===$x.data.startTicks);break;case 'Resources':$6K=($x.id===e.resource||$x.id==="*"||e.resource==="*")&&(!($6J<=$x.data.startTicks||$6I>=$x.data.endTicks)||($6I===$6J&&$6I===$x.data.startTicks));break;case 'Gantt':$6K=($x.id===e.id)&&!($6J<=$x.data.startTicks||$6I>=$x.data.endTicks);break;};if(!$6K){return null;};var ep=new DayPilot.Event(e,$i);ep.part.dayIndex=$x.data.i;ep.part.start=$x.data.startTicks<$6I?$K:$x.data.start;ep.part.end=$x.data.endTicks>$6J?end:$x.data.end;var $6L=this.getPixels(ep.part.start.addTime(-$x.data.offset));var $6M=this.getPixels(ep.part.end.addTime(-$x.data.offset));if(ep.part.start===ep.part.end){$6M=this.getPixels(ep.part.end.addTime(-$x.data.offset).addSeconds(1));};if($0A&&$0A.height){ep.part.height=$0A.height;}else if(e.height){ep.part.height=e.height;};ep.part.$ga=function(){var $6N=this.height;if($i.eventVersionsEnabled&&!DayPilot.list(ep.data.versions).isEmpty()){var $0j=ep.versions.length;$6N+=$0j*$i.eventVersionHeight;$6N+=$0j*$i.eventVersionMargin;};return $6N+$i.eventMarginBottom;};var $N=$6L.left;var $O=$6M.left;ep.part.startPixels=$6L;ep.part.endPixels=$6M;if($N===$O){if($6L.cut||$6M.cut){return null;};var $2k=(ep.part.start.addTime(-$x.data.offset).getTime()+ep.part.end.addTime(-$x.data.offset).getTime())/2;var $6O=$i.getPixels(new DayPilot.Date(Math.floor($2k)));if($6O.cut){return null;}};ep.part.box=$0d.useBox($6J-$6I);var $39=$i.eventHeight;if(e.type==="Milestone"){var $A=e.width||$39;ep.part.end=ep.part.start;ep.part.left=$N-$A/2;ep.part.width=$A;ep.part.barLeft=0;ep.part.barWidth=$A;}else if(ep.part.box){var $6P=$6L.boxLeft;var $6Q=$6M.boxRight;ep.part.left=$6P;ep.part.width=$6Q-$6P;ep.part.barLeft=Math.max($N-ep.part.left,0);ep.part.barWidth=Math.max($O-$N,1);}else{ep.part.left=$N;ep.part.width=Math.max($O-$N,1);ep.part.barLeft=0;ep.part.barWidth=Math.max($O-$N-1,1);};var $6R=$i.eventMinWidth;ep.part.width=Math.max(ep.part.width,$6R);if($i.eventVersionsEnabled){$i.$gb(ep,$x);};if(typeof $i.onEventFilter==="function"&&$i.events.$eH){var $l={};$l.filter=$i.events.$eH;$l.visible=true;$l.e=ep;$i.onEventFilter($l);if(!$l.visible){return null;}};$x.events.push(ep);return ep;};this.$gb=function(ep,$x){ep.versions=[];var $q=ep.data;var $Y=DayPilot.list($q.versions);if($Y.isEmpty()){return;};$Y.each(function($1C){var $K=new DayPilot.Date($1C.start);var end=new DayPilot.Date($1C.end);var $6L=$i.getPixels($K.addTime(-$x.data.offset));var $6M=$i.getPixels(end.addTime(-$x.data.offset));if($K.ticks===end.ticks){$6M=$i.getPixels(end.addTime(-$x.data.offset).addTime(1));};var $N=$6L.left;var $O=$6M.left;if($N===$O&&($6L.cut||$6M.cut)){return null;};var $6S={};$6S.left=$N;$6S.continueLeft=$K<$x.data.start;$6S.right=$O;$6S.continueRight=end>$x.data.end;$6S.width=$O-$N;ep.versions.push($6S);});};this.$g8=function(a,b){if(!a||!b||!a.start||!b.start){return 0;};var $6T=a.start().ticks-b.start().ticks;if($6T!==0){return $6T;};var $6U=b.end().ticks-a.end().ticks;return $6U;};this.$g7=function(a,b){if(!a||!b){return 0;};if(!a.data||!b.data||!a.data.sort||!b.data.sort||a.data.sort.length===0||b.data.sort.length===0){return $i.$g8(a,b);};var $j=0;var i=0;while($j===0&&typeof a.data.sort[i]!=="undefined"&&typeof b.data.sort[i]!=="undefined"){if(a.data.sort[i]===b.data.sort[i]){$j=0;}else if(typeof a.data.sort[i]==="number"&&typeof b.data.sort[i]==="number"){$j=a.data.sort[i]-b.data.sort[i];}else{$j=$i.$gc(a.data.sort[i],b.data.sort[i],$i.sortDirections[i]);};i++;};return $j;};this.$gc=function(a,b,$6V){var $6W=($6V!=="desc");var $6X=$6W?-1:1;var $6Y=-$6X;if(a===null&&b===null){return 0;};if(b===null){return $6Y;};if(a===null){return $6X;};var ar=[];ar[0]=a;ar[1]=b;ar.sort();return a===ar[0]?$6X:$6Y;};this.$e0=function($x,$1f,$1E,$1g){if($i.$bQ()){var $1B=DayPilot.indexOf($i.rowlist,$x);var e=$i.$dV($x,$1B);var $6Z=DayPilot.indexOf($1N.selected,$x)!==-1;var $0X=$6Z?"deselected":"selected";var $l={};$l.row=e;$l.selected=$6Z;$l.ctrl=$1f;$l.shift=$1E;$l.meta=$1g;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onRowSelect==='function'){$i.onRowSelect($l);if($l.preventDefault.value){return;}};var $70=$1E&&!$1f&&!$1g;if(!$1E){$1N.$gd={"row":$x,"index":$1B};};if($70){$1N.fixRowSelectLast();var $71=$1N.$gd.index;var $72=$1B;$1N.selectRange($71,$72);};switch($i.rowSelectHandling){case 'PostBack':$i.rowSelectPostBack(e,$0X);break;case 'CallBack':$i.rowSelectCallBack(e,$0X);break;case "Notify":!$70&&$1N.select($x,$1f,$1E,$1g);$i.rowSelectNotify(e,$0X);break;case 'Update':!$70&&$1N.select($x,$1f,$1E,$1g);break;};if(typeof $i.onRowSelected==='function'){$l.selected=DayPilot.indexOf($1N.selected,$x)!==-1;$i.onRowSelected($l);}}else{$1N.select($x,$1f,$1E);var $1B=DayPilot.indexOf($i.rowlist,$x);var e=$i.$dV($x,$1B);var $6Z=DayPilot.indexOf($1N.selected,$x)!==-1;var $0X=$6Z?"deselected":"selected";switch($i.rowSelectHandling){case 'PostBack':$i.rowSelectPostBack(e,$0X);break;case 'CallBack':$i.rowSelectCallBack(e,$0X);break;case "Notify":$i.rowSelectNotify(e,$0X);break;case 'JavaScript':$i.onRowSelect(e,$0X);break;}}};this.rowSelectPostBack=function(r,$0X,$q){var $0Y={};$0Y.resource=r;$0Y.change=$0X;this.$cI('RowSelect',$0Y,$q);};this.rowSelectCallBack=function(r,$0X,$q){var $0Y={};$0Y.resource=r;$0Y.change=$0X;this.$cJ('RowSelect',$0Y,$q);};this.rowSelectNotify=function(r,$0X,$q){var $0Y={};$0Y.resource=r;$0Y.change=$0X;this.$cJ('RowSelect',$0Y,$q,"Notify");};this.rows={};this.rows.selection={};var $73=this.rows.selection;$73.get=function(){var $Y=[];DayPilot.list($1N.selected).each(function($00){$Y.push($i.$dV($00));});return $Y;};$73.clear=function(){$1N.clearSelection();};$73.add=function($x){if(!$x||!$x.isRow){throw "DayPilot.Scheduler.rows.selection.add(): DayPilot.Row object expected";};var $74=DayPilot.list($1N.selected).some(function($00){return $00===$x.$.row;});if(!$74){$1N.selected.push($x.$.row);};$1N.$ge();$73.$gf();};$73.remove=function($x){if(!$x||!$x.isRow){throw "DayPilot.Scheduler.rows.selection.remove(): DayPilot.Row object expected";};var $6Z=$73.isSelected($x);if($6Z){$1N.unselect($x.$.row);DayPilot.rfa($1N.selected,$x.$.row);};$73.$gf();};$73.isSelected=function($x){if(!$x||!$x.isRow){throw "DayPilot.Scheduler.rows.selection.isSelected(): DayPilot.Row object expected";};var $6Z=DayPilot.indexOf($1N.selected,$x.$.row)!==-1;return $6Z;};$73.$gf=function(){$i.selectedRows=DayPilot.list($1N.selected).map(function($00){return $00.id;});};this.rows.all=function(){var $Y=[];for(var i=0;i<$i.rowlist.length;i++){var r=$i.$dV($i.rowlist[i]);$Y.push(r);};return $31($Y);};this.rows.visible=function(){var $Y=[];for(var i=0;i<$i.rowlist.length;i++){var r=$i.rowlist[i];if(!r.hidden){var r=$i.$dV($i.rowlist[i]);$Y.push(r);}};return $31($Y);};this.rows.each=function(f){$i.rows.all().each(f);};this.rows.filter=function($75){$i.rows.$eH=$75;if($i.$bT){$i.$da({"immediateEvents":true});}};this.rows.find=function(id,$K){var $76=DayPilot.list($20.rowcache[id]);var $0N=null;if(typeof $K==="string"){$0N=$76.find(function($00){return $K===$00.start.toString();});}else{$0N=$76.first();};if($0N){return new DayPilot.Row($0N,$i);};return null;};this.rows.load=function($29,$2a,$2b){if(!$29){throw new DayPilot.Exception("rows.load(): 'url' parameter required");};var $2c=function($l){var $2d={};$2d.exception=$l.exception;$2d.request=$l.request;if(typeof $2b==='function'){$2b($2d);}};var $2e=function($l){var r=$l.request;var $q;try{$q=JSON.parse(r.responseText);}catch(e){var $2f={};$2f.exception=e;$2c($2f);return;};if(DayPilot.isArray($q)){var $2g={};$2g.preventDefault=function(){this.preventDefault.value=true;};$2g.data=$q;if(typeof $2a==="function"){$2a($2g);};if($2g.preventDefault.value){return;};$i.resources=$q;if($i.$bT){$i.update();}}};var $2h=$i.rowsLoadMethod&&$i.rowsLoadMethod.toUpperCase()==="POST";if($2h){DayPilot.ajax({"method":"POST","url":$29,"success":$2e,"error":$2c});}else{DayPilot.ajax({"method":"GET","url":$29,"success":$2e,"error":$2c});}};this.rows.expand=function($77){var $1d=[];var $78=$77||1;for(var i=0;i<$i.rowlist.length;i++){var $x=$i.rowlist[i];var $79=$78===-1;if($x.level<$78){$79=true;};if($79&&!$x.expanded&&$x.children&&$x.children.length>0){$1d.push($x.index);}};if($1d.length===0){return;};if($1d.length===1){$i.$fh($1d[0]);}else{for(var i=0;i<$1d.length;i++){var $1B=$1d[i];var $1O=$i.rowlist[$1B].resource;$1O.expanded=true;};$i.$da();}};this.rows.expandAll=function(){$i.rows.expand(-1);};this.rows.collapseAll=function(){$i.rowlist.each(function($x){$x.resource.expanded=false;});$i.$da();};this.rows.headerHide=function(){$i.$gg=true;$i.$gh();$i.$fR();$i.$cl();};this.rows.headerShow=function(){$i.$gg=false;$i.$gh();$i.$fR();$i.$cl();};this.rows.headerToggle=function(){if($i.$gg){$i.rows.headerShow();}else{$i.rows.headerHide();}};this.rows.edit=function($x){$1N.edit($x.$.row);};this.rows.remove=function($x){var $q=$x.$.row.resource;var $7a=$7b.findParentArray($q);if(!$7a){throw "Cannot find source node parent";};var $7c=DayPilot.indexOf($7a,$q);$7a.splice($7c,1);$i.update();};this.rows.update=function($x){if(!($x instanceof DayPilot.Row)){throw new DayPilot.Exception("DayPilot.Scheduler.rows.update() expects a DayPilot.Row object.");};var $1B=$x.index;var $1y=$i.rowlist[$1B];var $1O=$x.data;var parent=$x.parent()?$x.parent().$.row:null;var $7d=$i.$gi($1O);var $x=$i.$gj($7d,parent);$x.hidden=$1y.hidden;$x.level=$1y.level;$x.children=$1y.children;$x.index=$1B;$x.top=$1y.top;$x.height=$1y.height;$i.rowlist[$1B]=$x;$x.resetEvents();$i.$ct($1B);$i.$gk($x);$i.$eS($x);$i.$dx($1B);$i.$bD();$i.$bH();};this.$gk=function($x){var $Z=$i.events.list;var $6s=$Z.length;var $6t=typeof $i.onBeforeEventRender==="function";var $1d;for(var j=0;j<$6s;j++){var $6v=$Z[j];if(!$6v){continue;};if($6v instanceof DayPilot.Event){throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");};if($i.viewType==="Days"){throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Days'.");}else if($i.viewType==="Gantt"){throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Gantt'.");};var $6K=$6v.resource==="*"||$x.id==="*"||$6v.resource===$x.id;if(!$6K){continue;};if($6t){this.$eM(j);};var ep=this.$eN($6v,$x);if(!ep){continue;};if($6t){ep.cache=this.$bg.events[j];}}};this.$gl=function(){var $1C=$6q.source;var $1D=$6q.target;var $w=$6q.position;var $7e=$6q.sourceCalendar;$1N.resetMoving();if($i.$bQ()){var $l={};$l.source=$i.$dV($1C);$l.source.calendar=$7e;$l.target=$i.$dV($1D);$l.position=$w;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onRowMove==="function"){$i.onRowMove($l);if($l.preventDefault.value){return;}};switch($i.rowMoveHandling){case "Update":$1N.move($l);break;case "CallBack":$i.rowMoveCallBack($l.source,$l.target,$l.position);break;case "PostBack":$i.rowMovePostBack($l.source,$l.target,$l.position);break;case "Notify":$1N.move($l);$i.rowMoveNotify($l.source,$l.target,$l.position);break;};if(typeof $i.onRowMoved==="function"){$i.onRowMoved($l);}}else{var $1C=$i.$dV($1C);var $1D=$i.$dV($1D);var $w=$w;switch($i.rowMoveHandling){case "CallBack":$i.rowMoveCallBack($1C,$1D,$w);break;case "PostBack":$i.rowMovePostBack($1C,$1D,$w);break;case "JavaScript":$i.onRowMove($1C,$1D,$w);break;}}};this.$bO=function($1d){var $Y=DayPilot.list($1d);$1N.selected=[];if(!$Y.isEmpty()){$i.$b6=false;$i.$bt();};$Y.each(function($00){var $x=$i.$bZ($00);if($x){$1N.selected.push($x);}});$1N.$ge();};this.$e1={};var $1N=this.$e1;$1N.edit=function($x){var $7f=$1N.$gm($x);};$1N.rowSelectLastSetDefault=function(){$1N.$gd={"row":$i.rowlist[0],"index":0};};$1N.rowSelectSetLast=function($x){var $1B=DayPilot.indexOf($i.rowlist,$x);if($1B===-1){throw "DayPilot.Scheduler: Row not found when selecting a range";};$1N.$gd={"row":$x,"index":$1B};};$1N.fixRowSelectLast=function(){if(!$1N.$gd){$1N.rowSelectLastSetDefault();};var $1B=DayPilot.indexOf($i.rowlist,$1N.$gd.row);if($1B>-1){return;};var $x=$i.$bZ($1N.$gd.row.id);if($x){$1B=DayPilot.indexOf($i.rowlist,$x);$1N.$gd={"row":$x,"index":$1B};}else{$1N.rowSelectLastSetDefault();}};$1N.createOverlay=function($x){var $A=$i.$fL();var $32=$i.$c8("_rowmove_source");var $02=DayPilot.Util.div($i.divHeader,0,$x.top,$A,$x.height);$02.className=$32;$x.moveOverlay=$02;};$1N.deleteOverlay=function($x){if(!$x){return;};DayPilot.de($x.moveOverlay);$x.moveOverlay=null;};$1N.$gm=function($x){var r=$1N.$gn($x);var c=r.cells[0];if(c.input){return c.input;};DayPilot.Areas.disable(c.firstChild);var $A=c.clientWidth;if($x.isNewRow){$A=$i.$ce();};var $7f=document.createElement("textarea");$7f.style.position="absolute";$7f.style.top="0px";$7f.style.left="0px";$7f.style.width=$A+"px";$7f.style.height=$x.height+"px";$7f.style.border="0px none";$7f.style.overflow="hidden";$7f.style.boxSizing="border-box";$7f.style.resize="none";$7f.style.paddingLeft=($x.level*$i.treeIndent)+"px";var $21=c.textDiv;$7f.style.fontFamily=DayPilot.gs($21,'fontFamily')||DayPilot.gs($21,'font-family');$7f.style.fontSize=DayPilot.gs($21,'fontSize')||DayPilot.gs($21,'font-size');$7f.value=$x.name||"";c.firstChild.appendChild($7f);c.input=$7f;var $7g=function(){try{c.input.parentNode.removeChild(c.input);}catch(e){$c();};c.input=null;};$7f.focus();$7f.onblur=function(){$7f.onblur=null;var $1z=$7f.value;$7g();DayPilot.Areas.enable(c.firstChild);$i.$dX($x,$1z,$7f.canceled);};$7f.onkeydown=function(e){var $7h=(window.event)?event.keyCode:e.keyCode;if($7h===27){$7f.canceled=true;$7g();};if($7h===13){$7f.onblur();return false;};return true;};if($7f.setSelectionRange){$7f.setSelectionRange(0,9999);}else{$7f.select();};return $7f;};$1N.selected=[];$1N.select=function($x,$1f,$1E,$1g){var $6Z=DayPilot.indexOf($1N.selected,$x)!==-1;if($1f||$1g){if($6Z){$1N.unselect($x);DayPilot.rfa($1N.selected,$x);return;}}else{$6Z=false;$1N.clearSelection();};$1N.$go($x);if(!$6Z){$1N.selected.push($x);};$73.$gf();};$1N.selectRange=function($71,$72){$1N.clearSelection();var $5U=Math.min($71,$72);var $z=Math.max($71,$72);for(var i=$5U;i<=$z;i++){var $x=$i.rowlist[i];$1N.$go($x);$1N.selected.push($x);};$73.$gf();};$1N.$ge=function(){for(var i=0;i<$1N.selected.length;i++){var $x=$1N.selected[i];$1N.$go($x);}};$1N.$go=function($x){var y=DayPilot.indexOf($i.rowlist,$x);if(y===-1){var $1D=$i.$bZ($x.id);if($1D){y=$1D.index;}else{return;}};var cl=$i.$c8("_cell_selected");var $M=[];for(var i=0;i<$i.itline.length;i++){var c={};c.x=i;c.y=y;$M.push(c);};$i.cells.findXy($M).addClass(cl);var cl=$i.$c8("_rowheader_selected");var $6h=$i.divHeader;for(var y=0;y<$6h.rows.length;y++){var r=$6h.rows[y];if(r&&r.cells[0]&&r.cells[0].row===$x){for(var x=0;x<r.cells.length;x++){var c=r.cells[x];var $0N=c.firstChild;DayPilot.Util.addClass($0N,cl);}}}};$1N.$ee=function(){var $Y=[];if(!$1N.selected){return $Y;};for(var i=0;i<$1N.selected.length;i++){var $x=$1N.selected[i];var $1B=DayPilot.indexOf($i.rowlist,$x);var r=$i.$dV($x,$1B);$Y.push(r.toJSON());};return $Y;};$1N.unselect=function($x){var cl=$i.$c8("_cell_selected");var y=DayPilot.indexOf($i.rowlist,$x);var $M=[];for(var i=0;i<$i.itline.length;i++){var c={};c.x=i;c.y=y;$M.push(c);};$i.cells.findXy($M).removeClass(cl);var cl=$i.$c8("_rowheader_selected");var $6h=$i.divHeader;var r=$1N.$gn($x);if(r){for(var x=0;x<r.cells.length;x++){var c=r.cells[x];var $0N=c.firstChild;DayPilot.Util.removeClass($0N,cl);}}};$1N.$gd=null;$1N.clearSelection=function(){for(var j=0;j<$1N.selected.length;j++){var $x=$1N.selected[j];$1N.unselect($x);};$1N.selected=[];$i.selectedRows=[];};$1N.$gn=function($x){var $6h=$i.divHeader;for(var y=0;y<$6h.rows.length;y++){var r=$6h.rows[y];if(r&&r.cells[0]&&r.cells[0].row===$x){return r;}};return null;};$1N.selectById=function(id){var $x=$i.$bZ(id);if($x){$1N.select($x);}};$1N.startMoving=function($x){var $6q=DayPilot.Global.rowmoving;$6q.row=$x;$6q.sourceCalendar=$i;$6q.cursor=$i.divResScroll.style.cursor;$i.divResScroll.style.cursor="move";$1N.createOverlay($x);};$1N.resetMoving=function(){$i.divResScroll.style.cursor=$6q.cursor;DayPilot.de($6q.div);$1N.deleteOverlay($6q.row);DayPilot.Global.rowmoving=$6q={};};$1N.move=function($l){var $1C=$l.source.$.row.resource;var $1D=$l.target.$.row.resource;var $w=$l.position;if($w==="forbidden"){return;};var $7a=$l.source.calendar.$gp.findParentArray($1C);if(!$7a){throw "Cannot find source node parent";};var $7c=DayPilot.indexOf($7a,$1C);$7a.splice($7c,1);var $7i=$7b.findParentArray($1D);if(!$7i){throw "Cannot find target node parent";};var $7j=DayPilot.indexOf($7i,$1D);switch($w){case "before":$7i.splice($7j,0,$1C);break;case "after":$7i.splice($7j+1,0,$1C);break;case "child":if(!$1D.children){$1D.children=[];$1D.expanded=true;};$1D.children.push($1C);break;};$i.update();};var $7b={};this.$gp=$7b;$7b.findParentArray=function($1O){return $7b.findInArray($i.resources,$1O);};$7b.findInArray=function($46,$1O){if(DayPilot.indexOf($46,$1O)!==-1){return $46;};for(var i=0;i<$46.length;i++){var r=$46[i];if(r.children&&r.children.length>0){var parent=$7b.findInArray(r.children,$1O);if(parent){return parent;}}};return null;};this.$bs=function(){this.rowlist=DayPilot.list();var $7k=this.resources;var $7l=this.$cm();if(!$7l){if(this.viewType==="Gantt"){$7k=this.$gq();}else if(this.viewType==="Days"){$7k=this.$gr();}};if($7l&&this.viewType==="Days"&&(!$7k||$7k.length===0)){$7k=this.$gr();};var $1B={};$1B.i=0;if($7k!=null&&!DayPilot.isArray($7k)){throw "DayPilot.Scheduler.resources expects an array object";};this.$gs($7k,$1B,0,null,this.treeEnabled,false);var $7m=$i.rowCreateHandling!=="Disabled";if($7m){this.$gt();}};this.$gt=function(){var r={};r.id="NEW";r.isNewRow=true;r.html="";r.index=$i.rowlist.length;r.loaded=true;r.start=this.startDate;r.children=[];r.height=$i.eventHeight;r.marginBottom=0;r.marginTop=0;r.getHeight=function(){if($i.rowCreateHeight){return $i.rowCreateHeight;};return $i.eventHeight+$i.rowMarginBottom+$i.rowMarginTop;};r.putIntoLine=function(){};r.resetEvents=function(){};this.rowlist.push(r);};this.$gq=function(){var $Y=[];if(this.$be&&this.resources){for(var i=0;i<this.resources.length;i++){$Y.push(this.resources[i]);}};if(!this.events.list){return;};for(var i=0;i<this.events.list.length;i++){var e=this.events.list[i];var r={};r.id=e.id;r.name=e.text;$Y.push(r);};return $Y;};this.$gr=function(){var $Y=[];var $K=$i.$cs();var $7n=this.$dp.locale();for(var i=0;i<this.days;i++){var d=$K.addDays(i);if(!$i.showNonBusiness&&!$i.businessWeekends){if(d.dayOfWeek()==0||d.dayOfWeek()==6){continue;}};var r={};r.name=d.toString($7n.datePattern,$7n);r.start=d;$Y.push(r);};return $Y;};this.$cs=function(){if(this.itline&&this.itline.length>0){return this.itline[0].start;};return this.startDate;};this.$cx=function(){if(this.itline&&this.itline.length>0){var end=$i.itline[this.itline.length-1].end;if($i.viewType!=="Days"){return end;};return end.addDays($i.days-1);};return $i.startDate.addDays($i.days);};this.visibleStart=function(){return this.$cs();};this.visibleEnd=function(){return this.$cx();};this.$gj=function($1O,parent){var $x={};$x.backColor=$1O.backColor;$x.fontColor=$1O.fontColor;$x.cssClass=$1O.cssClass;$x.expanded=$1O.expanded;$x.name=$1O.name;$x.html=$1O.html?$1O.html:$x.name;$x.eventHeight=typeof $1O.eventHeight!=='undefined'?$1O.eventHeight:$i.$dp.eventHeight();$x.minHeight=typeof $1O.minHeight!=='undefined'?$1O.minHeight:$i.rowMinHeight;$x.marginBottom=typeof $1O.marginBottom!=='undefined'?$1O.marginBottom:$i.rowMarginBottom;$x.marginTop=typeof $1O.marginTop!=='undefined'?$1O.marginTop:$i.rowMarginTop;$x.eventStackingLineHeight=typeof $1O.eventStackingLineHeight!=='undefined'?$1O.eventStackingLineHeight:$i.eventStackingLineHeight;$x.loaded=!$1O.dynamicChildren;$x.id=$1O.id||$1O.value;$x.toolTip=$1O.toolTip;$x.children=[];$x.columns=[];$x.start=$1O.start?new DayPilot.Date($1O.start):this.$cs();$x.isParent=$1O.isParent;$x.contextMenu=$1O.contextMenu?DayPilot.Util.evalVariable($1O.contextMenu):this.contextMenuResource;$x.areas=$1O.areas;$x.moveDisabled=$1O.moveDisabled;$x.bubbleHtml=$1O.bubbleHtml;$x.tags=$1O.tags;$x.task=$1O.task;$x.swimlane=$1O.swimlane;$x.hideEvents=$1O.hideEvents;$x.height=$x.eventHeight;$x.resource=$1O.$gu;$x.lines=[];$x.blocks=[];$x.isRow=true;$x.getHeight=function(){var $R=0;if($i.groupConcurrentEvents){for(var i=0;i<this.blocks.length;i++){var $6G=this.blocks[i];$R=Math.max($R,$6G.getHeight());}}else{if(this.lines.length>0){var $0H=this.lines.length-1;var $0x=this.lines[$0H];var $7o=$0x.height||this.eventHeight;var top=$0x.top||0;$R=top+$7o;}};if($R===0){$R=this.eventHeight;};return($R>this.minHeight)?$R:this.minHeight;};$x.resetEvents=function(){var r=this;r.events=DayPilot.list();r.events.forRange=function($K,end){$K=new DayPilot.Date($K);end=new DayPilot.Date(end);var $j=DayPilot.list();for(var i=0;i<r.events.length;i++){var ev=r.events[i];if(DayPilot.Util.overlaps(ev.start(),ev.end(),$K,end)){$j.push(ev);}};return $j;};};$x.calculateUtilization=function(){var r=this;var $7p=r.sections=getSections();for(var i=0;i<$7p.length;i++){var $04=$7p[i];$04.events=DayPilot.list();for(var x=0;x<r.events.length;x++){var e=r.events[x];if(DayPilot.Util.overlaps($04.start,$04.end,e.start(),e.rawend())){$04.events.push(e);}};$04.sum=function(name){var $7q=0;for(var i=0;i<this.events.length;i++){var e=this.events[i];var $7r=0;if(typeof name==="undefined"){$7r=1;}else if(e.tag(name)){$7r=e.tag(name);}else if(e.data[name]){$7r=e.data[name];};if(typeof $7r==='number'){$7q+=$7r;}};return $7q;}};function getPoints(){var $7s=[];for(var i=0;i<r.events.length;i++){var e=r.events[i];if(!DayPilot.contains($7s,e.start().toString())){$7s.push(e.start().toString());};if(!DayPilot.contains($7s,e.rawend().toString())){$7s.push(e.rawend().toString());}};$7s.sort();return $7s;};function getSections(){var $7s=getPoints();var $7p=[];var $04={"start":r.data.start};for(var i=0;i<$7s.length;i++){$04.end=new DayPilot.Date($7s[i]);$7p.push($04);$04={"start":new DayPilot.Date($7s[i])};};$04.end=r.data.end;$7p.push($04);$7p.forRange=function($K,end){var $Y=DayPilot.list();for(var i=0;i<this.length;i++){var $04=this[i];if(DayPilot.Util.overlaps($K,end,$04.start,$04.end)){$Y.push($04);}};$Y.maxSum=function(name){var $z=0;for(var i=0;i<this.length;i++){var $04=this[i];var $7q=$04.sum(name);if($7q>$z){$z=$7q;}};return $z;};return $Y;};return $7p;}};$x.putIntoLine=function(ep){var $7t=this;for(var i=0;i<this.lines.length;i++){var $0x=this.lines[i];if($0x.isFree(ep.part.left,ep.part.width)){$0x.add(ep);return i;}};var $0x=[];$0x.height=0;$0x.add=function(ep){this.push(ep);var $6N=ep.part.$ga();if($6N>$0x.height){$0x.height=$6N;}};$0x.isFree=function($7u,$7v,$5z){var end=$7u+$7v-1;var $z=this.length;for(var i=0;i<$z;i++){var e=this[i];if(!(end<e.part.left||$7u>e.part.left+e.part.width-1)){if(DayPilot.contains($5z,e.data)){continue;};return false;}};return true;};$0x.add(ep);this.lines.push($0x);return this.lines.length-1;};$x.putIntoBlock=function(ep){for(var i=0;i<this.blocks.length;i++){var $6G=this.blocks[i];if(DayPilot.indexOf($6G.events,ep)!==-1){return;};if($6G.overlapsWith(ep.part.left,ep.part.width)){$6G.events.push(ep);ep.part.block=$6G;$6G.min=Math.min($6G.min,ep.part.left);$6G.max=Math.max($6G.max,ep.part.left+ep.part.width);return i;}};var $6G={};$6G.expanded=false;$6G.row=this;$6G.events=DayPilot.list();$6G.lines=DayPilot.list();$6G.putIntoLine=function(ep){var $7w=this;for(var i=0;i<this.lines.length;i++){var $0x=this.lines[i];if($0x.isFree(ep.part.left,ep.part.width)){$0x.add(ep);return i;}};var $0x=[];$0x.height=0;$0x.add=function(ep){this.push(ep);if(ep.part.height>$0x.height){$0x.height=ep.part.height;}};$0x.isFree=function($K,$A){var end=$K+$A-1;var $z=this.length;for(var i=0;i<$z;i++){var e=this[i];if(!(end<e.part.left||$K>e.part.left+e.part.width-1)){return false;}};return true;};$0x.add(ep);this.lines.push($0x);};$6G.overlapsWith=function($K,$A){var end=$K+$A-1;if(!(end<this.min||$K>this.max-1)){return true;};return false;};$6G.getHeight=function(){if(!this.expanded){return $i.eventHeight;};if(this.lines.length>0){var $0H=this.lines.length-1;var $0x=this.lines[$0H];var $7o=$0x.height||$i.eventHeight;var top=$0x.top||0;return top+$7o;}else{return $i.eventHeight;}};$6G.clear=function(){$6G.events=DayPilot.list();$6G.min=null;$6G.max=null;};$6G.events.push(ep);ep.part.block=$6G;$6G.min=ep.part.left;$6G.max=ep.part.left+ep.part.width;this.blocks.push($6G);};$x.$gv=false;$x.$gw=parent;$x.$gx=function(){this.hidden=!this.$gy();this.$gv=false;if(this.$gw){this.$gw.$gx();}};$x.$gy=function(){if(!this.$gw){return true;};return this.$gw.$gy()&&this.$gw.expanded;};if($1O.columns){for(var j=0;j<$1O.columns.length;j++){$x.columns.push($1O.columns[j]);}};return $x;};this.$dq=function(){$i.rowlist.each(function($x){if(typeof $i.onRowFilter==="function"&&$i.rows.$eH){var parent=$x.$gw;var $l={};$l.visible=true;$l.row=$i.$dV($x);$l.filter=$i.rows.$eH;$i.onRowFilter($l);$x.$gv=!$l.visible;if(!$l.visible){$x.hidden=true;}else{if(parent){parent.$gx();}}}});};this.$gs=function($7k,$1B,$78,parent,$7x,$7y){if(!$7k){return;};for(var i=0;i<$7k.length;i++){if(!$7k[i]){continue;};var $7z={};$7z.level=$78;$7z.hidden=$7y;$7z.index=$1B.i;if($7k[i].hidden){continue;};var $1O=this.$gi($7k[i],$7z);var $x=$i.$gj($1O,parent);if($7y){$x.hidden=true;};$x.level=$78;$x.index=$1B.i;if(parent!==null){parent.children.push($1B.i);};this.rowlist.push($x);$1B.i++;if($7x&&$1O.children&&$1O.children.length){var $7A=$7y||!$x.expanded;this.$gs($1O.children,$1B,$78+1,$x,true,$7A);}}};this.$gz=['html','backColor','cssClass','areas','horizontalAlignment'];this.$fw=function($x){if($x.isNewRow){return{"row":{"cssClass":$i.$c8("_row_new"),"moveDisabled":true,"html":$i.rowCreateHtml||""}};};var $l={};$l.row=this.$dV($x);DayPilot.Util.copyProps($x,$l.row,['html','backColor','fontColor','cssClass','toolTip','contextMenu','moveDisabled']);$l.row.columns=DayPilot.Util.createArrayCopy($x.columns,$i.$gz);$l.row.areas=DayPilot.Util.createArrayCopy($x.areas);if(typeof $l.row.columns==='undefined'&&$i.rowHeaderColumns&&$i.rowHeaderColumns.length>0){r.columns=[];for(var i=0;i<$i.rowHeaderColumns.length;i++){r.columns.push({});}};if(typeof this.onBeforeRowHeaderRender==="function"){this.onBeforeRowHeaderRender($l);};return $l;};this.$gi=function($1O,$7z){var r=this.$gA($1O,$7z);if(typeof this.onBeforeResHeaderRender==='function'){var $l={};$l.resource=r;this.onBeforeResHeaderRender($l);};return r;};this.$gA=function($1O,$7z){var r={get $q(){return this.$gu;}};for(var name in $7z){r[name]=$7z[name];};for(var name in $1O){r[name]=$1O[name];};if(typeof $1O.html==='undefined'){r.html=$1O.name;};if(typeof r.columns==='undefined'&&$i.rowHeaderColumns&&$i.rowHeaderColumns.length>0){r.columns=[];for(var i=0;i<$i.rowHeaderColumns.length;i++){r.columns.push({});}};r.$gu=$1O;return r;};this.$gB=function(){this.$gC();this.nav.top.dp=this;this.nav.top.innerHTML="";DayPilot.Util.addClass(this.nav.top,this.$c8("_main"));this.nav.top.setAttribute("role","region");this.nav.top.setAttribute("aria-label","scheduler");if(DayPilot.browser.ie9){DayPilot.Util.addClass(this.nav.top,this.$c8("_browser_ie9"));};if(DayPilot.browser.ie8){DayPilot.Util.addClass(this.nav.top,this.$c8("_browser_ie8"));};this.nav.top.style.MozUserSelect='none';this.nav.top.style.KhtmlUserSelect='none';this.nav.top.style.webkitUserSelect='none';this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)";this.nav.top.style.WebkitTouchCallout="none";if(this.width){this.nav.top.style.width=this.width;};if(this.heightSpec==="Parent100Pct"){this.nav.top.style.height="100%";};this.nav.top.style.lineHeight="1.2";this.nav.top.style.position="relative";if(!this.visible){this.nav.top.style.display="none";};this.nav.top.onmousemove=this.$gD;this.nav.top.onmouseout=function(){$i.$fj();};this.nav.top.ontouchstart=$7B.onMainTouchStart;this.nav.top.ontouchmove=$7B.onMainTouchMove;this.nav.top.ontouchend=$7B.onMainTouchEnd;if(this.hideUntilInit&&this.backendUrl){this.nav.top.style.visibility='hidden';};var $3R=this.$ce();var $7C=this.$dp.layout();if($7C==='DivBased'){var $N=document.createElement("div");$N.style.position="absolute";$N.style.left="0px";$N.style.width=($3R)+"px";$N.appendChild(this.$gE());var $7D=document.createElement("div");$7D.style.height="1px";$7D.className=this.$c8("_divider_horizontal");$N.appendChild($7D);this.nav.dh1=$7D;$N.appendChild(this.$gF());this.nav.left=$N;var $7E=document.createElement("div");$7E.style.position="absolute";$7E.style.left=($3R)+"px";$7E.style.width=$0d.splitterWidth()+"px";$7E.style.height=(this.$cd()+this.$cj())+"px";$7E.className=this.$c8("_divider")+" "+this.$c8("_splitter");$7E.setAttribute("unselectable","on");this.nav.divider=$7E;if(this.rowHeaderScrolling){this.$gG();};var $O=document.createElement("div");$O.style.marginLeft=($3R+$0d.splitterWidth())+"px";$O.style.marginRight='1px';$O.style.position='relative';$O.appendChild(this.$gH());this.nav.right=$O;var $7F=document.createElement("div");$7F.style.height="1px";$7F.style.position="absolute";$7F.style.top=this.$cd()+"px";$7F.style.width="100%";$7F.className=this.$c8("_divider_horizontal");$O.appendChild($7F);this.nav.dh2=$7F;$O.appendChild(this.$gI());var $7G=document.createElement("div");$7G.style.clear='left';this.nav.top.appendChild($N);this.nav.top.appendChild($7E);this.nav.top.appendChild($O);this.nav.top.appendChild($7G);}else{var $6h=document.createElement("table");$6h.cellPadding=0;$6h.cellSpacing=0;$6h.border=0;$6h.style.position='absolute';var $7H=$6h.insertRow(-1);var $7I=$7H.insertCell(-1);$7I.appendChild(this.$gE());var $7J=$7H.insertCell(-1);$7J.appendChild(this.$gH());var $7K=$6h.insertRow(-1);var $7L=$7K.insertCell(-1);$7L.appendChild(this.$gF());var $7M=$7K.insertCell(-1);$7M.appendChild(this.$gI());this.nav.top.appendChild($6h);};this.$bp=document.createElement("div");this.$bp.style.display="none";this.nav.top.appendChild(this.$bp);if(this.$ed()){var $7N=document.createElement("input");$7N.type="hidden";$7N.id=this.id+"_state";$7N.name=this.id+"_state";this.nav.state=$7N;this.nav.top.appendChild($7N);};var $6e=5;var loading=document.createElement("div");loading.style.position='absolute';loading.style.left=(this.$ce()+$0d.splitterWidth()+5)+"px";loading.style.top=(this.$cd()+5)+"px";loading.style.display='none';loading.innerHTML=this.loadingLabelText;DayPilot.Util.addClass(loading,this.$c8("_loading"));this.nav.loading=loading;this.nav.top.appendChild(loading);this.$gJ();};this.$gD=function(ev){if($6q.row){var $23=DayPilot.mo3($i.divHeader,ev);var ri=$i.$em($23.y);var $x=$i.rowlist[ri.i];if(!$x){return;};if($x.isNewRow){return;};var $7O=$23.y-ri.top;var $7P=ri.bottom-ri.top;var $7Q=$7P/3;var $7R=$7Q*2;var $2k=$7P/2;var $w="before";var $7S=$x.children&&$x.children.length>0;var $7T=(function(){var i=ri.i;var $7U=$x.level;while(i>=0){var r=$i.rowlist[i];i--;if($7U<=r.level){continue;};if(r===$6q.row){return true;};if(r.level===0){return false;};$7U=r.level;};return false;})();var $7V=$i.treeEnabled;if($7T||ri.i===$6q.row.index){$w="forbidden";}else if($7V){if($7S){if($7O<$2k){$w="before";}else{$w="child";}}else{if($7O<$7Q){$w="before";}else if($7O<$7R){$w="child";}else{$w="after";}}}else{if($7S){$w="before";}else{if($7O<$2k){$w="before";}else{$w="after";}}};if($6q.row.moveDisabled){$w="forbidden";};$6q.calendar=$i;$6q.source=$6q.row;$6q.target=$i.rowlist[ri.i];$6q.position=$w;var $7W=(function(){if(!$6q.last){return true;};if($6q.last.target!==$6q.target){return true;};if($6q.last.position!==$6q.position){return true;};return false;})();if($7W){if(typeof $i.onRowMoving==='function'){var $l={};$l.source=$i.$dV($6q.source);$l.target=$i.$dV($6q.target);$l.position=$w;$i.onRowMoving($l);$6q.position=$l.position;}}else if($6q.last){$6q.position=$6q.last.position;};$6q.last={};$6q.last.target=$6q.target;$6q.last.position=$6q.position;(function drawRowPosition(){if($6q.div){DayPilot.de($6q.div);};var top=ri.top;var $G=$6q.position;var ro=$i.rowlist[ri.i];var $78=ro.level;var $N=$78*$i.treeIndent;switch($G){case "before":top=ri.top;break;case "child":top=ri.top+$2k;break;case "after":top=ri.bottom;break;case "forbidden":top=ri.top+$2k;break;};var $A=$i.$fL()-$N;var $w=document.createElement("div");$w.style.position="absolute";$w.style.left=$N+"px";$w.style.width=$A+"px";$w.style.top=top+"px";$w.className=$i.$c8("_rowmove_position_"+$G);$6q.div=$w;$i.divResScroll.appendChild($w);})();}else if(DayPilotScheduler.splitting){var $A=DayPilot.mo3($i.nav.top,ev).x;var $z=$i.$fL();var $5S=Math.min($z,$A-1);$i.rowHeaderWidth=$5S;$i.$gg=false;$i.$gh();}};this.$bB=function(){var $R=this.$cd();this.nav.corner.style.height=($R)+"px";this.divTimeScroll.style.height=$R+"px";this.divNorth.style.height=$R+"px";if(this.nav.dh1&&this.nav.dh2){this.nav.dh1.style.top=$R+"px";this.nav.dh2.style.top=$R+"px";};this.nav.loading.style.top=($R+5)+"px";this.nav.scroll.style.top=($R+1)+"px";};this.$ce=function(){if(this.$gg){return 0;};var $j=0;var $7X=this.rowHeaderScrolling;if($7X){$j=this.rowHeaderWidth;}else{$j=this.$fL();};return $j;};this.$gG=function(){var $02=this.nav.divider;$02.style.cursor="col-resize";$02.setAttribute("unselectable","on");$02.onmousedown=function(ev){var $7Y=DayPilotScheduler.splitting={};$7Y.cursor=$i.nav.top.style.cursor;$7Y.cleanup=function(){$i.nav.top.style.cursor=$7Y.cursor;if(typeof $i.onRowHeaderResized==="function"){var $l={};$i.onRowHeaderResized($l);}};$i.nav.top.style.cursor="col-resize";return false;};};this.$gh=function(){var $7Z=$0d.splitterWidth();var $A=this.$ce();this.nav.corner.style.width=$A+"px";this.divCorner.style.width=$A+"px";this.divResScroll.style.width=$A+"px";if($0d.layout()==="DivBased"){this.nav.left.style.width=($A)+"px";this.nav.divider.style.left=($A-$7Z)+"px";this.nav.right.style.marginLeft=($A)+"px";};if(this.nav.message){this.nav.message.style.left=($A+$7Z)+"px";};if(this.nav.loading){this.nav.loading.style.left=($A+$7Z+5)+"px";};if(this.nav.hideIcon){var hi=this.nav.hideIcon;var $80=$i.$c8("_header_icon_show");var $81=$i.$c8("_header_icon_hide");hi.style.left=($A-1)+"px";if($i.$gg){DayPilot.Util.removeClass(hi,$81);DayPilot.Util.addClass(hi,$80);}else{DayPilot.Util.removeClass(hi,$80);DayPilot.Util.addClass(hi,$81);}}};this.$gK=function(){this.$fM();var $0g=this.$fL();var $82=function($P,$A,$N){if(!$P||!$P.style){return;};var $02=$P.firstChild;if($i.$fS){$P.style.width=$A+"px";$02.style.width=$A+"px";if(typeof $N==="number"){$P.style.left=$N+"px";}}else{$02.style.width=$A+"px";}};var $6h=this.divHeader;$6h.style.width=$0g+"px";var $1t=$i.$fN();for(var i=$1t.start;i<$1t.end;i++){var $x=$6h.rows[i];if(!$x){continue;};var $P=$x.cells[0];if($P.colSpan>1){var $P=$x.cells[0];$82($P,$0g);}else{if(this.rowHeaderCols){var $N=0;for(var j=0;j<$x.cells.length;j++){var $A=this.rowHeaderCols[j];var $P=$x.cells[j];$82($P,$A,$N);$N+=$A;}}else{var $A=this.rowHeaderWidth;var $P=$x.cells[0];$82($P,$A);}}};if($i.nav.resScrollSpace){$i.nav.resScrollSpace.style.width=$0g+"px";};this.$gL();};this.$dm=function(){this.$gh();this.$gK();};this.$gM=function(){var $02=$i.nav.corner;var $06=this.rowHeaderColumns;var scroll=document.createElement("div");scroll.style.position="absolute";scroll.style.bottom="0px";scroll.style.left="0px";scroll.style.width="100%";scroll.style.height=$0d.headerHeight()+"px";scroll.style.overflow="hidden";$i.nav.columnScroll=scroll;var $x=document.createElement("div");$x.style.position="absolute";$x.style.bottom="0px";$x.style.left="0px";$x.style.width="5000px";$x.style.height=$0d.headerHeight()+"px";$x.style.overflow="hidden";$x.className=this.$c8("_columnheader");scroll.appendChild($x);var $05=document.createElement("div");$05.style.position="absolute";$05.style.top="0px";$05.style.bottom="0px";$05.style.left="0px";$05.style.right="0px";$05.className=this.$c8("_columnheader_inner");$x.appendChild($05);if($i.$eu){$i.$eu.dispose();$i.$eu=null;};var $83=new DayPilot.Splitter($05);$83.widths=DayPilot.Util.propArray($06,"width",$i.rowHeaderColumnDefaultWidth);$83.height=$0d.headerHeight();$83.css.title=this.$c8("_columnheader_cell");$83.css.titleInner=this.$c8("_columnheader_cell_inner");$83.css.splitter=this.$c8("_columnheader_splitter");$83.titles=DayPilot.list($06).map(function($4L){return $4L.html||$4L.name||$4L.title||"";});$83.updating=function($l){DayPilot.Util.updatePropsFromArray($i.rowHeaderColumns,"width",this.widths);$i.$dm();if($i.cellWidthSpec==="Auto"){}};$83.updated=function($84){$i.$fR();if($i.$bQ()){if(typeof $i.onRowHeaderColumnResized==="function"){var $l={};$l.column=$i.rowHeaderColumns[$84.index];$i.onRowHeaderColumnResized($l);}}else{switch($i.rowHeaderColumnResizedHandling){case "CallBack":break;case "PostBack":break;case "JavaScript":if(typeof $i.onRowHeaderColumnResized==="function"){var $l={};$l.column=$i.rowHeaderColumns[$84.index];$i.onRowHeaderColumnResized($l);};break;}}};$83.color='#000000';$83.opacity=30;$83.init();$02.appendChild(scroll);this.$eu=$83;};this.$ds=function(){var $02=this.nav.corner;$02.innerHTML='';$02.className=this.$c8('_corner');var $05=document.createElement("div");$05.style.position="absolute";$05.style.top="0px";$05.style.left="0px";$05.style.right="0px";$05.style.bottom="0px";$05.className=this.$c8('_corner_inner');this.divCorner=$05;$05.innerHTML='&nbsp;';if(this.rowHeaderColumns&&this.rowHeaderColumns.length>0){var $85=document.createElement("div");$85.style.position="absolute";$85.style.top="0px";$85.style.left="0px";$85.style.right="0px";$85.style.bottom=($0d.headerHeight()+1)+"px";$02.appendChild($85);var $7E=document.createElement("div");$7E.style.position="absolute";$7E.style.left="0px";$7E.style.right="0px";$7E.style.height="1px";$7E.style.bottom=($0d.headerHeight())+"px";$7E.className=this.$c8("_divider");$02.appendChild($7E);$85.appendChild($05);this.$gM();}else{$02.appendChild($05);};var $86=document.createElement("div");$86.style.position='absolute';$86.style.padding='2px';$86.style.top='0px';$86.style.left='1px';$86.style.backgroundColor="#FF6600";$86.style.color="white";$86.innerHTML="\u0044\u0045\u004D\u004F";if(DayPilot.Util.isNullOrUndefined("K5woOes"))$02.appendChild($86);};this.$gJ=function(){var $87=3;var $N=this.$ce()+$0d.splitterWidth()-1;var $A=10;var $R=20;var top=this.$cd()+$87;var $02=DayPilot.Util.div(this.nav.top,$N,top,$A,$R);$02.style.cursor="pointer";$02.className=$i.$c8("_header_icon");DayPilot.Util.addClass($02,$i.$c8("_header_icon_hide"));$02.onclick=function(){$i.rows.headerToggle();};this.nav.hideIcon=$02;};this.$dt=function(){if(!$i.nav.hideIcon){return;};if($i.rowlist.length>0&&$i.rowHeaderHideIconEnabled){$i.nav.hideIcon.style.display='';}else{$i.nav.hideIcon.style.display='none';}};this.$gE=function(){var $3R=this.$ce();var $02=document.createElement("div");$i.nav.corner=$02;$02.style.width=$3R+"px";$02.style.height=(this.$cd())+"px";$02.style.overflow='hidden';$02.style.position='relative';$02.setAttribute("unselectable","on");$02.onmousemove=function(){$i.$fT();};$02.oncontextmenu=function(){return false;};this.$ds();return $02;};this.$cd=function(){if($i.timeHeaders){var $0H=$4S.timeHeader($i.timeHeaders.length-1);return $0H.top+$0H.height;}else if(this.timeHeader){return $i.timeHeader.length*$0d.headerHeight();}else{return 0;}};this.$gN=null;this.$gO=function(){return $i.scrollStep||$i.eventHeight;};this.$gF=function(){var $02=document.createElement("div");$02.style.width=(this.$ce())+"px";$02.style.height=this.$cj()+"px";$02.style.overflow='hidden';$02.style.position='relative';$02.className=$i.$c8("_rowheader_scroll");var $F=$i.$gO();var $88=navigator.userAgent.indexOf("Mobile")!==-1;if($88){$02.style.overflowY="auto";};$02.onmousemove=function(){$i.$fT();};$02.onscroll=function(){if($i.nav.columnScroll&&$i.rowHeaderScrolling){$i.nav.columnScroll.scrollLeft=$02.scrollLeft;};if($i.$gN){clearTimeout($i.$gN);};if($88){var $89=$i.$fn()-$i.nav.scroll.offsetHeight;$02.scrollTop=Math.min($02.scrollTop,$89);$i.nav.scroll.scrollTop=$02.scrollTop;}else{$i.$gN=setTimeout(function(){$i.nav.scroll.scrollTop=$02.scrollTop;},500);}};$02.addEventListener("wheel",function(ev){var $5Q;if($i.overrideWheelScrolling){$5Q=ev.deltaY>0?$F:-$F;}else{$5Q=ev.deltaY;};$i.nav.scroll.scrollTop=$02.scrollTop+$5Q;ev.preventDefault&&ev.preventDefault();},false);$02.oncontextmenu=function(){return false;};$02.onmouseenter=function(){if($i.rowHeaderScrolling){$02.style.overflowX="auto";}};$02.onmouseleave=function(){if($i.rowHeaderScrolling){$02.style.overflowX="hidden";}};$02.setAttribute("role","region");$02.setAttribute("aria-label","scheduler rows");this.divResScroll=$02;this.$ck=$02;return $02;};this.$gP=function($02){if($0d.layout()==='TableBased'){var $A=parseInt(this.width,10);var $8a=isNaN($A)||(this.width.indexOf("%")!==-1);var $8b=/MSIE/i.test(navigator.userAgent);var $3R=this.$fL();if($8a){if(this.nav.top&&this.nav.top.offsetWidth>0){$02.style.width=(this.nav.top.offsetWidth-6-$3R)+"px";}}else{$02.style.width=($A-$3R)+"px";}}};this.$ev=function(ev){$i.$bz();$i.$bP();};this.$bz=function(){if($i.$dp.layout()==='TableBased'){$i.$gP($i.nav.scroll);$i.$gP($i.divTimeScroll);};$i.$bC();$i.$fR();$i.$gQ();$i.$bg.drawArea=null;};this._wd=null;this.$et=null;this.$gR=function(){if(!$i.watchWidthChanges){return;};if($i.$et){return;};this.$et=setInterval(function(){if(!$i.nav||!$i.nav.top){clearInterval($i.$et);return;};if(!$i._wd){$i._wd={};$i._wd.counter=0;$i._wd.changed=false;$i._wd.width=$i.nav.top.offsetWidth;};if($i._wd.width!==$i.nav.top.offsetWidth){$i._wd.changed=true;$i._wd.counter=0;$i._wd.width=$i.nav.top.offsetWidth;};if($i._wd.changed){$i._wd.counter+=1;};if($i._wd.changed&&$i._wd.counter>2){$i._wd.changed=false;$i.$bz();$i.$bP();}},20);};this.$gQ=function(){var $1t=$i.rangeHold;$i.clearSelection();$i.rangeHold=$1t;$i.$dP($1t,true);};this.$fR=function(){if(!$i.$bT){return;};if($i.cellWidthSpec!=='Auto'){return;};$i.$bq();$i.$br();$i.$bw();$i.$bD();$i.$bH();$i.$bF();$i.$bI();$i.$bE();$i.$bu();$i.$bJ();$i.$bC();};this.$bq=function(){if(this.cellWidthSpec!=='Auto'){return;};var $0g=this.nav.top.clientWidth;var $8c=this.$ce();var $8d=$i.$gS();var $1j=$0g-$8c-$8d;var $8e=this.$fq();if(!$8e){return;};var $P=$1j/this.$fq();this.cellWidth=Math.max($P,$i.cellWidthMin);$i.$ci=$P<$i.cellWidthMin;};this.$gS=function(){if($i.heightSpec==="Auto"){return 0;};if($i.heightSpec==="Max"||$i.heightSpec==="Fixed"||$i.heightSpec==="Parent100Pct"){var $05=$i.$fn();if($05>$i.height){return DayPilot.sw($i.nav.scroll);}else{return 0;}};return DayPilot.sw($i.nav.scroll);};this.$co=function(){var $0g=this.nav.top.clientWidth;var $8c=this.$ce();var $8f=2;var $R=this.$cj();var innerHeight=this.$fn();var $8g=$i.heightSpec==="Auto";var $8h=0;if(innerHeight>$R&&!$8g){$8h=DayPilot.swa();};var $1j=$0g-$8c-$8f-$8h;return $1j;};this.$gH=function(){var $02=document.createElement("div");$02.style.overflow='hidden';$02.style.position='absolute';$02.style.display='block';$02.style.top="0px";$02.style.width="100%";$02.style.height=this.$cd()+"px";$02.style.overflow="hidden";$02.onmousemove=function(){$i.$fT();if($i.cellBubble){$i.cellBubble.delayedHide();}};this.$gP($02);this.divTimeScroll=$02;var $05=document.createElement("div");$05.style.width=(this.$fq()*this.cellWidth+5000)+"px";this.divNorth=$05;$02.appendChild($05);return $02;};this.$cj=function(){var $R=0;var $8i=$i.heightSpec;if($8i==='Fixed'||$8i==="Parent100Pct"){return this.height?this.height:0;}else{$R=$i.$fn();};var $8j=$8i==="Max"||$8i==="Max100Pct";if($8j&&$R>$i.height){return $i.height;};return $R;};this.$gT=null;this.$gU=0;this.$gV=0;this.$gW=0;this.$cl=function(){if(typeof $i.onHeightChanged!=="function"&&typeof $i.onDimensionsChanged!=="function"){return;};if($i.$gT){clearTimeout($i.$gT);};var $14=function(){var $8k=$i.nav.top.offsetHeight;var $8l=$i.$gU;$i.$gU=$8k;var $5S=$i.nav.top.offsetWidth;var $5N=$i.$gV;$i.$gV=$5S;var $8m=$i.$ce();var $8n=$i.$gW;$i.$gW=$8m;if(typeof $i.onHeightChanged==="function"){if($8k!==$8l){var $l={};$l.oldHeight=$8l;$l.newHeight=$8k;$i.onHeightChanged($l);}};if(typeof $i.onDimensionsChanged==="function"){if($8k!==$8l||$5S!==$5N||$8m!==$8n){var $l={};$l.oldHeight=$8l;$l.newHeight=$8k;$l.oldWidth=$5N;$l.newWidth=$5S;$l.oldRowHeaderWidth=$8n;$l.newRowHeaderWidth=$8m;$i.onDimensionsChanged($l);}}};$i.$gT=setTimeout($14,100);};this.$fn=function(){var $R;if(this.$bd!==-1){$R=this.$bd;if(this.$bd>0&&$i.nav.scroll.style.overflowX==="auto"){$R+=DayPilot.sh($i.nav.scroll);}}else{$R=this.rowlist.length*this.$dp.eventHeight();};return $R;};this.$fT=function(){this.$gL();this.$gX();this.$gY();this.$fJ();this.$fj();$i.cellBubble&&$i.cellBubble.hideOnMouseOut();$i.bubble&&$i.bubble.hideOnMouseOut();};this.$gI=function(){var $02=document.createElement("div");$02.style.overflow="auto";$02.style.overflowX="auto";$02.style.overflowY="auto";$02.style.position="absolute";$02.style.height=(this.$cj())+"px";$02.style.top=(this.$cd()+1)+"px";$02.style.width="100%";$02.className=this.$c8("_scrollable");$02.oncontextmenu=function(){return false;};this.$gP($02);if($i.overrideWheelScrolling){var scrollStep=$i.$gO();$02.onwheel=function(ev){var $5Q=ev.deltaY>0?scrollStep:-scrollStep;$i.nav.scroll.scrollTop=$02.scrollTop+$5Q;ev.preventDefault&&ev.preventDefault();};$02.onmousewheel=function(ev){ev=ev||window.event;var $5Q=ev.wheelDelta<0?scrollStep:-scrollStep;$i.nav.scroll.scrollTop=$02.scrollTop+$5Q;ev.preventDefault&&ev.preventDefault();ev.returnValue=false;};};this.nav.scroll=$02;this.$bW=document.createElement("div");this.$bW.style.MozUserSelect="none";this.$bW.style.KhtmlUserSelect="none";this.$bW.style.webkitUserSelect="none";this.$bW.daypilotMainD=true;this.$bW.calendar=this;if($a){this.$bW.style.webkitTransform="translateZ(0px)";};this.$bW.style.position='absolute';var $8o=this.$cb();if($8o>0&&!isNaN($8o)){this.$bW.style.width=($8o)+"px";};this.$bW.setAttribute("unselectable","on");this.$bW.onmousedown=this.$gZ;this.$bW.onmousemove=this.$fK;this.$bW.onmouseup=this.$h0;this.$bW.oncontextmenu=this.$h1;this.$bW.ondblclick=this.$h2;this.$bW.className=this.$c8("_matrix");this.divStretch=document.createElement("div");this.divStretch.style.position='absolute';this.divStretch.style.height='1px';this.$bW.appendChild(this.divStretch);this.divCells=document.createElement("div");this.divCells.style.position='absolute';this.divCells.oncontextmenu=this.$h1;this.$bW.appendChild(this.divCells);this.divLines=document.createElement("div");this.divLines.style.position='absolute';this.divLines.oncontextmenu=this.$h1;this.$bW.appendChild(this.divLines);this.divBreaks=document.createElement("div");this.divBreaks.style.position='absolute';this.divBreaks.oncontextmenu=this.$h1;this.$bW.appendChild(this.divBreaks);this.divSeparators=document.createElement("div");this.divSeparators.style.position='absolute';this.divSeparators.oncontextmenu=this.$h1;this.$bW.appendChild(this.divSeparators);this.divLinksBelow=document.createElement("div");this.divLinksBelow.style.position="absolute";this.$bW.appendChild(this.divLinksBelow);this.divCrosshair=document.createElement("div");this.divCrosshair.style.position='absolute';this.divCrosshair.ondblclick=this.$h2;this.$bW.appendChild(this.divCrosshair);this.divRange=document.createElement("div");this.divRange.style.position='absolute';this.divRange.oncontextmenu=this.$h1;this.$bW.appendChild(this.divRange);this.divEvents=document.createElement("div");this.divEvents.style.position='absolute';this.$bW.appendChild(this.divEvents);this.divSeparatorsAbove=document.createElement("div");this.divSeparatorsAbove.style.position='absolute';this.divSeparatorsAbove.oncontextmenu=this.$h1;this.$bW.appendChild(this.divSeparatorsAbove);this.divLinksAbove=document.createElement("div");this.divLinksAbove.style.position="absolute";this.$bW.appendChild(this.divLinksAbove);this.divLinkShadow=document.createElement("div");this.divLinkShadow.style.position="absolute";this.$bW.appendChild(this.divLinkShadow);this.divLinkpoints=document.createElement("div");this.divLinkpoints.style.position="absolute";this.$bW.appendChild(this.divLinkpoints);this.divRectangle=document.createElement("div");this.divRectangle.style.position="absolute";this.$bW.appendChild(this.divRectangle);this.divHover=document.createElement("div");this.divHover.style.position='absolute';this.$bW.appendChild(this.divHover);this.divShadow=document.createElement("div");this.divShadow.style.position='absolute';this.$bW.appendChild(this.divShadow);$02.appendChild(this.$bW);return $02;};this.$h3={};var $15=this.$h3;$15.create=function(){if($i.nav.overlay){return;};var $02=document.createElement('div');$02.style.position="absolute";$02.style.left="0px";$02.style.right="0px";$02.style.top="0px";$02.style.bottom="0px";$02.className=$i.$c8("_block");$i.nav.top.appendChild($02);$i.nav.overlay=$02;};$15.show=function(){$15.create();$i.nav.overlay.style.display='';};$15.hide=function(){if($i.nav.overlay){$i.nav.overlay.style.display='none';}};this.$e9=function($8p){var $0c=$8p?0:100;if($i.loadingTimeout){window.clearTimeout($i.loadingTimeout);};$i.loadingTimeout=window.setTimeout(function(){if($i.loadingLabelVisible){$i.nav.loading.innerHTML=$i.loadingLabelText;$i.nav.loading.style.display='';};if($i.blockOnCallBack){$15.show();}},$0c);};this.$bk=function(){if(this.loadingTimeout){window.clearTimeout(this.loadingTimeout);};this.nav.loading.style.display='none';if(this.blockOnCallBack){$15.hide();}};this.loadingStart=function(){$i.$e9();};this.loadingStop=function(){$i.$bk();};this.uiBlock=function(){$15.show();};this.uiUnblock=function(){$15.hide();};this.$h4=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart();};this.$h5=function($8q){var $02=document.createElement("div");$02.style.position="absolute";$02.style.top="-2000px";$02.style.left="-2000px";$02.className=this.$c8($8q);document.body.appendChild($02);var $R=$02.offsetHeight;var $A=$02.offsetWidth;document.body.removeChild($02);var $j={};$j.height=$R;$j.width=$A;return $j;};this.$bl=function($8r){if($8r){this.autoRefreshEnabled=true;};if(!this.autoRefreshEnabled){return;};if(this.$b5>=this.autoRefreshMaxCount){return;};this.$e8();var $8s=this.autoRefreshInterval;if(!$8s||$8s<10){throw "The minimum autoRefreshInterval is 10 seconds";};this.autoRefreshTimeout=window.setTimeout(function(){$i.$h6();},this.autoRefreshInterval*1000);};this.$e8=function(){if(this.autoRefreshTimeout){window.clearTimeout(this.autoRefreshTimeout);this.autoRefreshTimeout=null;}};this.autoRefreshStart=function($8r){$i.$bl($8r);};this.autoRefreshPause=function(){$i.$e8();};this.$h7=function(){return !DayPilotScheduler.resizing&&!DayPilotScheduler.moving&&!DayPilotScheduler.drag&&!DayPilotScheduler.range;};this.$h6=function(){if($i.$h7()){var $5b=false;if(typeof this.onAutoRefresh==='function'){var $l={};$l.i=this.$b5;$l.preventDefault=function(){this.preventDefault.value=true;};$i.onAutoRefresh($l);if($l.preventDefault.value){$5b=true;}};if(!$5b&&this.$cm()){this.commandCallBack(this.autoRefreshCommand);};this.$b5++;};if(this.$b5<this.autoRefreshMaxCount){this.autoRefreshTimeout=window.setTimeout(function(){$i.$h6();},this.autoRefreshInterval*1000);}};this.$h8=function(){if(!DayPilotScheduler.globalHandlers){DayPilotScheduler.globalHandlers=true;DayPilot.re(document,'mousemove',DayPilotScheduler.gMouseMove);DayPilot.re(document,'mouseup',DayPilotScheduler.gMouseUp);DayPilot.re(document,'mousedown',DayPilotScheduler.gMouseDown);DayPilot.re(document,'touchmove',DayPilotScheduler.gTouchMove);DayPilot.re(document,'touchend',DayPilotScheduler.gTouchEnd);DayPilot.re(window,'keyup',DayPilotScheduler.gKeyUp);};DayPilot.re(window,'resize',this.$ev);};this.$h9=function(){this.nav.scroll.root=this;this.nav.scroll.onscroll=this.$bP;$i.$fr=this.nav.scroll.scrollLeft;$i.$fp=this.nav.scroll.scrollTop;$i.$fs=this.divNorth.clientWidth;};this.$bM=function(){if(!this.nav.state){return;};var $8t={};$8t.scrollX=this.nav.scroll.scrollLeft;$8t.scrollY=this.nav.scroll.scrollTop;var $J=$i.$ef($8t.scrollX,$8t.scrollY);var $1t=$i.$eg($J);var $1O=$i.$eh($J);$8t.rangeStart=$1t.start;$8t.rangeEnd=$1t.end;$8t.resources=$1O;if(this.syncResourceTree){$8t.tree=this.$ei();};this.nav.state.value=DayPilot.he(JSON.stringify($8t));};this.$bI=function(){if(!this.separators){return;};for(var i=0;i<this.separators.length;i++){this.$ha(i);}};this.$hb={};this.$hb.step=300;this.$hb.delay=10;this.$hb.mode="display";this.$hb.layers=false;this.$fu=function($x){if($i.$b8){$6D.calculateEventPositionsRow($x);return;};var $8u=true;var $6F=0;for(var j=0;j<$x.lines.length;j++){var $0x=$x.lines[j];$0x.height=0;$0x.top=$6F;for(var k=0;k<$0x.length;k++){var e=$0x[k];if(!e.part.top||$8u){e.part.line=j;if(!e.part.height){e.part.height=$x.eventHeight;};var $6N=e.part.$ga();if($6N>$0x.height){$0x.height=$6N;};e.part.top=$6F+$x.marginTop;var $2z=$i.eventVersionPosition==="Above";if($i.eventVersionsEnabled&&!DayPilot.list(e.data.versions).isEmpty()){var $0j=e.data.versions.length;var top=e.part.top;if(!$2z){top+=e.part.height+$i.eventVersionMargin;};DayPilot.list(e.data.versions).each(function($6S,i){if(!e.versions[i]){return;};var $0G=i*($i.eventVersionHeight+$i.eventVersionMargin);e.versions[i].top=top+$0G;if($2z){e.part.top+=$i.eventVersionHeight;e.part.top+=$i.eventVersionMargin;}});};e.part.top+=$i.eventMarginBottom;e.part.right=e.part.left+e.part.width;e.part.fullTop=this.rowlist[e.part.dayIndex].top+e.part.top;e.part.fullBottom=e.part.fullTop+e.part.height;}};$6F+=($0x.height||$x.eventHeight)*$x.eventStackingLineHeight/100;}};var $6D={};$6D.loadRow=function($x){$x.evColumns=DayPilot.list($i.itline).map(function($P,i){return{"events":DayPilot.list()};});DayPilot.list($x.events).each(function(e){var $K=e.start();var $P=$i.$cE($K);$x.evColumns[$P.i].events.push(e);});};$6D.calculateEventPositions=function(){var $8g=$i.$b9;var $5d=0;DayPilot.list($i.rowlist).each(function($x){var $0a=0;$x.evColumns.each(function($56,i){var $P=$i.itline[i];var top=$i.rowMarginTop;$56.events.each(function(e){e.part.left=$P.left;e.part.width=$P.width;e.part.top=top;if(!e.part.height){if($8g){e.part.height=$6D.getEventAutoHeight(e)+$i.durationBarHeight;}else{e.part.height=$x.eventHeight;}};top+=e.part.height+$i.eventMarginBottom;});$56.height=top;if($56.height>$0a){$0a=$56.height;}});$x.maxColumnHeight=$0a;$x.top=$5d;var $8v=$x.height;$x.height=$x.getHeight();if($0a>$i.rowMarginTop){$x.height=$0a+$i.rowMarginBottom;};if($8v!==$x.height){$i.$dy=true;};$5d+=$x.height;});$i.$bd=$5d;};$6D.getEventAutoHeight=function(e){var $0b=e.client.html();var $02=document.createElement("div");$02.style.position="absolute";$02.style.top="-2000px";$02.style.left="-2000px";$02.style.width=e.part.width+"px";$02.className=$i.$c8($07.event);var $05=document.createElement("div");$05.className=$i.$c8($07.eventInner);$05.innerHTML=$0b;$05.style.position='static';$05.style.overflow='auto';$02.appendChild($05);var parent=$i.divEvents;parent.appendChild($02);var $R=$02.offsetHeight;parent.removeChild($02);return $R;};$6D.calculateEventPositionsRow=function($x){$6D.calculateEventPositions();};$6D.drawEventsWithoutCheckingOverflow=function(){DayPilot.list($i.rowlist).each(function($x){$6D.drawEventsRow($x);});};$6D.drawEvents=function(){$6D.drawEventsWithoutCheckingOverflow();$6D.checkOverflow();$i.$bA();$i.$bC();};$6D.checkOverflow=function(){if(!$i.$b9){return;};var $8w=false;DayPilot.list($i.elements.events).each(function($02){var $05=$02.firstChild;var $8x=$05.offsetHeight-$05.clientHeight+$02.offsetHeight-$02.clientHeight;var $8y=$05.scrollHeight+$8x;var $8l=$02.event.part.height;$02.event.part.height=$8y;if($8l!==$8y){$8w=true;}});if($8w){$i.$bE();$6D.calculateEventPositions();$6D.drawEventsWithoutCheckingOverflow();$i.$bD();$i.$bH();}};$6D.drawEventsRow=function($x){$x.evColumns.each(function($56,i){$56.events.each(function(e){$i.$eP(e);});});};this.$bJ=function($1o){if($i.$bc){return;};if($i.$b8){$6D.drawEvents();return;};var $F=this.$hb.step;var $8z=this.$hb.layers;if($8z){$i.divEvents=document.createElement("div");$i.divEvents.style.position='absolute';$i.$bW.insertBefore(this.divEvents,this.divSeparatorsAbove);};if(this.$hb.mode==='display'){this.divEvents.style.display='none';}else if(this.$hb.mode==='visibility'){this.divEvents.style.visibility='hidden';};this.divEvents.setAttribute("role","region");this.divEvents.setAttribute("aria-label","scheduler events");var $8A=this.dynamicEventRendering==='Progressive';var $J=this.$c1();var top=$J.pixels.top;var $W=$J.pixels.bottom;var $8B=$i.allowMultiMove||$i.allowMultiResize;for(var i=0;i<this.rowlist.length;i++){var $x=this.rowlist[i];var $5d=$x.top-this.dynamicEventRenderingMargin;var $8C=$5d+$x.height+2*this.dynamicEventRenderingMargin;if($8A&&!$8B&&($W<=$5d||top>=$8C)){continue;};this.$fu($x);for(var j=0;j<$x.lines.length;j++){var $0x=$x.lines[j];for(var k=0;k<$0x.length;k++){var e=$0x[k];var $8D=this.$eP(e);if($1o&&$8D){$F--;if($F<=0){this.divEvents.style.visibility='';this.divEvents.style.display='';window.setTimeout(function(){$i.$bJ($1o);},$i.$hb.delay);return;}}}}};this.divEvents.style.display='';if(!DayPilot.list($i.multiselect.$cQ).isEmpty()){$i.multiselect.redraw();};this.$c4();$1k.load();};this.$dA=function($8E){var $x=this.rowlist[$8E];if($i.$b8){$6D.drawEventsRow($x);return;};this.divEvents=document.createElement("div");this.divEvents.style.position='absolute';this.divEvents.style.display='none';this.$bW.insertBefore(this.divEvents,this.divSeparatorsAbove);this.$fu($x);for(var j=0;j<$x.lines.length;j++){var $0x=$x.lines[j];for(var k=0;k<$0x.length;k++){var e=$0x[k];this.$eP(e);}};this.divEvents.style.display='';};this.$bE=function(){if(this.elements.events){var length=this.elements.events.length;for(var i=0;i<length;i++){var $02=this.elements.events[i];this.$eO($02);}};this.elements.events=[];};this.$dz=function($8E){if(this.elements.events){var length=this.elements.events.length;var $8F=[];for(var i=0;i<length;i++){var $02=this.elements.events[i];var e=$02.event;if(e.part.dayIndex===$8E){this.$eO($02);$8F.push(i);}};for(var i=$8F.length-1;i>=0;i--){this.elements.events.splice($8F[i],1);}}};this.$eO=function($02){var $8G=$02.event&&$02.event.part&&$02.event.part.onElementRemove;if($8G){var $l=$02.event&&$02.event.part.elementCreateArgs;$l.div=$02;$8G($l);};if($02.parentNode){$02.parentNode.removeChild($02);};$02.onclick=null;$02.oncontextmenu=null;$02.onmouseover=null;$02.onmouseout=null;$02.onmousemove=null;$02.onmousedown=null;$02.ondblclick=null;if($02.event){if(!$02.isBar){$02.event.rendered=null;};$02.event=null;};if($02.related){DayPilot.de($02.related);}};this.$hc=function($02){if($02.event){$02.event.rendered=false;};$02.onclick=null;$02.onmousedown=null;$02.event=null;if($02.parentNode){$02.parentNode.removeChild($02);}};this.$hd=function(){if(this.dynamicEventRendering!=='Progressive'){return;};var $8H=$i.dynamicEventRenderingCacheSweeping;if(!$8H){return;};var $8I=$i.dynamicEventRenderingCacheSize||0;this.divEvents.style.display='none';var $8J=[];var $8K=0;var length=this.elements.events.length;for(var i=length-1;i>=0;i--){var $02=this.elements.events[i];if(this.$he($02.event)){if($8I>0){$8I--;$8J.unshift($02);}else{this.$eO($02);$8K++;}}else{$8J.unshift($02);}};this.elements.events=$8J;this.divEvents.style.display='';};this.$hf=function($8I){var $8J=[];var $8K=0;var $J=this.$c1();var length=this.elements.cells.length;for(var i=length-1;i>=0;i--){var $02=this.elements.cells[i];var $8L=($J.xStart<$02.coords.x&&$02.coords.x<=$J.xEnd)&&($J.yStart<$02.coords.y&&$02.coords.y<=$J.yEnd);if(!$8L){if($8I>0){$8I--;$8J.unshift($02);}else{this.$eX($02);$8K++;}}else{$8J.unshift($02);}}};this.$eX=function($02){if(!$02){return;};if(!$02.coords){return;};var x=$02.coords.x;var y=$02.coords.y;DayPilot.rfa($i.elements.cells,$02);DayPilot.de($02);$i.$bg.cells[x+"_"+y]=null;};this.$bF=function(){if(this.elements.separators){for(var i=0;i<this.elements.separators.length;i++){var $02=this.elements.separators[i];DayPilot.de($02);}};this.elements.separators=[];};this.$hg=function(){var $8A=this.dynamicEventRendering==='Progressive';if(!this.nav.scroll){return false;};var top=this.nav.scroll.scrollTop;var $W=top+this.nav.scroll.clientHeight;for(var i=0;i<this.rowlist.length;i++){var $x=this.rowlist[i];var $5d=$x.top;var $8C=$x.top+$x.height;if($8A&&($W<=$5d||top>=$8C)){continue;};for(var j=0;j<$x.lines.length;j++){var $0x=$x.lines[j];for(var k=0;k<$0x.length;k++){var e=$0x[k];if(this.$hh(e)){return true;}}}};return false;};this.$hh=function($q){if($q.rendered){return false;};var $8A=this.dynamicEventRendering==='Progressive';var $N=this.nav.scroll.scrollLeft;var $O=$N+this.nav.scroll.clientWidth;var $8M=$q.part.left;var $8N=$q.part.left+$q.part.width;if($8A&&($O<=$8M||$N>=$8N)){return false;};return true;};this.$he=function(ev){if(!ev.rendered){return true;};var $J=this.$c1();var top=$J.pixels.top;var $W=$J.pixels.bottom;var $N=$J.pixels.left-this.dynamicEventRenderingMargin;var $O=$J.pixels.right+this.dynamicEventRenderingMargin;var $8M=ev.part.left;var $8N=ev.part.right;var $8O=ev.part.fullTop;var $8P=ev.part.fullBottom;if($O<=$8M||$N>=$8N){return true;};if($W<=$8O||top>=$8P){return true;};return false;};this.$g9=DayPilot.list();this.$hi=function($6G){if($6G.rendered){return false;};var $x=$6G.row;if($x.hidden){return false;};var $N=$6G.min;var $A=$6G.max-$6G.min;var $R=$i.eventHeight;var top=$6G.row.top;var $02=document.createElement("div");$02.style.position='absolute';$02.style.left=$N+'px';$02.style.top=top+'px';$02.style.width=$A+'px';$02.style.height=$R+'px';$02.className=$i.$c8("_event_group");$02.style.cursor="pointer";var $l={};$l.group={};$l.group.count=$6G.events.length;$l.group.events=DayPilot.list($6G.events,true);$l.group.html="[+] "+$6G.events.length+" events";if(typeof $i.onBeforeGroupRender==="function"){$i.onBeforeGroupRender($l);};var $05=document.createElement("div");$05.innerHTML=$l.group.html;$02.appendChild($05);$02.onmousedown=function(ev){var ev=ev||window.event;ev.cancelBubble=true;};$02.onclick=function(ev){var $6G=$02.event;$6G.expanded=true;$i.$hc($02);var $8Q=DayPilot.indexOf($i.elements.events,$02);if($8Q!==-1){$i.elements.events.splice($8Q,1);};var $Y=$i.$g9;DayPilot.list($6G.events).each(function(e){$Y.push(e.id());});$i.$d5();$i.$d6($6G.part.dayIndex);$i.$bC();var ev=ev||window.event;ev.cancelBubble=true;};$6G.part={};$6G.part.left=$N;$6G.part.width=$A;$6G.part.height=$i.eventHeight;$6G.part.dayIndex=DayPilot.indexOf($i.rowlist,$6G.row);$6G.part.top=0;$6G.part.isBlock=true;$6G.client={};$6G.client.html=function(){return $l.group.html;};$6G.data={};$02.event=$6G;this.elements.events.push($02);this.divEvents.appendChild($02);$6G.rendered=true;return true;};this.$eP=function(e,$h){$h=$h||{};var $8R=$h.forced;if(e.rendered){return false;};if($i.groupConcurrentEvents){var $6G=e.part.block;if($6G.events.length>1&&!$6G.expanded){return $i.$hi($6G);}};var $8A=this.dynamicEventRendering==='Progressive';var $8E=e.part.dayIndex;var $x=this.rowlist[$8E];if($x.hidden){return false;};var $5d=$x.top;var $J=this.$c1();var $N=$J.pixels.left-this.dynamicEventRenderingMargin;var $O=$J.pixels.right+this.dynamicEventRenderingMargin;var top=$J.pixels.top;var $W=$J.pixels.bottom;var $8M=e.part.left;var $8N=e.part.left+e.part.width;var $8O=e.part.top+$5d;var $8P=$8O+e.part.height;var $8S=$i.multiselect.$db(e);if(!$8R&&!$8S&&$8A&&($O<=$8M||$N>=$8N||$W<=$8O||top>=$8P)){return false;};var $38=e.data.type==="Milestone";var $A=e.part.width;var $R=e.part.height;var $0A=e.cache||e.data;$A=Math.max(0,$A);$R=Math.max(0,$R);var $02=document.createElement("div");$02.related=[];(function drawVersions(parent){if(!$i.eventVersionsEnabled){return;};DayPilot.list(e.data.versions).each(function($6S,i){if(!$6S){return;};var $8T=e.versions[i];if(!$8T){return;};var $02=document.createElement("div");$02.style.position='absolute';$02.style.left=$8T.left+'px';$02.style.top=($5d+$8T.top)+'px';$02.style.width=$8T.width+'px';$02.style.height=$i.eventVersionHeight+'px';$02.className=$i.$c8($07.event)+" "+$i.$c8("_event_previous")+" "+$i.$c8("_event_version");if($6S.toolTip){$02.title=$6S.toolTip;};if($6S.cssClass){DayPilot.Util.addClass($02,$6S.cssClass);};var $05=document.createElement("div");$05.setAttribute("unselectable","on");$05.className=$i.$c8($07.eventInner);$05.innerHTML=$6S.html||$6S.text||"";if($6S.backColor){$05.style.background=$6S.backColor;if(DayPilot.browser.ie9||DayPilot.browser.ielt9){$05.style.filter='';}};if($6S.fontColor){$05.style.color=$6S.fontColor;};if($6S.borderColor){$05.style.borderColor=$6S.borderColor;};if($6S.backImage){$05.style.backgroundImage="url("+$6S.backImage+")";if($6S.backRepeat){$05.style.backgroundRepeat=$6S.backRepeat;}};$02.appendChild($05);if($8T.continueLeft&&!$38){DayPilot.Util.addClass($02,$i.$c8("_event_continueleft"));};if($8T.continueRight&&!$38){DayPilot.Util.addClass($02,$i.$c8("_event_continueright"));};var $5f=$i.durationBarVisible&&!$6S.barHidden;var $A=$8T.width;if($5f&&$A>0){var $8U=100*$8T.barLeft/($A);var $5e=Math.ceil(100*$8T.barWidth/($A));if($i.durationBarMode==="PercentComplete"){$8U=0;$5e=$6S.complete||0;};var $44=document.createElement("div");$44.setAttribute("unselectable","on");$44.className=$i.$c8($07.eventBar);$44.style.position="absolute";if($6S.barBackColor){$44.style.backgroundColor=$6S.barBackColor;};var $8V=document.createElement("div");$8V.setAttribute("unselectable","on");$8V.className=$i.$c8($07.eventBarInner);$8V.style.left=$8U+"%";if(0<$5e&&$5e<=1){$8V.style.width="1px";}else{$8V.style.width=$5e+"%";};if($6S.barColor){$8V.style.backgroundColor=$6S.barColor;};if($6S.barImageUrl){$8V.style.backgroundImage="url("+$6S.barImageUrl+")";};$44.appendChild($8V);$02.appendChild($44);};if($6S.htmlLeft){var $6e=$i.eventHtmlLeftMargin;var $8W=document.createElement("div");$8W.style.position='absolute';$8W.style.right=-($8T.left-$6e)+'px';$8W.style.top=($5d+$8T.top)+'px';$8W.style.height=$i.eventHeight+'px';$8W.style.boxSizing="border-box";$8W.innerHTML=$6S.htmlLeft;$8W.className=$i.$c8("_event_left");$8W.type="divLeft";$8W.versionPart=$8T;parent.related.push($8W);$i.divEvents.appendChild($8W);};if($6S.htmlRight){var $6e=$i.eventHtmlRightMargin;var $8X=document.createElement("div");$8X.style.position='absolute';$8X.style.left=($8T.left+$8T.width+$6e)+'px';$8X.style.top=($5d+$8T.top)+'px';$8X.style.height=$i.eventHeight+'px';$8X.style.boxSizing="border-box";$8X.innerHTML=$6S.htmlRight;$8X.className=$i.$c8("_event_right");$8X.type="divRight";$8X.versionPart=$8T;parent.related.push($8X);$i.divEvents.appendChild($8X);};$02.versionPart=$8T;$02.type="version";parent.related.push($02);$i.divEvents.appendChild($02);});})($02);if($0A.htmlLeft){var $6e=$i.eventHtmlLeftMargin;var $8W=document.createElement("div");$8W.style.position='absolute';$8W.style.right=-(e.part.left-$6e)+'px';$8W.style.top=($5d+e.part.top)+'px';$8W.style.height=$i.eventHeight+'px';$8W.style.boxSizing="border-box";$8W.innerHTML=$0A.htmlLeft;$8W.className=$i.$c8("_event_left");$8W.type="divLeft";$02.related.push($8W);this.divEvents.appendChild($8W);};if($0A.htmlRight){var $6e=$i.eventHtmlRightMargin;var $8X=document.createElement("div");$8X.style.position='absolute';$8X.style.left=(e.part.left+e.part.width+$6e)+'px';$8X.style.top=($5d+e.part.top)+'px';$8X.style.height=$i.eventHeight+'px';$8X.style.boxSizing="border-box";$8X.innerHTML=$0A.htmlRight;$8X.className=$i.$c8("_event_right");$8X.type="divRight";$02.related.push($8X);this.divEvents.appendChild($8X);};var top=$5d+e.part.top;$02.style.position='absolute';$02.style.left=(e.part.left+$i.eventMarginLeft)+'px';$02.style.top=($5d+e.part.top)+'px';$02.style.width=($A-$i.eventMarginLeft-$i.eventMarginRight)+'px';$02.style.height=$R+'px';if(!$i.eventTextWrappingEnabled){$02.style.whiteSpace='nowrap';};$02.style.overflow='hidden';$02.className=this.$c8($07.event);if($38){DayPilot.Util.addClass($02,$i.$c8("_task_milestone"));};if(e.data.type==="Group"){DayPilot.Util.addClass($02,$i.$c8("_task_parent"));DayPilot.Util.addClass($02,$i.$c8("_task_group"));};if($0A.cssClass){DayPilot.Util.addClass($02,$0A.cssClass);};var $8Y=true;if($8Y&&typeof e.part.line==="number"){DayPilot.Util.addClass($02,this.$c8($07.eventLine+e.part.line));};$02.setAttribute("unselectable","on");if(this.showToolTip&&!this.bubble){$02.title=e.client.toolTip()||"";};$02.onmousemove=this.$hj;$02.onmouseout=this.$hk;$02.onmousedown=this.$hl;$02.onmouseup=this.$hm;$02.ontouchstart=$7B.onEventTouchStart;$02.ontouchmove=$7B.onEventTouchMove;$02.ontouchend=$7B.onEventTouchEnd;if(e.client.clickEnabled()){$02.onclick=this.$cG;};if(e.client.doubleClickEnabled()){$02.ondblclick=this.$cU;};$02.oncontextmenu=this.$cT;if(typeof $0A.ariaLabel!=="undefined"){$02.setAttribute("aria-label",$0A.ariaLabel);}else{$02.setAttribute("aria-label",$0A.text);};$02.setAttribute("tabindex","-1");var $8Z=[];var $90=0;var $05=document.createElement("div");$05.setAttribute("unselectable","on");$05.className=$i.$c8($07.eventInner);if(!$38){if(typeof $0A.onElementCreate==="function"){var $l={};$l.element=null;$0A.onElementCreate($l);if($l.element){$05.appendChild($0A.element);};e.part.elementCreateArgs=$l;e.part.onElementRemove=$0A.onElementRemove;}else{$05.innerHTML=e.client.innerHTML();}};if($0A.backColor){$05.style.background=$0A.backColor;if(DayPilot.browser.ie9||DayPilot.browser.ielt9){$05.style.filter='';}};if($0A.fontColor){$05.style.color=$0A.fontColor;};if($0A.borderColor){$05.style.borderColor=$0A.borderColor;};if($0A.backImage){$05.style.backgroundImage="url("+$0A.backImage+")";if($0A.backRepeat){$05.style.backgroundRepeat=$0A.backRepeat;}};$02.appendChild($05);var $91=e.start().getTime()===e.part.start.getTime();var $92=e.rawend().getTime()===e.part.end.getTime();if(!$91&&!$38){DayPilot.Util.addClass($02,this.$c8("_event_continueleft"));};if(!$92&&!$38){DayPilot.Util.addClass($02,this.$c8("_event_continueright"));};if(e.client.barVisible()&&$A>0&&!$38){var $8U=100*e.part.barLeft/($A);var $5e=Math.ceil(100*e.part.barWidth/($A));if(this.durationBarMode==="PercentComplete"){$8U=0;$5e=$0A.complete||0;};var $44=document.createElement("div");$44.setAttribute("unselectable","on");$44.className=this.$c8($07.eventBar);$44.style.position="absolute";if($0A.barBackColor){$44.style.backgroundColor=$0A.barBackColor;};var $8V=document.createElement("div");$8V.setAttribute("unselectable","on");$8V.className=this.$c8($07.eventBarInner);$8V.style.left=$8U+"%";if(0<$5e&&$5e<=1){$8V.style.width="1px";}else{$8V.style.width=$5e+"%";};if($0A.barColor){$8V.style.backgroundColor=$0A.barColor;};if($0A.barImageUrl){$8V.style.backgroundImage="url("+$0A.barImageUrl+")";};$44.appendChild($8V);$02.appendChild($44);};$02.row=$8E;if($0A.areas){for(var i=0;i<$0A.areas.length;i++){var $J=$0A.areas[i];var v=$J.visibility||$J.v||"Visible";if(v!=="Visible"){continue;};if($J.start||$J.end){$J.left=$i.getPixels(new DayPilot.Date($J.start)).left-e.part.left;$J.width=$i.getPixels(new DayPilot.Date($J.end)).left-$J.left-e.part.left;};var a=DayPilot.Areas.createArea($02,e,$J);$02.appendChild(a);}};this.elements.events.push($02);this.divEvents.appendChild($02);e.rendered=true;$02.event=e;if($8S){$i.multiselect.add($02.event,true);$i.multiselect.$da($02);};if($i.$bQ()){if(typeof $i.onAfterEventRender==='function'){var $l={};$l.e=$02.event;$l.div=$02;$i.onAfterEventRender($l);}}else{if($i.afterEventRender){$i.afterEventRender($02.event,$02);}};return true;};this.$bQ=function(){return $i.api===2;};this.$dB=function(){for(var i=0;i<this.elements.events.length;i++){var $02=this.elements.events[i];var event=$02.event;var $8E=event.part.dayIndex;var $x=this.rowlist[$8E];var $5d=$x.top;var top=$5d+event.part.top;$02.style.top=top+'px';DayPilot.list($02.related).filter(function($00){return !!$00.versionPart;}).each(function($93){var $8T=$93.versionPart;$93.style.top=($5d+$8T.top)+'px';});DayPilot.list($02.related).filter(function($00){return !$00.versionPart&&($00.type==="divLeft"||$00.type==="divRight");}).each(function($93){$93.style.top=top+'px';});}};this.$dh=function(e){if(!e){return null;};for(var i=0;i<$i.elements.events.length;i++){var $02=$i.elements.events[i];if($02.event===e||$02.event.data===e.data){return $02;}};return null;};this.$eG=function(e){var ev=$i.events.$eK(e.data);if(!ev){return null;};var $x=$i.rowlist[ev.part.dayIndex];$i.$fu($x);$i.$eP(ev,{"forced":true});return $i.$dh(ev);};this.$hk=function(ev){var $02=this;DayPilot.Areas.hideAreas($02,ev);if($02.active){return;};DayPilot.Util.removeClass($02,$i.$c8("_event_hover"));$i.$hn($02);if(!$2l.source){$1k.hideLinkpointsWithDelay();};if($i.bubble&&$i.eventHoverHandling==='Bubble'){$i.bubble.hideOnMouseOut();}};this.$ho=function($02){if(typeof this.onEventMouseOver==="function"){var $l={};$l.div=$02;$l.e=$02.event;this.onEventMouseOver($l);}};this.$hn=function($02){if(typeof this.onEventMouseOut==="function"){var $l={};$l.div=$02;$l.e=$02.event;this.onEventMouseOut($l);}};this.$hj=function(ev){ev=ev||window.event;if($i.cellBubble){$i.cellBubble.delayedHide();};var $02=this;while($02&&!$02.event){$02=$02.parentNode;};$i.$hp($02,ev);var $94=$02.event.cache?$02.event.cache.deleteDisabled:$02.event.data.deleteDisabled;if(!$02.active){var $08=[];if($i.eventDeleteHandling!=="Disabled"&&!$94){var top=$i.durationBarVisible?$i.durationBarHeight:0;$08.push({"action":"JavaScript","v":"Hover","w":17,"h":17,"top":top+2,"right":2,"css":$i.$c8($07.eventDelete),"js":function(e){$i.$cO(e);}});};var $Y=$02.event.cache?$02.event.cache.areas:$02.event.data.areas;if($Y&&$Y.length>0){$08=$08.concat($Y);};DayPilot.Areas.showAreas($02,$02.event,null,$08);DayPilot.Util.addClass($02,$i.$c8("_event_hover"));$i.$ho($02);};if($i.linkCreateHandling!=="Disabled"&&!$2l.source){$1k.clearHideTimeout();$1k.hideLinkpoints();if($i.$h7()){$1k.showLinkpoint($02);}};if(ev.srcElement){ev.srcElement.insideEvent=true;}else{ev.insideEvent=true;}};this.$hq={};var $0R=this.$hq;this.$hm=function(ev){if(!$i.ionicEventClickFix){return;};var $95=$0R.originalMouse;if(!$95){return;};var $96=DayPilot.mc(ev);if($95.x===$96.x&&$95.y===$96.y){$i.$cG.call(this,ev);ev.preventDefault();ev.stopPropagation();}};this.$hl=function(ev){$i.$fT();if(typeof DayPilot.Bubble!=='undefined'){DayPilot.Bubble.hideActive();DayPilot.Bubble.cancelShowing();};ev=ev||window.event;if(!$i.coords){var $5F=$i.$bW;$i.coords=DayPilot.mo3($5F,ev);};var $97=DayPilot.Util.mouseButton(ev);ev.preventDefault();ev.stopPropagation();if($97.left){var $1E=ev.shiftKey;if($i.multiSelectRectangle!=="Disabled"&&$1E){$0W.start();return false;};if(this.style.cursor==='w-resize'||this.style.cursor==='e-resize'){DayPilotScheduler.preventEventClick=true;DayPilotScheduler.resizing=this;DayPilotScheduler.resizingEvent=this.event;DayPilotScheduler.originalMouse=DayPilot.mc(ev);document.body.style.cursor=this.style.cursor;$1k.hideLinkpoints();}else if((this.style.cursor==='move')||($i.moveBy==='Full'&&this.event.client.moveEnabled())){$0R.start=true;$0R.moving=this;$0R.movingEvent=this.event;$0R.originalMouse=DayPilot.mc(ev);$0R.moveOffsetX=DayPilot.mo3(this,ev).x;$0R.moveDragStart=$i.getDate($i.coords.x,true);$1k.hideLinkpoints();}};DayPilot.Menu&&DayPilot.Menu.active&&DayPilot.Menu.active.hide();};this.$hr={};var $7B=$i.$hr;if(typeof DayPilot.Global.touch==="undefined"){DayPilot.Global.touch={};};DayPilot.Global.touch.active=false;DayPilot.Global.touch.start=false;$7B.timeouts=[];$7B.onEventTouchStart=function(ev){if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};ev.stopPropagation();$7B.clearTimeouts();DayPilot.Global.touch.start=true;DayPilot.Global.touch.active=false;var $02=this;var $98=$i.tapAndHoldTimeout;$7B.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=true;DayPilot.Global.touch.start=false;$i.coords=$7B.relativeCoords(ev);ev.preventDefault();var e=$02.event;switch($i.eventTapAndHoldHandling){case "Move":if(e.client.moveEnabled()){var $23=touchMousePos(ev);$7B.startMoving($02,$23);};break;case "ContextMenu":if(DayPilot.Menu){DayPilot.Menu.touchPosition(ev);};var $0V=e.client.contextMenu();if($0V){$0V.show(e);}else{if($i.contextMenu){$i.contextMenu.show(e);}};break;}},$98));};$7B.onEventTouchMove=function(ev){$7B.clearTimeouts();DayPilot.Global.touch.start=false;};$7B.onEventTouchEnd=function(ev){if(DayPilot.Util.isMouseEvent(ev)){return;};$7B.clearTimeouts();if(DayPilot.Global.touch.start){DayPilot.Global.touch.start=false;ev.preventDefault();ev.stopPropagation();var $02=this;window.setTimeout(function(){$i.$cK($02,ev);});};window.setTimeout(function(){DayPilot.Global.touch.start=false;DayPilot.Global.touch.active=false;},500);};$7B.onMainTouchStart=function(ev){if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};if(ev.touches.length>1){return;};if($i.timeRangeSelectedHandling==='Disabled'){return;};$7B.clearTimeouts();DayPilot.Global.touch.start=true;DayPilot.Global.touch.active=false;var $98=$i.tapAndHoldTimeout;$7B.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=true;DayPilot.Global.touch.start=false;ev.preventDefault();$i.coords=$7B.relativeCoords(ev);$7B.range=$i.$hs();},$98));var $99=true;if($99){$i.coords=$7B.relativeCoords(ev);}};$7B.onMainTouchMove=function(ev){$7B.clearTimeouts();DayPilot.Global.touch.start=false;if(DayPilotScheduler.resizing){ev.preventDefault();$7B.updateResizing();return;};if(DayPilot.Global.touch.active){ev.preventDefault();$i.coords=$7B.relativeCoords(ev);if(DayPilotScheduler.moving){$7B.updateMoving();return;};if($7B.range){var $1t=$7B.range;$1t.end={x:Math.floor($i.coords.x/$i.cellWidth)};$i.$dP($1t);}}};$7B.onMainTouchEnd=function(ev){$7B.clearTimeouts();var $99=true;if(DayPilot.Global.touch.active){if(DayPilotScheduler.moving){ev.preventDefault();var e=DayPilotScheduler.movingEvent;if($i!==DayPilotScheduler.movingShadow.calendar){return;};var $0p=DayPilotScheduler.movingShadow.start;var $13=DayPilotScheduler.movingShadow.end;var $18=($i.viewType!=='Days')?DayPilotScheduler.movingShadow.row.id:null;var external=DayPilotScheduler.drag&&e.part.external;var $2W=DayPilotScheduler.movingShadow.overlapping;var $9a=!DayPilotScheduler.movingShadow.allowed;DayPilot.Util.removeClass(DayPilotScheduler.moving,$i.$c8($i.$ht.eventMovingSource));DayPilot.de(DayPilotScheduler.movingShadow);$i.$fJ();DayPilotScheduler.movingShadow.calendar=null;document.body.style.cursor='';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.movingShadow=null;$i.$fC.clear();if($2W||$9a||$i.$fC.forbidden||$i.$fC.invalid){return;};$i.$dF(e,$0p,$13,$18,external);};if($7B.range){var $1t=$7B.range;$7B.range=null;var $26=$i.elements.range2;if($26&&$26.overlapping){$i.clearSelection();}else{$i.$dL($1t);}}}else if(DayPilot.Global.touch.start&&$99){if($i.coords.x<$i.getScrollX()){return;};var $1t=$i.$hs();$i.$dP($1t);var $26=$i.elements.range2;if($26&&$26.overlapping){$i.clearSelection();}else{$i.$dL($1t);}};window.setTimeout(function(){DayPilot.Global.touch.start=false;DayPilot.Global.touch.active=false;},500);};$7B.clearTimeouts=function(){for(var i=0;i<$7B.timeouts.length;i++){clearTimeout($7B.timeouts[i]);};$7B.timeouts=[];};$7B.relativeCoords=function(ev){var $5F=$i.$bW;var x=ev.touches[0].pageX;var y=ev.touches[0].pageY;var $9b=DayPilot.abs($5F);var $23={x:x-$9b.x,y:y-$9b.y,toString:function(){return "x: "+this.x+", y:"+this.y;}};return $23;};$7B.startMoving=function($02,$23){DayPilotScheduler.moving=$02;DayPilotScheduler.movingEvent=$02.event;DayPilotScheduler.originalMouse=$23;var $9c=DayPilot.abs($02);DayPilotScheduler.moveOffsetX=$23.x-$9c.x;DayPilotScheduler.moveDragStart=$i.getDate($i.coords.x,true);DayPilotScheduler.movingShadow=$i.$ew($02);$i.$fi();};$7B.startResizing=function($02,$3M){DayPilotScheduler.resizing=$02;DayPilotScheduler.resizingEvent=$02.event;DayPilotScheduler.resizing.dpBorder=$3M;if(!DayPilotScheduler.resizingShadow){DayPilotScheduler.resizingShadow=$i.$ew($02);};$i.$fD();};$7B.updateResizing=function(){if(!DayPilotScheduler.resizingShadow){var mv=DayPilotScheduler.resizing;DayPilotScheduler.resizingShadow=$i.$ew(mv);};$i.$fD();};$7B.updateMoving=function(){if(DayPilotScheduler.movingShadow&&DayPilotScheduler.movingShadow.calendar!==$i){$i.$fJ();};if(!DayPilotScheduler.movingShadow){var mv=DayPilotScheduler.moving;DayPilotScheduler.movingShadow=$i.$ew(mv);};var $1D=DayPilotScheduler.movingShadow.calendar;$1D.$fi();};this.$hp=function($02,ev){var $9d=this.eventResizeMargin;var $9e=this.eventMoveMargin;var $21=$02;if(typeof(DayPilotScheduler)==='undefined'){return;};var $0G=DayPilot.mo3($02,ev);if(!$0G){return;};$i.eventOffset=$0G;if(DayPilotScheduler.resizing){return;};if(DayPilotScheduler.moving){return;};var $9f=$21.event.part.start.toString()===$21.event.start().toString();var $9g=$21.event.part.end.toString()===$21.event.rawend().toString();if($i.moveBy==='Top'&&$0G.y<=$9e&&$21.event.client.moveEnabled()&&$i.eventMoveHandling!=='Disabled'){$02.style.cursor='move';}else if(($i.moveBy==='Top'||$i.moveBy==='Full')&&$0G.x<=$9d&&$21.event.client.resizeEnabled()&&$i.eventResizeHandling!=='Disabled'){if($9f){$02.style.cursor="w-resize";$02.dpBorder='left';}else{$02.style.cursor='not-allowed';}}else if($i.moveBy==='Left'&&$0G.x<=$9e&&$21.event.client.moveEnabled()&&$i.eventMoveHandling!=='Disabled'){$02.style.cursor="move";}else if($02.offsetWidth-$0G.x<=$9d&&$21.event.client.resizeEnabled()&&$i.eventResizeHandling!=='Disabled'){if($9g){$02.style.cursor="e-resize";$02.dpBorder='right';}else{$02.style.cursor='not-allowed';}}else if(!DayPilotScheduler.resizing&&!DayPilotScheduler.moving){if($21.event.client.clickEnabled()&&$i.eventClickHandling!=='Disabled'){$02.style.cursor='pointer';}else{$02.style.cursor='default';}};if(typeof(DayPilot.Bubble)!=='undefined'&&$i.bubble&&$i.eventHoverHandling==='Bubble'){if($02.style.cursor==='default'||$02.style.cursor==='pointer'){var $9h=this.$hu&&$0G.x===this.$hu.x&&$0G.y===this.$hu.y;var $9h=false;if(!$9h){this.$hu=$0G;$i.bubble.showEvent($02.event);}}else{}}};this.$fq=function(){if(this.viewType!=='Days'){return this.itline.length;}else{return Math.floor(24*60/this.cellDuration);}};this.$dM=function($1t){var $1t=$1t||DayPilotScheduler.range||$i.rangeHold;if(!$1t){return null;};var $x=$i.rowlist[$1t.start.y];if(!$x){return null;};var r=$1t.$hv?$1t.$hv:$1t;var $1s=$x.id;var $S=r.end.x>r.start.x?r.start.x:r.end.x;var $T=(r.end.x>r.start.x?r.end.x:r.start.x);var $1x=0;$1x=$x.start.getTime()-this.$cs().getTime();var $K=this.itline[$S].start.addTime($1x);var end=this.itline[$T].end.addTime($1x);return new DayPilot.Selection($K,end,$1s,$i);};this.$hw=function($21){var $9i=$21.parentNode;var $6R=$i.eventEditMinWidth;var $9j=document.createElement('textarea');$9j.style.position='absolute';$9j.style.width=(($21.offsetWidth<$6R)?$6R:($21.offsetWidth-2))+'px';$9j.style.height=($21.offsetHeight-2)+'px';$9j.style.fontFamily=DayPilot.gs($21,'fontFamily')||DayPilot.gs($21,'font-family');$9j.style.fontSize=DayPilot.gs($21,'fontSize')||DayPilot.gs($21,'font-size');$9j.style.left=$21.offsetLeft+'px';$9j.style.top=$21.offsetTop+'px';$9j.style.border='1px solid black';$9j.style.padding='0px';$9j.style.marginTop='0px';$9j.style.backgroundColor='white';$9j.value=DayPilot.tr($21.event.text());$9j.event=$21.event;$9i.appendChild($9j);return $9j;};this.$hx=function($02){var $2D=$Q.events();$2D.sort(function(a,b){var e1=a.event;var e2=b.event;if(e1.part.dayIndex!==e2.part.dayIndex){return e1.part.dayIndex-e2.part.dayIndex;};if(e1.start()!==e2.start()){return e1.start().getTime()-e2.start().getTime();};return e2.end().getTime()-e1.end().getTime();});var $1B=$2D.indexOf($02);if($1B===-1){return null;};if($1B+1<$2D.length){return $2D[$1B+1];};return $2D[0];};this.$cM=function($21){if(!$21){return;};if(DayPilotScheduler.editing){DayPilotScheduler.editing.blur();};if(!$21.event){return;};var $9j=this.$hw($21);DayPilotScheduler.editing=$9j;DayPilot.re($9j,DayPilot.touch.start,function(ev){ev.stopPropagation();});$9j.onblur=function(){$9j.onblur=null;if(DayPilotScheduler.editing===$9j){DayPilotScheduler.editing=null;};if($9j.parentNode){$9j.parentNode.removeChild($9j);};if(!$21.event){return;};var $9k=$21.event.text();var $1z=$9j.value;$i.$e5($21.event,$1z,$9j.canceling);};$9j.onmousedown=function(e){e=e||window.event;e.stopPropagation&&e.stopPropagation();};$9j.onkeypress=function(e){var $7h=(window.event)?event.keyCode:e.keyCode;if($7h===13){this.onblur();return false;};return true;};$9j.cancel=function(){if(DayPilotScheduler.editing){DayPilotScheduler.editing.canceling=true;DayPilotScheduler.editing.blur();}};$9j.onkeydown=function(e){var $7h=(window.event)?event.keyCode:e.keyCode;if($7h===27){DayPilotScheduler.editing.cancel();}else if($7h===9){var $9l=$i.$hx($21);DayPilotScheduler.editing.cancel();if($9l){if(DayPilot.browser.ie){setTimeout(function(){$i.$cM($9l);},0);}else{$i.$cM($9l);}};return false;}};$9j.select();$9j.focus();};this.$fY=function(ev){var td=this;var $x=td.row;if(typeof(DayPilot.Bubble)!=='undefined'){if($i.cellBubble){};if($i.resourceBubble){var r=$i.$dV($x);r.div=td;$i.resourceBubble.showResource(r);}}};this.$fZ=function(ev){var td=this;if(typeof(DayPilot.Bubble)!=='undefined'&&$i.resourceBubble){$i.resourceBubble.hideOnMouseOut();};var $02=td.firstChild;DayPilot.Areas.hideAreas($02,ev);$02.data=null;};this.$g0=function(ev){if($6q.row){$1N.cancelClick=true;setTimeout(function(){$1N.cancelClick=false;},100);}};this.$bw=function(){if(!this.timeHeader){return;};this.$bg.timeHeader={};var $8c=document.createElement("div");$8c.style.position="relative";this.nav.timeHeader=$8c;for(var y=0;y<this.timeHeader.length;y++){var $x=this.timeHeader[y];for(var x=0;x<$x.length;x++){this.$hy(x,y);}};var $9m=this.divNorth;if($9m.childNodes.length===1){$9m.replaceChild($8c,$9m.childNodes[0]);}else{if(DayPilot.browser.ie){if($9m&&$9m.firstChild){var $9n=[];for(var i=0;i<$9m.firstChild.childNodes.length;i++){$9n.push($9m.firstChild.childNodes[i]);};DayPilot.de($9n);}};$9m.innerHTML='';$9m.appendChild($8c);};var $8o=this.$cb();$9m.style.width=($8o+5000)+"px";$i.divCorner.innerHTML=this.cornerHtml||'';if($8o>0){this.divStretch.style.width=($8o)+"px";}};this.$cz=function(h,$9o){var $0b=null;var $7n=this.$dp.locale();var $9o=$9o||this.cellGroupBy;var $0M=h.start;var to=h.end;switch($9o){case 'Hour':$0b=($i.$dp.timeFormat()==='Clock12Hours')?$0M.toString("h tt",$7n):$0M.toString("H",$7n);break;case 'Day':$0b=$0M.toString($7n.datePattern);break;case 'Week':$0b=$0d.weekStarts()===1?$0M.weekNumberISO():$0M.weekNumber();break;case 'Month':$0b=$0M.toString("MMMM yyyy",$7n);break;case 'Quarter':$0b="Q"+Math.floor($0M.getMonth()/3+1);break;case 'Year':$0b=$0M.toString("yyyy");break;case 'None':$0b='';break;case 'Cell':var $0Q=(h.end.ticks-h.start.ticks)/60000;$0b=this.$hz($0M,$0Q);break;default:throw 'Invalid cellGroupBy value';};return $0b;};this.$hz=function($K,$0Q){var $7n=this.$dp.locale();var $0Q=$0Q||this.cellDuration;if($0Q<60){return $K.toString("mm");}else if($0Q<1440){return $i.$dp.timeFormat()==='Clock12Hours'?$K.toString("h tt",$7n):$K.toString("H",$7n);}else if($0Q<10080){return $K.toString("d");}else if($0Q===10080){return $0d.weekStarts()===1?$K.weekNumberISO():$K.weekNumber();}else{return $K.toString("MMMM yyyy",$7n);}};this.$cv=function($0M){var $4j=this.scale;switch($4j){case "Cell":throw "Invalid scale: Cell";case "Manual":throw "Internal error (addScaleSize in Manual mode)";case "Minute":return $0M.addMinutes(1);case "CellDuration":return $0M.addMinutes(this.cellDuration);default:return this.$cy($0M,$4j);}};this.$cy=function($0M,$9o){var to;var $9p=this.viewType!=='Days'?this.days:1;var $0u=this.startDate.addDays($9p);if($i.scale==="Manual"){$0u=$i.$cx();};var $9o=$9o||this.cellGroupBy;var $3D=60;switch($9o){case 'Hour':if($0M.getHours()+$0M.getMinutes()+$0M.getSeconds()+$0M.getMilliseconds()>0){$0M=$0M.getDatePart().addHours($0M.getHours());};to=$0M.addHours(1);break;case 'Day':to=$0M.getDatePart().addDays(1);break;case 'Week':to=$0M.getDatePart().addDays(1);while(to.dayOfWeek()!==$0d.weekStarts()){to=to.addDays(1);};break;case 'Month':to=$0M.addMonths(1);to=to.firstDayOfMonth();var $9q=(DayPilot.DateUtil.diff(to,$0M)/(1000.0*60))%$3D===0;while(!$9q){to=to.addHours(1);$9q=(DayPilot.DateUtil.diff(to,$0M)/(1000.0*60))%$3D===0;};break;case "Quarter":to=$0M.addMonths(1);to=to.firstDayOfMonth();while(to.getMonth()%3){to=to.addMonths(1);};var $9q=(DayPilot.DateUtil.diff(to,$0M)/(1000.0*60))%$3D===0;while(!$9q){to=to.addHours(1);$9q=(DayPilot.DateUtil.diff(to,$0M)/(1000.0*60))%$3D===0;};break;case 'Year':to=$0M.addYears(1);to=to.firstDayOfYear();var $9q=(DayPilot.DateUtil.diff(to,$0M)/(1000.0*60))%$3D===0;while(!$9q){to=to.addHours(1);$9q=(DayPilot.DateUtil.diff(to,$0M)/(1000.0*60))%$3D===0;};break;case 'None':to=$0u;break;case 'Cell':var $P=this.$cE($0M);if($P.current){to=$P.current.end;}else{if($P.past){to=$P.previous.end;}else{to=$P.next.start;}};break;default:throw 'Invalid cellGroupBy value';};if(to.getTime()>$0u.getTime()){to=$0u;};return to;};this.$ht={};this.$ht.timeheadercol="_timeheadercol";this.$ht.timeheadercolInner="_timeheadercol_inner";this.$ht.resourcedivider="_resourcedivider";this.$ht.eventFloat="_event_float";this.$ht.eventFloatInner="_event_float_inner";this.$ht.event="_event";this.$ht.eventInner="_event_inner";this.$ht.eventBar="_event_bar";this.$ht.eventBarInner="_event_bar_inner";this.$ht.eventDelete="_event_delete";this.$ht.eventLine="_event_line";this.$ht.eventMovingSource="_event_moving_source";var $07=this.$ht;this.$hy=function(x,y){var $8c=this.nav.timeHeader;var p=this.timeHeader[y][x];var $9r=y<this.timeHeader.length-1;var $N=p.left;var $A=p.width;var $4R=$4S.timeHeader(y);var top=$4R.top;var $R=$4R.height;var $P=document.createElement("div");$P.style.position="absolute";$P.style.top=top+"px";$P.style.left=$N+"px";$P.style.width=$A+"px";$P.style.height=$R+"px";if(p.toolTip){$P.title=p.toolTip;};$P.setAttribute("aria-hidden","true");if(p.cssClass){DayPilot.Util.addClass($P,p.cssClass);};$P.setAttribute("unselectable","on");$P.style.KhtmlUserSelect='none';$P.style.MozUserSelect='none';$P.style.webkitUserSelect='none';$P.oncontextmenu=function(){return false;};$P.cell={};$P.cell.start=p.start;$P.cell.end=p.end;$P.cell.level=y;$P.cell.th=p;$P.onclick=this.$g5;$P.style.overflow='hidden';if(!$i.timeHeaderTextWrappingEnabled){$P.style.whiteSpace="nowrap";};var $05=document.createElement("div");$05.setAttribute("unselectable","on");if(p.innerHTML){$05.innerHTML=p.innerHTML;};if(p.backColor){$05.style.background=p.backColor;};if(p.fontColor){$05.style.color=p.fontColor;};var cl=this.$c8($07.timeheadercol);var $9s=this.$c8($07.timeheadercolInner);if($9r){cl=this.$c8("_timeheadergroup");$9s=this.$c8("_timeheadergroup_inner");};DayPilot.Util.addClass($P,cl);DayPilot.Util.addClass($05,$9s);DayPilot.Util.addClass($P,$i.$c8("_timeheader_cell"));DayPilot.Util.addClass($05,$i.$c8("_timeheader_cell_inner"));DayPilot.list(p.areas).each(function($J){if($J.start){$J.left=$i.getPixels(new DayPilot.Date($J.start)).left-$N;if($J.end){$J.width=$i.getPixels(new DayPilot.Date($J.end)).left-$J.left-$N;}}});$P.appendChild($05);DayPilot.Areas.attach($P,p,{"areas":p.areas});this.$bg.timeHeader[x+"_"+y]=$P;$8c.appendChild($P);};this.$d5=function(){if($i.$b8){$6D.calculateEventPositions();return;};for(var i=0;i<this.rowlist.length;i++){var $x=this.rowlist[i];var $8J=$x.getHeight()+$x.marginBottom+$x.marginTop;if($x.height!==$8J){this.$dy=true;};$x.height=$8J;}};this.$bA=function(){var $8c=this.divHeader;if(!$8c){return false;};var $2O=this.rowlist.length;var $1W=this.rowHeaderCols?this.rowHeaderCols.length:1;var j=0;for(var i=0;i<$2O;i++){var $x=this.rowlist[i];if($x.hidden){continue;};var $1B=this.$fS?i:j;if(!$8c.rows[$1B]){continue;};for(var c=0;c<$8c.rows[$1B].cells.length;c++){var $9t=$8c.rows[$1B].cells[c];if(this.$fS){$9t.style.top=$x.top+"px";};var $8k=$x.height;if($9t&&$9t.firstChild&&parseInt($9t.firstChild.style.height,10)!==$8k){$9t.firstChild.style.height=$8k+"px";}};j++;};if(this.$fS){if($i.nav.resScrollSpace){$i.nav.resScrollSpace.style.top=$i.$bd+"px";}}};this.$ha=function($1B){var s=this.separators[$1B];s.location=s.location||s.Location;s.color=s.color||s.Color;s.layer=s.layer||s.Layer;s.width=s.width||s.Width;s.opacity=s.opacity||s.Opacity;var $0L=new DayPilot.Date(s.location);var $2w=s.color;var $A=s.width?s.width:1;var $2z=s.layer?s.layer==='AboveEvents':false;var $9u=s.opacity?s.opacity:100;if($0L.getTime()<this.$cs().getTime()){return;};if($0L.getTime()>=this.$cx().getTime()){return;};var $y=this.getPixels($0L);if($y.cut){return;};if($y.left<0){return;};if($y.left>this.$fq()*this.cellWidth){return;};var $0x=document.createElement("div");$0x.style.width=$A+'px';$0x.style.height=$i.$bd+'px';$0x.style.position='absolute';$0x.style.left=($y.left-1)+'px';$0x.style.top='0px';$0x.style.backgroundColor=$2w;$0x.style.opacity=$9u/100;$0x.style.filter="alpha(opacity="+$9u+")";if($2z){this.divSeparatorsAbove.appendChild($0x);}else{this.divSeparators.appendChild($0x);};this.elements.separators.push($0x);};this.$h2=function(ev){if($i.timeRangeDoubleClickHandling==='Disabled'){return false;};if(DayPilotScheduler.timeRangeTimeout){clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=null;};var $1t={};if(!$i.coords){var $5F=$i.$bW;$i.coords=DayPilot.mo3($5F,ev);};ev=ev||window.event;ev.stopPropagation&&ev.stopPropagation();ev.cancelBubble=true;if($i.$hA($i.coords)){var $1u=$i.$dM($i.rangeHold);$i.$dQ($1u.start,$1u.end,$1u.resource);}else{DayPilotScheduler.range=$i.$hs();if(DayPilotScheduler.range){DayPilotScheduler.rangeCalendar=$i;var $1u=$i.$dM(DayPilotScheduler.range);$i.$dQ($1u.start,$1u.end,$1u.resource);$i.rangeHold=DayPilotScheduler.range;}}};this.$gZ=function(ev){if(DayPilot.Global.touch.start||DayPilot.Global.touch.active){return;};if(DayPilotScheduler.timeRangeTimeout&&false){clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=null;};$i.$hB();$i.$gX();if(!$i.coords){var $5F=$i.$bW;$i.coords=DayPilot.mo3($5F,ev);};if(DayPilotScheduler.rectangleSelect){return false;};ev=ev||window.event;var $97=DayPilot.Util.mouseButton(ev);if($97.middle||($97.right&&$i.$hA($i.coords))){return false;};if($i.$hA($i.coords)){return false;};var $1f=ev.ctrlKey;var $1g=ev.metaKey;var $1E=ev.shiftKey;var $11=$1f||$1g;var $l={};$l.action="None";if($i.multiSelectRectangle!=="Disabled"&&$1E){$l.action="RectangleSelect";}else if($i.timeRangeSelectedHandling!=='Disabled'){$l.action="TimeRangeSelect";};$l.shift=$1E;$l.ctrl=$1E;$l.meta=$1g;$l.originalEvent=ev;$l.preventDefault=function(){$l.action="None";};if(typeof $i.onGridMouseDown==="function"){$i.onGridMouseDown($l);};if($l.action==="None"){ev.preventDefault();ev.stopPropagation();return false;};if($l.action==="RectangleSelect"){var $4M={};$4M.start=$i.coords;$4M.calendar=$i;DayPilotScheduler.rectangleSelect=$4M;return false;};if($i.allowMultiRange&&!$11){mr.clear();};var i=$i.$em($i.coords.y).i;var $x=$i.rowlist[i];if($x.isNewRow){return false;};DayPilotScheduler.range=$i.$hs();if(DayPilotScheduler.range){DayPilotScheduler.range.ctrl=$11;DayPilotScheduler.rangeCalendar=$i;};return false;};this.$hs=function(){var $1t={};var cx=this.$cC($i.coords.x).x;$1t.start={y:$i.$em($i.coords.y).i,x:cx};$1t.end={x:cx};if(this.$ey($i.$em($i.coords.y).i)){return null;};$1t.calendar=$i;$i.$dP($1t);return $1t;};this.$fE=function(){$i.$fk();var $26=DayPilotScheduler.resizingShadow;var ev=DayPilotScheduler.resizing;(function(){var $0H=$i.$hC;var $0o={"start":$26.start,"end":$i.$cY($26.end)};$26.original=$0o;var so=$26.original;if(so&&$0H&&$0H.start===so.start&&$0H.end===$i.$cY(so.end)){return;};var $l={};$l.start=$0o.start;$l.end=$0o.end;$l.duration=new DayPilot.Duration($l.start,$l.end);$l.e=ev.event;$l.allowed=true;$l.resizing=DayPilotScheduler.resizing.dpBorder==="left"?"start":"end";$l.left={};$l.left.html=$l.start.toString($i.eventResizingStartEndFormat,$0d.locale());$l.left.enabled=$i.eventResizingStartEndEnabled;$l.left.space=5;$l.left.width=null;$l.right={};$l.right.html=$l.end.toString($i.eventResizingStartEndFormat,$0d.locale());$l.right.enabled=$i.eventResizingStartEndEnabled;$l.right.space=5;$l.right.width=null;$l.multiresize=DayPilot.list($16.list);var $17={};$17.event=ev;$17.start=$l.start;$17.end=$l.end;$l.multiresize.splice(0,0,$17);$i.$hC=$0o;if(typeof $i.onEventResizing==='function'){$i.onEventResizing($l);};$26.allowed=$l.allowed;var $K=$l.start;var end=$i.$dD($l.end);$26.finalStart=$K;$26.finalEnd=end;if($i.viewType==="Days"){var $8E=ev.event.part.dayIndex;var $x=$i.rowlist[$8E];var $1x=$x.start.getTime()-$i.$cs().getTime();$K=$K.addTime(-$1x);end=end.addTime(-$1x);};var $0Q=DayPilot.DateUtil.diff($K,end);$0Q=Math.max($0Q,1);var $37=$0d.useBox($0Q);var $N=$37?$i.getPixels($K).boxLeft:$i.getPixels($K).left;var $O=$37?$i.getPixels(end).boxRight:$i.getPixels(end).left;$26.style.left=$N+"px";$26.style.width=($O-$N)+"px";$26.left=$N;$26.width=$O-$N;$i.$fF(DayPilotScheduler.resizingShadow,$l);$i.$fG(DayPilotScheduler.resizingShadow,$l);})();};this.$h0=function(ev){if(DayPilotScheduler.rectangleSelect){var ev=ev||window.event;ev.cancelBubble=true;ev.preventDefault&&ev.preventDefault();DayPilotScheduler.gMouseUp(ev);return false;};$0R={};if($i.rangeHold){var $97=DayPilot.Util.mouseButton(ev);if($97.left){var $1t=$i.rangeHold;if($i.$hA($i.coords)){var $9v=function($1t){return function(){DayPilotScheduler.timeRangeTimeout=null;var $1u=$i.$dM($1t);if(!$1u){return;};var $l={};$l.start=$1u.start;$l.end=$1u.end;$l.resource=$1u.resource;$l.preventDefault=function(){$l.preventDefault.value=true;};if(typeof $i.onTimeRangeClick==="function"){$i.onTimeRangeClick($l);};if(!$l.preventDefault.value){if(typeof $i.onTimeRangeClicked==="function"){$i.onTimeRangeClicked($l);}}};};if($i.timeRangeClickHandling!="Disabled"){if($i.timeRangeDoubleClickHandling==="Disabled"){$9v($1t)();}else{clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=setTimeout($9v($1t),$i.doubleClickTimeout);}}}}}};this.$hD=function(){return DayPilotScheduler.resizing||DayPilotScheduler.moving||DayPilotScheduler.range;};this.$fK=function(ev){if(DayPilot.Global.touch.active){return;};DayPilotScheduler.activeCalendar=$i;ev=ev||window.event;var $9w=DayPilot.mc(ev);$i.coords=DayPilot.mo3($i.$bW,ev);ev.insideMainD=true;if(window.event&&window.event.srcElement){window.event.srcElement.inside=true;};if($0R.start){var $9x=3;var $B=DayPilot.distance($0R.originalMouse,$9w);if($B>$9x){DayPilot.Util.copyProps($0R,DayPilotScheduler);document.body.style.cursor='move';$0R={};}};if(DayPilotScheduler.resizing&&DayPilotScheduler.resizingEvent.calendar===$i){if(!DayPilotScheduler.resizing.event){DayPilotScheduler.resizing.event=DayPilotScheduler.resizingEvent;};$i.$hE();}else if(DayPilotScheduler.movingEvent&&(DayPilotScheduler.movingEvent.calendar===$i||DayPilotScheduler.movingEvent.calendar.dragOutAllowed)){$i.$hF();}else if(DayPilotScheduler.range&&DayPilotScheduler.range.calendar===$i){DayPilotScheduler.range.moved=true;$i.$hG();}else if($2l.source){var $0l=$2l.source;$1k.drawShadow($0l.coords,$i.coords);}else if(DayPilotScheduler.rectangleSelect){DayPilotScheduler.rectangleSelect.moved=true;$0W.draw();};if($i.crosshairType!=='Disabled'){$i.$hH();};$i.$hI();var $9y=ev.insideEvent;if(window.event&&window.event.srcElement){$9y=window.event.srcElement.insideEvent;};if($i.cellBubble&&$i.coords&&$i.rowlist&&$i.rowlist.length>0&&!$9y){var x=$i.$cC($i.coords.x).x;var y=$i.$em($i.coords.y).i;if(0<=y&&y<$i.rowlist.length&&0<=x&&x<$i.itline.length){var $P={};$P.calendar=$i;$P.start=$i.itline[x].start;$P.end=$i.itline[x].end;$P.resource=$i.rowlist[y].id;$P.toJSON=function(){var $1K={};$1K.start=this.start;$1K.end=this.end;$1K.resource=this.resource;return $1K;};$i.cellBubble.showCell($P);}};if(DayPilotScheduler.drag){$i.$hB();if(DayPilotScheduler.gShadow){document.body.removeChild(DayPilotScheduler.gShadow);};DayPilotScheduler.gShadow=null;if(!DayPilotScheduler.movingShadow&&$i.coords&&$i.rowlist.length>0){if(!DayPilotScheduler.movingEvent){DayPilotScheduler.moving=DayPilotScheduler.drag.schedulerSourceEvent||{};var event=DayPilotScheduler.drag.event;if(!event){var $9z=$i.itline[0].start;var ev={'id':DayPilotScheduler.drag.id,'start':$9z,'end':$9z.addSeconds(DayPilotScheduler.drag.duration),'text':DayPilotScheduler.drag.text};var $q=DayPilotScheduler.drag.data;if($q){var $5b=['duration','element','remove','duration','id','text'];for(var name in $q){if(DayPilot.contains($5b,name)){continue;};ev[name]=$q[name];}};event=new DayPilot.Event(ev);event.calendar=$i;event.part.duration=DayPilotScheduler.drag.duration;}else if($i!==event.calendar){var $3k=event.calendar;var $9A=event;var $9B=DayPilot.Util.copyProps(event.data);event=new DayPilot.Event($9B);event.calendar=$3k;event.part.duration=$3k.$f7($9A);};event.part.external=true;var $0l=DayPilotScheduler.drag.schedulerSourceEvent;if($0l&&$0l.event&&$0l.event.calendar===$i){event.part.external=false;};if(!DayPilotScheduler.moving.event){DayPilotScheduler.moving.event=event;}else if(event.part.external){DayPilotScheduler.moving.event.part.external=true;};DayPilotScheduler.movingEvent=event;};DayPilotScheduler.movingShadow=$i.$ew(DayPilotScheduler.movingEvent);};ev.cancelBubble=true;};if($i.autoScroll==="Always"||($i.autoScroll==="Drag"&&(DayPilotScheduler.moving||DayPilotScheduler.resizing||DayPilotScheduler.range||DayPilotScheduler.rectangleSelect))){var $9C=$i.nav.scroll;var $23={x:$i.coords.x,y:$i.coords.y};$23.x-=$9C.scrollLeft;$23.x+=$L.shiftX;$23.y-=$9C.scrollTop;var $A=$9C.clientWidth;var $R=$9C.clientHeight;var $3M=30;var $N=$23.x<$3M?$23.x:0;var $O=$A-$23.x<$3M?$A-$23.x:0;var top=$23.y<$3M?$23.y:0;var $W=$R-$23.y<$3M?$R-$23.y:0;var x=0;var y=0;var $9D=50;if($N){x=-$9D*invertedPct($N,$3M);};if($O){x=$9D*invertedPct($O,$3M);};if(top){y=-$9D*invertedPct(top,$3M)/2;};if($W){y=$9D*invertedPct(top,$3M)/2;};if(DayPilotScheduler.resizing||DayPilotScheduler.range){y=0;};if(x||y){$i.$hJ(x,y);}else{$i.$gX();}}};function invertedPct($7r,$z){return 1-$7r/$z;};this.$hG=function(){var $1t=DayPilotScheduler.range;$1t.end={x:$i.$cC($i.coords.x).x};$i.$dP($1t);};this.$hE=function(){if(!DayPilotScheduler.resizingShadow){DayPilotScheduler.resizingShadow=$i.$ew(DayPilotScheduler.resizing);};$i.$fD();};this.$hF=function(){if(DayPilotScheduler.movingShadow&&DayPilotScheduler.movingShadow.calendar!==$i){DayPilotScheduler.movingShadow.calendar=null;DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow=null;};if(!DayPilotScheduler.movingShadow){var $9E=window.navigator.userAgent.indexOf("Chrome/61.0")>-1;if(!$9E){DayPilot.Util.addClass(DayPilotScheduler.moving,$i.$c8($07.eventMovingSource));};var mv=DayPilotScheduler.movingEvent;DayPilotScheduler.movingShadow=$i.$ew(mv);};$i.$fg();$i.$fi();};this.$hK={};var $0W=this.$hK;$0W.start=function(){var $4M={};$4M.start=$i.coords;$4M.calendar=$i;DayPilotScheduler.rectangleSelect=$4M;};$0W.draw=function(){var $4M=DayPilotScheduler.rectangleSelect;var $K=DayPilotScheduler.rectangleSelect.start;var end=$i.coords;$0W.clear();var $0o={"x":$4M.x,"y":$4M.y,"width":$4M.width,"height":$4M.height};var $N,top,$A,$R;var $S,$U,$T,$V;(function rectifyStartEnd(){$S=Math.min($K.x,end.x);$T=Math.max($K.x,end.x);if($i.multiSelectRectangle==="Free"){$U=Math.min($K.y,end.y);$V=Math.max($K.y,end.y);}else if($i.multiSelectRectangle==="Row"){$U=$K.y;$V=$K.y;}})();if($i.multiSelectRectangle==="Free"){$N=$S;top=$U;$A=$T-$S;$R=$V-$U;}else if($i.multiSelectRectangle==="Row"){var y=$i.$em($U).i;var $x=$i.rowlist[y];top=$x.top;$R=$x.height;var $42=$i.$cC($S).cell;$N=$42.left;var $43=$i.$cC($T).cell;$A=$43.left+$43.width-$N;}else{throw "Invalid DayPilot.Scheduler.multiSelectRectangle value: "+$i.multiSelectRectangle;};var $02=DayPilot.Util.div($i.divRectangle,$N,top,$A,$R);$02.style.boxSizing="border-box";$02.style.backgroundColor="#0000ff";$02.style.border="1px solid #000033";$02.style.opacity=0.4;$4M.x=$N;$4M.y=top;$4M.width=$A;$4M.height=$R;if($4M.x!==$0o.x||$4M.y!==$0o.y||$4M.width!==$0o.width||$4M.height!==$0o.height){if(typeof $i.onRectangleEventSelecting==="function"){var $l={};$l.events=$Q.eventsInRectangle($4M.x,$4M.y,$4M.width,$4M.height).map(function($00){return $00.event;});$l.start=$i.getDate($4M.x,true);$l.end=$i.getDate($4M.x+$4M.width,true);$i.onRectangleEventSelecting($l);}}};$0W.clear=function(){$i.divRectangle.innerHTML='';$i.elements.rectangle=[];};this.$hL=function(){var x,y;if($i.coords&&$i.rowlist&&$i.rowlist.length>0&&$i.itline&&$i.itline.length>0){x=$i.$cC($i.coords.x).x;y=$i.$em($i.coords.y).i;if(y>=$i.rowlist.length){return;}}else{return null;};var $M=$i.cells.findXy(x,y);return $M[0];};this.$hI=function(){var $P=this.$hL();if(this.hover.cell){if(this.hover.cell.x===$P.x&&this.hover.cell.y===$P.y){return;};this.$gY();};this.hover.cell=$P;if(typeof this.onCellMouseOver==='function'){var $l={};$l.cell=$P;this.onCellMouseOver($l);}};this.$gY=function(){if(!this.hover.cell){return;};if(typeof this.onCellMouseOut==='function'){var $l={};$l.cell=this.hover.cell;this.onCellMouseOut($l);};this.hover.cell=null;};this.hover={};this.$hH=function(){var $P=this.$hL();if(!$P){return;};if(this.hover.cell){if(this.hover.cell.x===$P.x&&this.hover.cell.y===$P.y){return;}};this.$hM();};this.$hB=function(){this.divCrosshair.innerHTML='';this.$hN=null;this.$hO=null;};this.$gL=function(){this.$hB();if(this.$hP&&this.$hP.parentNode){this.$hP.parentNode.removeChild(this.$hP);this.$hP=null;};if(this.$hQ){for(var i=0;i<this.$hQ.length;i++){var ch=this.$hQ[i];if(ch.parentNode){ch.parentNode.removeChild(ch);}};this.$hQ=null;};this.$bb=-1;this.$ba=-1;};this.$hM=function(){var x,y;if($i.coords&&$i.rowlist&&$i.rowlist.length>0){x=$i.$cC($i.coords.x).x;y=$i.$em($i.coords.y).i;if(y>=$i.rowlist.length){return;}}else{return;};var $X=this.crosshairType;var $x=$i.rowlist[y];if($X==='Full'){var $0K=this.itline[x];var $N=$0K.left;var $0x=this.$hN;if(!$0x){var $0x=document.createElement("div");$0x.style.height=$i.$bd+'px';$0x.style.position='absolute';$0x.style.top='0px';$0x.className=$i.$c8("_crosshair_vertical");this.$hN=$0x;this.divCrosshair.appendChild($0x);};$0x.style.left=$N+'px';$0x.style.width=$0K.width+'px';var top=$x.top;var $R=$x.height;var $A=this.$cb();var $0x=this.$hO;if(!$0x){var $0x=document.createElement("div");$0x.style.width=$A+'px';$0x.style.height=$R+'px';$0x.style.position='absolute';$0x.style.top=top+'px';$0x.style.left='0px';$0x.className=$i.$c8("_crosshair_horizontal");this.$hO=$0x;this.divCrosshair.appendChild($0x);};$0x.style.top=top+'px';$0x.style.height=$R+'px';};var $9F=this.$hR(this.coords.x);if($9F&&this.$bb!==$9F.x){if(this.$hP&&this.$hP.parentNode){this.$hP.parentNode.removeChild(this.$hP);this.$hP=null;};var $R=$4S.timeHeader($i.timeHeaders.length-1).height;var $0x=document.createElement("div");$0x.style.width=$9F.cell.width+"px";$0x.style.height=$R+"px";$0x.style.left='0px';$0x.style.top='0px';$0x.style.position='absolute';$0x.className=$i.$c8("_crosshair_top");this.$hP=$0x;var $9m=this.divNorth;var $9G=this.timeHeader?this.timeHeader.length-1:1;if(this.nav.timeHeader){this.$bg.timeHeader[$9F.x+"_"+$9G].appendChild($0x);}else{if($9m.firstChild.rows[$9G].cells[x]){$9m.firstChild.rows[$9G].cells[x].firstChild.appendChild($0x);}}};if(this.$ba!==y){if(this.$hQ){for(var i=0;i<this.$hQ.length;i++){var ch=this.$hQ[i];if(ch.parentNode){ch.parentNode.removeChild(ch);}};this.$hQ=null;};var $1W=this.rowHeaderCols?this.rowHeaderCols.length:1;this.$hQ=[];if(this.divHeader.rows[y]){for(var i=0;i<this.divHeader.rows[y].cells.length;i++){var $A=$i.$ce();var $0x=document.createElement("div");$0x.style.width=$A+"px";$0x.style.height=$x.height+"px";$0x.style.left='0px';$0x.style.top='0px';$0x.style.position='absolute';$0x.className=$i.$c8("_crosshair_left");this.$hQ.push($0x);this.divHeader.rows[y].cells[i].firstChild.appendChild($0x);}}};if($9F){this.$bb=$9F.x;};this.$ba=y;};this.$ft=function(y,$y){var $x=$i.timeHeader[y];if(!$x){return null;};for(var i=0;i<$x.length;i++){var $P=$x[i];if($y>=$P.left&&$y<$P.left+$P.width){var $j={};$j.cell=$P;$j.x=i;return $j;}};return null;};this.$hR=function($y){return $i.$ft($i.timeHeader.length-1,$y);};this.$h1=function(ev){ev=ev||window.event;if($i.timeRangeSelectedHandling==='Disabled'){return false;};if($i.timeRangeRightClickHandling==="Disabled"){return false;};var $9H=null;if($i.$hA($i.coords)){$9H=$i.$dM($i.rangeHold);}else{$9H=$i.$dM();};if(!$9H){return;};$9H.end=$i.$cY($9H.end);var $l={};$l.start=$9H.start;$l.end=$9H.end;$l.resource=$9H.resource;$l.preventDefault=function(){this.preventDefault.value=true;};if(typeof $i.onTimeRangeRightClick==="function"){$i.onTimeRangeRightClick($l);if($l.preventDefault.value){return false;}};if($i.timeRangeRightClickHandling==="ContextMenu"&&$i.contextMenuSelection){$i.contextMenuSelection.show($9H);};if(typeof $i.onTimeRangeRightClicked==="function"){$i.onTimeRangeRightClicked($l);};ev.cancelBubble=true;if(!$i.allowDefaultContextMenu){return false;}};this.$hA=function($23){var $1t=$i.rangeHold;if(!$1t||!$1t.start||!$1t.end){return false;};var $x=this.$eD($1t.start.y);var $9I=$1t.start.x<$1t.end.x;var $9J=($9I?$1t.start.x:$1t.end.x)*this.cellWidth;var $9K=($9I?$1t.end.x:$1t.start.x)*this.cellWidth+this.cellWidth;var $9L=$x.top;var $9M=$x.bottom;if($23.x>=$9J&&$23.x<=$9K&&$23.y>=$9L&&$23.y<=$9M){return true;};return false;};this.$dP=function($1t,$9N){var $1t=$1t||DayPilotScheduler.range;if(!$1t){return;};if($1t.calendar!==$i){return;};function draw($1t){var $S=$1t.end.x>$1t.start.x?$1t.start.x:$1t.end.x;var $T=($1t.end.x>$1t.start.x?$1t.end.x:$1t.start.x);var y=$1t.start.y;var $x=$i.rowlist[y];var $K=$i.itline[$S];var end=$i.itline[$T];var $N=$K.left;var $O=end.left+end.width;var $A=$O-$N;var $P=$i.elements.range2;if(!$P){$P=document.createElement("div");$P.style.position='absolute';$P.setAttribute("unselectable","on");$P.className=$i.$c8("_shadow");var $05=document.createElement("div");$05.className=$i.$c8("_shadow_inner");$P.appendChild($05);$i.divRange.appendChild($P);};$P.style.left=($K.left)+"px";$P.style.top=$i.rowlist[y].top+"px";$P.style.width=$A+"px";$P.style.height=($i.rowlist[y].height-1)+"px";$P.calendar=$i;$i.elements.range2=$P;(function checkOverlap(){$P.overlapping=false;var $x=$i.rowlist[y];var $26=$P;var $N=$K.left;$i.$fz($P,$x,$N,$A,null);$i.$fA($P,$K.start,end.end,$x.id);})();return $P;};(function(){var $S=$1t.end.x>$1t.start.x?$1t.start.x:$1t.end.x;var $T=($1t.end.x>$1t.start.x?$1t.end.x:$1t.start.x);var y=$1t.start.y;var $x=$i.rowlist[y];if(!$x){return;};var $K=$i.itline[$S];var end=$i.itline[$T];var $0H=$i.$hS;var $9O=$K.start.addTime($x.data.offset);var $9P=end.end.addTime($x.data.offset);if(!$9N&&$0H&&$0H.start.getTime()===$9O.getTime()&&$0H.end.getTime()===$9P.getTime()&&$0H.resource===$i.rowlist[y].id){return;};var $0o={"start":$9O,"end":$i.$cY($9P)};var $l={};$l.start=$0o.start;$l.end=$0o.end;$l.duration=new DayPilot.Duration($0o.start,$0o.end);$l.resource=$i.rowlist[y].id;$l.allowed=true;$l.left={};$l.left.html=$l.start.toString($i.timeRangeSelectingStartEndFormat,$0d.locale());$l.left.enabled=$i.timeRangeSelectingStartEndEnabled;$l.left.space=5;$l.left.width=null;$l.right={};$l.right.html=$l.end.toString($i.timeRangeSelectingStartEndFormat,$0d.locale());$l.right.enabled=$i.timeRangeSelectingStartEndEnabled;$l.right.space=5;$l.right.width=null;$i.$hS=$l;if(typeof $i.onTimeRangeSelecting==='function'&&!$9N){$i.onTimeRangeSelecting($l);};var $9Q=$i.$hT($1t);$i.$dO($9Q,$l.start,$l.end);var $P=draw($9Q);$i.$fF($P,$l);$1t.$hv=$9Q;$1t.disabled=!$l.allowed;$i.$fG($P,$l);$l.start=$0o.start;$l.end=$0o.end;})();};this.$hT=function($1t){return{"start":{"x":$1t.start.x,"y":$1t.start.y},"end":{"x":$1t.end.x},"disabled":$1t.disabled,"calendar":$1t.calendar}};this.range={};this.range.all=function(){return mr.get();};this.$hU={};var mr=this.$hU;this.$hU.list=[];this.$hU.clear=function(){DayPilot.de(DayPilot.list(mr.list).map(function($00){return $00.div;}));mr.list=[];};this.$hU.add=function($1t){$1t.div=$i.elements.range2;$i.elements.range2=null;$i.$fJ();mr.list.push($1t);};this.$hU.get=function(){return DayPilot.list(mr.list).map(function($00){return $i.$dM($00);});};this.$hU.dispatch=function(){if(!$i.allowMultiRange){return;};if(DayPilotScheduler.range){return;};var $0H=DayPilot.list(mr.list).last();$i.$dL($0H);};this.$hV=function(ev){if($i.timeRangeSelectedHandling==='Disabled'){return false;};if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};ev=ev||window.event;var $97=DayPilot.Util.mouseButton(ev);if(DayPilotScheduler.range){return;};if(DayPilotScheduler.rectangleSelect){return;};if($i.rangeHold&&$i.$hA($i.coords)&&($97.right||$97.middle)){return;};if($i.$ey($i.$em($i.coords.y).i)){return;};var $1t={};var cx=$i.$cC($i.coords.x).x;$1t.start={y:$i.$em($i.coords.y).i,x:cx};$1t.end={x:cx};$1t.calendar=$i;$i.rangeHold=$1t;$i.$dL($1t);};this.timeouts={};this.timeouts.drawEvents=null;this.timeouts.drawCells=null;this.timeouts.click=null;this.timeouts.resClick=[];this.timeouts.updateFloats=null;this.$bP=function(ev){$i.$bo();var $9R=$i.nav.scroll;$i.$fr=$9R.scrollLeft;$i.$fp=$9R.scrollTop;$i.$fs=$9R.clientWidth;$i.divTimeScroll.scrollLeft=$i.$fr;$i.divResScroll.scrollTop=$i.$fp;if($L.isEnabled()&&$i.$bT&&$i.cellWidthSpec!="Auto"){if($L.active){$c();}else{if($i.nav.scroll.scrollLeft<$i.infiniteScrollingMargin){$L.active=true;$i.nav.scroll.style.overflowX="hidden";setTimeout(function(){$L.shiftStart(-$i.infiniteScrollingStepDays);},100);return;}else if($i.nav.scroll.scrollWidth-($i.nav.scroll.scrollLeft+$i.nav.scroll.clientWidth)<$i.infiniteScrollingMargin){$L.active=true;$i.nav.scroll.style.overflowX="hidden";setTimeout(function(){$L.shiftStart($i.infiniteScrollingStepDays);},100);return;}}};if($i.navigatorBackSync){(function backSync(){var $9S=DayPilot.Util.evalVariable($i.navigatorBackSync);var $K=$i.getViewPort().start;$9S.select($K,{"dontNotify":true,"dontFocus":true});})();};if($i.dynamicLoading){$i.$bM();if(!$i.dynamicLoadingDelayedCellRendering){var f=$i.$hW();f();};$i.$hX();return;};if($i.timeouts.drawEvents){clearTimeout($i.timeouts.drawEvents);$i.timeouts.drawEvents=null;};if($i.scrollDelayEvents>0){$i.timeouts.drawEvents=setTimeout($i.$hY(),$i.scrollDelayEvents);}else{$i.$bJ();};if($i.timeouts.drawCells){clearTimeout($i.timeouts.drawCells);$i.timeouts.drawCells=null;};if($i.scrollDelayCells>0){$i.timeouts.drawCells=setTimeout($i.$hW(),$i.scrollDelayCells);}else{var f=$i.$hW();f();};if($i.timeouts.updateFloats){clearTimeout($i.timeouts.updateFloats);$i.timeouts.updateFloats=null;};if($i.scrollDelayFloats>0){$i.timeouts.updateFloats=setTimeout(function(){$i.$bN();},$i.scrollDelayFloats);}else{$i.$bN();};$i.onScrollCalled=true;};this.$hW=function(){return function(){if(!$i){return;};$i.$bM();$i.$bH();};};this.$hY=function(){var $1o=true;return function(){if(!$i){return;};if($i.$hg()){window.setTimeout(function(){$i.$hd();window.setTimeout(function(){$i.$bJ($1o);},50);},50);}else{$i.$c4();}};};this.$bo=function(){this.$bg.eventHeight=null;this.$bg.drawArea=null;};this.show=function(){this.visible=true;this.$bf=true;$i.nav.top.style.display='';this.$by();this.$bz();this.$eV();$i.$bP();};this.hide=function(){this.visible=false;this.$bf=false;$i.nav.top.style.display='none';};this.$hZ=function(){return;};this.$hX=function(){var $9R=$i.nav.scroll;$i.$fr=$9R.scrollLeft;$i.$fp=$9R.scrollTop;$i.$fs=$9R.clientWidth;$i.divTimeScroll.scrollLeft=$i.$fr;$i.divResScroll.scrollTop=$i.$fp;if($i.refreshTimeout){window.clearTimeout($i.refreshTimeout);};var $0c=$i.scrollDelayDynamic;$i.refreshTimeout=window.setTimeout($i.$i0($9R.scrollLeft,$9R.scrollTop),$0c);$i.$bN();};this.$i1=function($q){if(!$i.events.list){return null;};var $9T=$q.id;var $3m=new DayPilot.Date($q.start).toString();for(var j=0;j<this.events.list.length;j++){var ex=this.events.list[j];if($i.$eJ(ex,$q)){var $j={};$j.ex=ex;$j.index=j;$j.modified=!$i.$i2($q,ex);return $j;}};return null;};this.$i2=function($0N,$9U){for(var name in $0N){if(typeof $0N[name]==='object'&&!($0N[name]instanceof DayPilot.Date)){continue;};if($0N[name]!==$9U[name]){return false;}};for(var name in $9U){if(typeof $9U[name]==='object'){continue;};if($0N[name]!==$9U[name]){return false;}};return true;};this.$bK=function($9V,$9W,$7G,$9X){var $9Y=[];if($7G){$i.$bu($9V);}else{var $9Z=[];DayPilot.list($9X).forEach(function(id){var $q=DayPilot.list($i.events.list).find(function($q){return $q.id===id;});if($q){$9Z.push($q);}});$9Z.forEach(function($q){var $1d=$i.events.$d2($q);$9Y=$9Y.concat($1d);});var $a0=[];for(var i=0;i<$9V.length;i++){var e=$9V[i];$a0[i]=$i.$i1(e);};for(var i=0;i<$9V.length;i++){var e=$9V[i];var $a1=$a0[i];var $2m=$a1&&$a1.modified;var $a2=!$a1;if($2m){this.events.list[$a1.index]=e;var $1d=$i.events.$d2($a1.ex);$9Y=$9Y.concat($1d);}else if($a2){this.events.list.push(e);};if($2m||$a2){$9Y=$9Y.concat($i.events.$d3(e));}};$i.$d4($9Y);$i.$d5();};$i.$bx();$i.$bC();var $a3=!$7G;if($a3){$i.$d6($9Y,false,function(){$9W&&$9W();$i.$hd();$i.$bJ();});}else{$i.$bE();$i.$bA();$i.$bH();$i.$bJ();}};this.$i0=function(scrollX,scrollY){if(!$i.$cm()){return function(){if(typeof $i.onScroll==='function'){var $2m=function($l){var $9W=function(){if($i.$bQ()){if(typeof $i.onAfterRender==='function'){var $l={};$l.isCallBack=false;$l.isScroll=true;$l.data=null;$i.onAfterRender($l);}}};$i.$bK($l.events,$9W,$l.clearEvents,$l.remove);};var $l={};$l.viewport=$i.getViewPort();$l.async=false;$l.events=[];$l.remove=[];$l.clearEvents=false;$l.loaded=function(){if(this.async){$2m($l);}};$i.onScroll($l);if(!$l.async){$2m($l);}}};}else{return function(){$i.scrollX=scrollX;$i.scrollY=scrollY;$i.$cJ('Scroll');};}};this.$i3=function(){var $J=this.$c1();var $a4=$J.xStart;var $a5=$J.xEnd-$J.xStart;var $3W=$J.yStart;var $a6=$J.yEnd-$J.yStart;if(!this.cellProperties){this.cellProperties={};};for(var i=0;i<=$a5;i++){var x=$a4+i;for(var j=0;j<$a6;j++){var y=$3W+j;if(!this.rowlist[y].hidden){this.$eY(x,y);}};this.$i4(x);};var $a7=this.$fN();for(var y=$a7.start;y<$a7.end;y++){if(!this.rowlist[y].hidden){this.$i5(y);}}};this.$bH=function(){if($i.$bc){return;};if($i.progressiveRowRendering){this.$dn();};if(this.rowlist!==null&&this.rowlist.length>0){var $a8=this.cellSweeping;if($a8){var $a9=this.cellSweepingCacheSize;this.$hf($a9);};this.$i3();this.$i6();$1N.$ge();};this.$dy=false;};this.$i6=function(){var $J=this.$c1();for(var x=$J.xStart;x<$J.xEnd;x++){var $aa=(x<this.itline.length-1)?this.itline[x+1].breakBefore:false;if($aa){this.$i7(x);}}};this.$i7=function(x){var $1B="x"+x;if(this.$bg.breaks[$1B]){return;};var $N=this.itline[x+1].left-1;var $R=this.$bd;var $0x=document.createElement("div");$0x.style.left=$N+"px";$0x.style.top="0px";$0x.style.width="1px";$0x.style.height=$R+"px";$0x.style.fontSize='1px';$0x.style.lineHeight='1px';$0x.style.overflow='hidden';$0x.style.position='absolute';$0x.setAttribute("unselectable","on");$0x.className=this.$c8("_matrix_vertical_break");this.divBreaks.appendChild($0x);this.elements.breaks.push($0x);this.$bg.breaks[$1B]=$0x;};this.$c1=function(){if($i.$bg.drawArea){return $i.$bg.drawArea;};if(!this.nav.scroll){return null;};var $ab=$i.$fp;var $J={};var $ac=this.dynamicEventRenderingMarginX!=null?this.dynamicEventRenderingMarginX:this.dynamicEventRenderingMargin;var $ad=this.dynamicEventRenderingMarginY!=null?this.dynamicEventRenderingMarginY:this.dynamicEventRenderingMargin;var $N=$i.$fr-$ac-$L.shiftX;var $O=$N+$i.$fs+2*$ac;var $K=0;var end=0;if($i.itline&&$i.itline.length>0){$K=$i.$cC($N).x;end=$i.$cC($O,true).x;var $3Z=this.$fq();end=Math.min(end,$3Z);$K=Math.max($K,0);};var top=$ab-$ad;var $W=$ab+this.nav.scroll.offsetHeight+2*$ad;var $3W=this.$em(top).i;var $3X=this.$em($W).i;if($3X<this.rowlist.length){$3X++;};$J.xStart=$K;$J.xEnd=end;$J.yStart=$3W;$J.yEnd=$3X;$J.pixels={};$J.pixels.left=this.nav.scroll.scrollLeft-$L.shiftX;$J.pixels.right=this.nav.scroll.scrollLeft-$L.shiftX+this.nav.scroll.clientWidth;$J.pixels.top=this.nav.scroll.scrollTop;$J.pixels.bottom=this.nav.scroll.scrollTop+this.nav.scroll.clientHeight;$J.pixels.width=this.nav.scroll.scrollWidth;$i.$bg.drawArea=$J;return $J;};this.$cb=function(){var $j=0;var $0H=this.itline[this.itline.length-1];if(!$0H){$j=0;}else{$j=$0H.left+$0H.width;};if($j<0||isNaN($j)){$j=0;};return $j;};this.$i5=function(y){var $1B="y"+y;if(this.$bg.linesHorizontal[$1B]){return;};var top=this.rowlist[y].top+this.rowlist[y].height-1;var $A=this.$cb();var $0x=document.createElement("div");$0x.style.left="0px";$0x.style.top=top+"px";$0x.style.width=$A+"px";$0x.style.height="1px";$0x.style.fontSize='1px';$0x.style.lineHeight='1px';$0x.style.overflow='hidden';$0x.style.position='absolute';$0x.setAttribute("unselectable","on");$0x.className=this.$c8("_matrix_horizontal_line");this.divLines.appendChild($0x);this.$bg.linesHorizontal[$1B]=$0x;};this.$i4=function(x){var $0K=this.itline[x];if(!$0K){return;};var $1B="x"+x;if(this.$bg.linesVertical[$1B]){return;};var $N=$0K.left+$0K.width-1;var $0x=document.createElement("div");$0x.style.left=$N+"px";$0x.style.top="0px";$0x.style.width="1px";$0x.style.height=$i.$bd+"px";$0x.style.fontSize='1px';$0x.style.lineHeight='1px';$0x.style.overflow='hidden';$0x.style.position='absolute';$0x.setAttribute("unselectable","on");$0x.className=this.$c8("_matrix_vertical_line");this.divLines.appendChild($0x);this.elements.linesVertical.push($0x);this.$bg.linesVertical[$1B]=$0x;};this.$fh=function($1B){var $x=this.rowlist[$1B];var $ae=!$x.expanded;$x.expanded=$ae;if($x.resource){$x.resource.expanded=$ae;};var $1d=this.$i8($1B,$x.expanded);if(!$ae){for(var i=0;i<$1d.length;i++){var ri=$1d[i];this.$dz(ri);}};this.$bx();this.$bv();this.$bC();this.$bo();if($ae){for(var i=0;i<$1d.length;i++){var ri=$1d[i];this.$dA(ri);};this.$c4();};this.$dB();$1k.load();this.$bD();this.$bH();this.$bJ();this.$bM();this.$bo();var r=this.$dV($x,$1B);if($ae){this.$e4(r);}else{this.$e3(r);}};this.$g4=function(i){var $0Y={};$0Y.index=i;if(typeof this.onLoadNode==='function'){var $l={};var $1s=this.rowlist[i].resource;$l.resource=$1s;$l.async=false;$l.loaded=function(){if(this.async){$1s.dynamicChildren=false;$1s.expanded=true;$i.update();}};this.onLoadNode($l);if(!$l.async){$1s.dynamicChildren=false;$1s.expanded=true;this.update();}}else{this.$cJ('LoadNode',$0Y);}};this.$i8=function(i,$af){var $x=this.rowlist[i];var $7W=[];if($x.children===null||$x.children.length===0){return $7W;};for(var k=0;k<$x.children.length;k++){var $1B=$x.children[k];var $ag=this.rowlist[$1B];var $8L=$af&&$x.expanded&&!$ag.$gv;$ag.hidden=!$8L;if($af===!$ag.hidden){$7W.push($1B);};var $ah=this.$i8($1B,$af);if($ah.length>0){$7W=$7W.concat($ah);}};return $7W;};this.$hJ=function($ai,$aj){this.$gX();this.$i9($ai,$aj);};this.$ia=function($F){if(!$F){return false;};var $0g=this.nav.scroll.scrollWidth;var $K=this.nav.scroll.scrollLeft;var $A=this.nav.scroll.clientWidth;var $O=$K+$A;if($F<0&&$K<=0){return false;};if($F>0&&$O>=$0g){return false;};this.nav.scroll.scrollLeft+=$F;$i.coords.x+=$F;$i.$ib();return true;};this.$ic=function($F){if(!$F){return false;};var $0g=this.nav.scroll.scrollHeight;var $K=this.nav.scroll.scrollTop;var $R=this.nav.scroll.clientHeight;var $W=$K+$R;if($F<0&&$K<=0){return false;};if($F>0&&$W>=$0g){return false;};this.nav.scroll.scrollTop+=$F;$i.coords.y+=$F;$i.$ib();return true;};this.$ib=function(){if(DayPilotScheduler.resizing&&DayPilotScheduler.resizing.event.calendar===$i){$i.$hE();}else if(DayPilotScheduler.moving&&(DayPilotScheduler.movingEvent.calendar===$i||DayPilotScheduler.movingEvent.calendar.dragOutAllowed)){if(!DayPilotScheduler.moving.event){DayPilotScheduler.moving.event=DayPilotScheduler.movingEvent;};$i.$hF();}else if(DayPilotScheduler.range&&DayPilotScheduler.range.calendar===$i){$i.$hG();}};this.$i9=function($ai,$aj){var $ak=this.$ia($ai)||this.$ic($aj);if(!$ak){return;};var $al=function($ai,$aj){return function(){$i.$i9($ai,$aj);};};this.$id=window.setTimeout($al($ai,$aj),100);};this.$gX=function(){if($i.$id){window.clearTimeout($i.$id);$i.$id=null;}};this.$bx=function(){var top=0;for(var i=0;i<this.rowlist.length;i++){var $x=this.rowlist[i];if(!$x.hidden){$x.top=top;top+=$x.height;}};this.$bd=top;};this.$bD=function(){if(DayPilot.browser.ie){$i.$ie();};this.elements.cells=[];this.elements.breaks=[];this.$bg.cells=[];this.$bg.breaks=[];this.divCells.innerHTML='';this.divBreaks.innerHTML='';$i.$fX();};this.$fX=function(){this.divLines.innerHTML='';this.$bg.linesVertical={};this.$bg.linesHorizontal={};this.elements.linesVertical=[];};this.$ie=function(y){var $Y=DayPilot.list();for(var name in $i.$bg.cells){$Y.push($i.$bg.cells[name]);};$Y.each(function($00){$i.$eX($00);});};this.$dC=function(y){var $Y=DayPilot.list();for(var name in $i.$bg.cells){$Y.push($i.$bg.cells[name]);};$Y.filter(function($00){return $00&&$00.coords&&$00.coords.y===y;}).each(function($00){$i.$eX($00);});};this.$if=0;this.$ig=DayPilot.list(['html','cssClass','backColor','backImage','backRepeat','areas','disabled']);this.$ih=$i.$ig.add('business');this.$eY=function(x,y){if(!this.$bT){return;};var $0K=$i.$cL(x);if(!$0K){return;};var $1B=x+'_'+y;if(this.$bg.cells[$1B]){return;};var p=this.$eZ(x,y);$i.$fv(x,y);if(!this.drawBlankCells){var $am=false;if(this.$fe(y)){$am=false;}else if(!this.$ii(p,$i.$ig)){$am=true;};if($am){return;}};var $P=document.createElement("div");$P.style.left=($0K.left)+"px";$P.style.top=this.rowlist[y].top+"px";$P.style.width=($0K.width)+"px";$P.style.height=(this.rowlist[y].height)+"px";$P.style.position='absolute';if(p&&p.backColor){$P.style.backgroundColor=p.backColor;};$P.setAttribute("unselectable","on");$P.className=this.$c8('_cell');$P.coords={};$P.coords.x=x;$P.coords.y=y;if(this.$fe(y)){DayPilot.Util.addClass($P,this.$c8("_cellparent"));};if(p){if(p.cssClass){DayPilot.Util.addClass($P,p.cssClass);};if(!DayPilot.Util.isNullOrUndefined(p.html)){$P.innerHTML=p.html;};if(p.backImage){$P.style.backgroundImage="url(\"" + p.backImage + "\")";};if(p.backRepeat){$P.style.backgroundRepeat=p.backRepeat;};if(p.business&&$i.cellsMarkBusiness){DayPilot.Util.addClass($P,$i.$c8("_cell_business"));};DayPilot.list(p.areas).each(function($J){if($J.start||$J.end){$J.left=$i.getPixels(new DayPilot.Date($J.start)).left-$0K.left;$J.width=$i.getPixels(new DayPilot.Date($J.end)).left-$J.left-$0K.left;}});var c=$i.cells.findXy(x,y)[0];DayPilot.Areas.attach($P,c,{"areas":p.areas});};this.divCells.appendChild($P);this.elements.cells.push($P);this.$bg.cells[$1B]=$P;};this.$cu={};this.$eV=function(){var $1d=$i.$ij();$1d.each(function(y){$i.$dC(y);});$i.$bH();};this.$ij=function(){var $j=DayPilot.list();var $J=this.$c1();var $a4=$J.xStart;var $a5=$J.xEnd-$J.xStart;var $3W=$J.yStart;var $a6=$J.yEnd-$J.yStart;for(var j=0;j<$a6;j++){var y=$3W+j;for(var i=0;i<=$a5;i++){var x=$a4+i;if(!this.rowlist[y].hidden){if(!$i.$cu[x+"_"+y]){$j.push(y);break;}}}};return $j;};this.$fv=function(x,y){if(typeof this.onBeforeCellRender==='function'){if($i.beforeCellRenderCaching&&$i.$cu[x+"_"+y]){return;};$i.$cu[x+"_"+y]=true;var $0K=$i.$cL(x);if(!$0K){return;};var $P=$i.cells.findXy(x,y)[0];var $l={};$l.cell=$P;$l.getPixels=function($u){var $u=new DayPilot.Date($u);var $an=$i.getPixels($u).left;return $an-$0K.left;};this.onBeforeCellRender($l);DayPilot.Util.copyProps($l.cell,$l.cell.properties,$i.$ih);if($l.cell.properties.disabled){$i.$cu.$fH=true;};return $l;}};this.$ii=function($21,$06){if($06){for(var i=0;i<$06.length;i++){if(!DayPilot.Util.isNullOrUndefined($21[$06[i]])){return true;}}}else{for(var name in $21){if(!DayPilot.Util.isNullOrUndefined($21[name])){return true;}}};return false;};this.clearSelection=function(){this.$bL();mr.clear();};this.cleanSelection=this.clearSelection;this.selectTimeRange=function($K,end,$1s,$ao){var $x=$i.$bZ($1s);var $ap=$i.$cE($K);var $3B=$ap.current||$ap.next;if(!$3B){throw new DayPilot.Exception("Time range selection 'start' out of timeline");};var $aq=$i.$cE(new DayPilot.Date(end).addSeconds(-1));var $3C=$aq.current||$aq.previous;if(!$3C){throw new DayPilot.Exception("Time range selection 'end' out of timeline");};var $1t={};$1t.start={y:$x.index,x:DayPilot.indexOf($i.itline,$3B)};$1t.end={x:DayPilot.indexOf($i.itline,$3C)};$1t.calendar=this;$i.$dP($1t);if(!$ao){setTimeout(function(){$i.$dL($1t);},0);}};this.$dH=function(){DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow=null;$i.$fJ();$i.$fC.clear();if(DayPilot.Global.movingLink){DayPilot.Global.movingLink.clear();DayPilot.Global.movingLink=null;}};this.$bL=function(){this.divRange.innerHTML='<div style="position:absolute; left:0px; top:0px; width:0px; height:0px;"></div>';this.elements.range=[];this.elements.range2=null;this.$fJ();$i.rangeHold=null;};this.$dp={};var $0d=this.$dp;$0d.clearCache=function(){delete $i.$bg.eventHeight;delete $i.$bg.headerHeight;};$0d.locale=function(){return DayPilot.Locale.find($i.locale);};$0d.timeFormat=function(){if($i.timeFormat!=='Auto'){return $i.timeFormat;};return $0d.locale().timeFormat;};$0d.weekStarts=function(){if($i.weekStarts==='Auto'){var $7n=$0d.locale();if($7n){return $7n.weekStarts;}else{return 0;}}else{return $i.weekStarts||0;}};$0d.layout=function(){var $ar=/MSIE 6/i.test(navigator.userAgent);if($i.layout==='Auto'){if($ar){return 'TableBased';}else{return 'DivBased';}};return $i.layout;};$0d.notifyType=function(){var $X;if($i.notifyCommit==='Immediate'){$X="Notify";}else if($i.notifyCommit==='Queue'){$X="Queue";}else{throw "Invalid notifyCommit value: "+$i.notifyCommit;};return $X;};$0d.isResourcesView=function(){return $i.viewType!=='Days';};$0d.useBox=function($as){if($i.useEventBoxes==='Always'){return true;};if($i.useEventBoxes==='Never'){return false;};return $as<$i.$f5()*60*1000;};$0d.eventHeight=function(){if($i.$bg.eventHeight){return $i.$bg.eventHeight;};var $R=$i.$h5("_event_height").height;if(!$R){$R=$i.eventHeight;};$i.$bg.eventHeight=$R;return $R;};$0d.headerHeight=function(){if($i.$bg.headerHeight){return $i.$bg.headerHeight;};var $R=$i.$h5("_header_height").height;if(!$R){$R=$i.headerHeight;};$i.$bg.headerHeight=$R;return $R;};$0d.splitterWidth=function(){if($i.rowHeaderScrolling){return $i.rowHeaderSplitterWidth;};return 1;};this.$ik={};var $4S=this.$ik;$4S.timeHeader=function($78){var h={};h.top=0;h.height=0;var $at=$0d.headerHeight();for(var i=0;i<=$78;i++){var th=$i.timeHeaders[i];h.top+=h.height;h.height=th.height||$at;};return h;};this.$il=function(x,y){var $1B=x+'_'+y;if(this.cellProperties&&this.cellProperties[$1B]){return this.cellProperties[$1B].backColor;};return null;};this.$eZ=function(x,y){var $1B=x+'_'+y;if($i.cellConfig){var $au=0;for(var i=0;i<$i.resources.length;i++){if(!$i.resources[i].hidden){if($au===y){y=i;break;};$au+=1;}}};if(!this.cellProperties){this.cellProperties={};};if(this.cellProperties[$1B]){return this.cellProperties[$1B];};if(this.$b6){this.cellProperties[$1B]=$i.$im(x,y);};if(!this.cellProperties[$1B]){var $x=$i.rowlist[y];var $1s=$x.id;var $1x=$x.start.getTime()-$i.$cs().getTime();var $0K=$i.$cL(x);var $K=$0K.start.addTime($1x);var end=$0K.end.addTime($1x);var $av={};$av.start=$K;$av.end=end;$av.resource=$1s;var $P={};$P.business=$i.isBusiness($av);this.cellProperties[$1B]=$P;};return this.cellProperties[$1B];};this.$in=function($1C,x,y){var $1B=x+'_'+y;this.cellProperties[$1B]={};DayPilot.Util.copyProps($1C,this.cellProperties[$1B],$i.$ih);return this.cellProperties[$1B];};this.$im=function(x,y){if(!this.cellConfig){return null;};var $5A=this.cellConfig;var $P=this.cellProperties[x+"_"+y];if(!$P&&$5A.vertical){$P=this.cellProperties[x+"_0"];};if(!$P&&$5A.horizontal){$P=this.cellProperties["0_"+y];};if(!$P&&$5A["default"]){$P=$5A["default"];};var $9Q={};DayPilot.Util.copyProps($P,$9Q,$i.$ih);return $9Q;};this.$bt=function(){if(this.$b6){return;};if(this.$b7){return;};this.$b7=true;if(!this.cellConfig){return;};var $5A=this.cellConfig;if($5A.vertical){for(var x=0;x<$5A.x;x++){var $aw=this.cellProperties[x+"_0"];if(!$aw){continue;};for(var y=1;y<$5A.y;y++){this.$in($aw,x,y);}}};if($5A.horizontal){for(var y=0;y<$5A.y;y++){var $aw=this.cellProperties["0_"+y];if(!$aw){continue;};for(var x=1;x<$5A.x;x++){this.$in($aw,x,y);}}};if($5A["default"]){var $aw=$5A["default"];for(var y=0;y<$5A.y;y++){for(var x=0;x<$5A.x;x++){if(!this.cellProperties[x+"_"+y]){this.$in($aw,x,y);}}}}};this.isBusiness=function($P,$0y){var $K=$P.start;var end=$P.end;var $3D=(end.getTime()-$K.getTime())/(1000*60);if($3D<=1440){if(!$i.businessWeekends&&!$0y){if($P.start.dayOfWeek()===0||$P.start.dayOfWeek()===6){return false;}}};if($3D<720){var $ax=$K.getHours();$ax+=$K.getMinutes()/60.0;$ax+=$K.getSeconds()/3600.0;$ax+=$K.getMilliseconds()/3600000.0;if($ax<this.businessBeginsHour){return false;};if(this.businessEndsHour>=24){return true;};if($ax>=this.businessEndsHour){return false;}};return true;};this.$io=function(){switch($i.$bh){case "aspnet":if(!this.$ed()){throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");};break;case "netmvc":if(!this.backendUrl){throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");};break;case "javaxx":if(!this.backendUrl){throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/");};break;}};this.$by=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.$fQ=function(){var el=$i.nav.top;if(!el){return false;};return el.offsetWidth>0&&el.offsetHeight>0;};this.$ip=function(){var $8L=$i.$fQ;if(!$8L()&&!$i.$es){$i.$es=setInterval(function(){if($8L()){clearInterval($i.$es);$i.show();$i.$fP();}},100);}};this.$iq=function($y){if(this.heightSpec!=="Parent100Pct"){this.heightSpec="Fixed";};this.height=$y-(this.$cd()+2);this.$bC();};this.setHeight=this.$iq;this.$bZ=function(id){return DayPilot.list($20.rowcache[id]).first();};this.$gC=function(){if(this.id&&this.id.tagName){this.nav.top=this.id;}else if(typeof this.id==="string"){this.nav.top=document.getElementById(this.id);if(!this.nav.top){throw "DayPilot.Scheduler: The placeholder element not found: '"+id+"'.";}}else{throw "DayPilot.Scheduler() constructor requires the target element or its ID as a parameter";}};this.$ir=function(){this.$h4();this.$bs();this.$bz();this.$h8();this.$eq();DayPilotScheduler.register(this);this.$bm(this.afterRenderData,false);this.$h9();this.$bl();this.$cJ("Init");};this.init=function(){this.$io();this.$is();this.$it();this.$ip();this.$gR();return this;};this.$it=function(){this.$gC();if(this.nav.top.dp){return;};this.$gB();var $ay=this.$eE();if($ay){this.$ir();this.$bT=true;this.$bo();return;};this.$h8();this.$eq();DayPilotScheduler.register(this);this.$h9();this.$da();var angular=$i.$du.scope||$i.$bR.enabled;if($i.scrollToDate){$i.scrollTo($i.scrollToDate);}else if($i.scrollX||$i.scrollY){$i.setScroll($i.scrollX,$i.scrollY);}else if(!angular){$i.$bP();};if($i.scrollToResourceId){$i.scrollToResource($i.scrollToResourceId);$i.scrollToResourceId=null;};var $az=function(){if($i.scrollY){$i.setScroll($i.scrollX,$i.scrollY);}};window.setTimeout($az,200);if(this.messageHTML){window.setTimeout(function(){$i.message($i.messageHTML);},0);};this.$bl();this.$bo();this.$bm(this.afterRenderData,false);if($i.initEventEnabled){setTimeout(function(){$i.$cJ("Init");});};this.$iu();this.$bT=true;this.$er=true;var p=$i.$bU;if(p){$i.scrollTo(p.date,p.animated,p.position);}else{$i.$bP();}};this.$is=function(){if($i.$cm()){delete $i.infinite;}};this.$iv=null;this.$dw=function($h){if(!$h){return;};var $aA={"events":{"preInit":function(){var $Z=this.data;if(!$Z){return;};if(DayPilot.isArray($Z.list)){$i.events.list=$Z.list;}else{$i.events.list=$Z;}},"postInit":function(){}},"links":{"preInit":function(){var $aB=this.data;if(!$aB){return;};if(DayPilot.isArray($aB.list)){$i.links.list=$aB.list;}else{$i.links.list=$aB;}},"postInit":function(){}},"scrollTo":{"preInit":function(){},"postInit":function(){if(this.data){$i.scrollTo(this.data,$h.scrollToAnimated,$h.scrollToPosition);}}},"scrollX":{"postInit":function(){if(this.data){$i.setScrollX(this.data);}}},"scrollY":{"postInit":function(){if(this.data){$i.setScrollY(this.data);}}}};$i.$iv=$aA;if($i.$bR.scrollToRequested){$aA.scrollTo.data=$i.$bR.scrollToRequested;$i.$bR.scrollToRequested=null;};if($i.$bR.scrollXRequested){$aA.scrollX.data=$i.$bR.scrollXRequested;$i.$bR.scrollXRequested=null;};if($i.$bR.scrollYRequested){$aA.scrollY.data=$i.$bR.scrollYRequested;$i.$bR.scrollYRequested=null;};for(var name in $h){if($aA[name]){var $00=$aA[name];$00.data=$h[name];if($00.preInit){$00.preInit();}}else{$i[name]=$h[name];}}};this.$iu=function(){var $aA=$i.$iv;for(var name in $aA){var $00=$aA[name];if($00.postInit){$00.postInit();}};$i.$iv={};};this.temp={};this.temp.getPosition=function(){var x=Math.floor($i.coords.x/$i.cellWidth);var y=$i.$em($i.coords.y).i;if(y<$i.rowlist.length){var $P={};$P.start=$i.itline[x].start;$P.end=$i.itline[x].end;$P.resource=$i.rowlist[y].id;return $P;}else{return null;}};this.internal={};this.internal.initialized=function(){return $i.$bT;};this.internal.dragInProgress=this.$hD;this.internal.invokeEvent=this.$cW;this.internal.eventMenuClick=this.$dK;this.internal.timeRangeMenuClick=this.$dR;this.internal.resourceHeaderMenuClick=this.$dT;this.internal.linkMenuClick=this.$dS;this.internal.bubbleCallBack=this.$dI;this.internal.findEventDiv=this.$dh;this.internal.rowtools=this.$e1;this.internal.getNodeChildren=this.$eo;this.internal.callback=function(){$i.$cJ.apply($i,arguments);};this.internal.createRowObject=this.$dV;this.internal.restools=this.$gp;this.internal.gantt=null;this.internal.adjustEndIn=$i.$dD;this.internal.adjustEndNormalize=$i.$dE;this.internal.touch=$i.$hr;this.internal.cssNames=$i.$ht;this.internal.enableCellStacking=function($8g){$i.$b8=true;$i.$b9=$8g;};this.internal.deleteDragSource=function(){$i.$bj();};this.internal.skipUpdate=$i.$bR.skipUpdate;this.internal.skipped=$i.$bR.skipped;this.internal.loadOptions=$i.$dw;this.internal.postInit=$i.$iu;this.internal.enableAngular2=function(){$i.$bR.enabled=true;};this.Init=this.init;this.$dw($h);};debug=new DayPilot.Scheduler().v==="${v\u007d";DayPilot.Row=function($x,$i){if(!$x){throw "Now row object supplied when creating DayPilot.Row";};if(!$i){throw "No parent control supplied when creating DayPilot.Row";};var $1B=DayPilot.indexOf($i.rowlist,$x);this.$iw={};var $0o=this.$iw;$0o.id=$x.id;$0o.name=$x.name;$0o.data=$x.resource;$0o.tags=$x.tags;var r=this;r.isRow=true;r.menuType='resource';r.start=$x.start;r.name=$x.name;r.value=$x.id;r.id=$x.id;r.tags=$x.tags;r.bubbleHtml=$x.bubbleHtml;r.index=$1B;r.level=$x.level;r.calendar=$i;r.data=$x.resource;r.$ix=$x;r.$={};r.$.row=$x;r.toJSON=function($6z){var $1K={};$1K.start=this.start;$1K.name=this.name;$1K.value=this.value;$1K.id=this.id;$1K.index=this.index;return $1K;};r.parent=function(){if(!r.$ix.$gw){return null;};return $i.$dV(r.$ix.$gw);};r.children=function(){var $Y=DayPilot.list(r.$.row.children).map(function(i){return $i.$dV($i.rowlist[i]);});$Y.add=function($ag){var r1=r.$.row.resource;if(!r1.children){r1.children=[];};r1.children.push($ag);};return $Y;};r.loaded=function(){return r.$ix.loaded;};r.cells={};r.cells.all=function(){var $Y=[];var $1Q=$i.itline.length;var y=r.index;for(var x=0;x<$1Q;x++){var $P=$i.cells.findXy(x,y);$Y.push($P[0]);};return $i.$f0($Y);};r.cells.forRange=function($K,end){var $x=r;var $1x=$x.start.getTime()-$i.$cs().getTime();$K=new DayPilot.Date($K);end=new DayPilot.Date(end);var $34=$i.$cs().addTime($1x);var $27=$i.$cx().addTime($1x);if($K<$34){$K=$34;};if(end>$27){end=$27;};var $42=$i.cells.find($K,r.id)[0];var $43=$i.cells.find(end.addTime(-1),r.id)[0];if(!$42){return null;};if(!$43){return null;};if($42.y!==$43.y){return null;};var y=$42.y;var $Y=[];for(var x=$42.x;x<=$43.x;x++){$Y.push($i.cells.$eW(x,y));};return $i.$f0($Y);};r.cells.totalDuration=function(){return new DayPilot.Duration(r.cells.all().map(function($P){return $P.end.getTime()-$P.start.getTime();}).reduce(function($aC,$aD){return $aC+$aD;},0));};r.events={};r.events.all=function(){var $Y=DayPilot.list();for(var i=0;i<r.$ix.events.length;i++){$Y.push(r.$ix.events[i]);};return $Y;};r.events.isEmpty=function(){return r.$ix.events.length===0;};r.events.forRange=function($K,end){return r.$ix.events.forRange($K,end);};r.events.totalDuration=function(){var $0z=0;r.events.all().each(function($00){$0z+=$00.part.end.getTime()-$00.part.start.getTime();});return new DayPilot.Duration($0z);};r.groups={};r.groups.collapseAll=function(){for(var i=0;i<r.$ix.blocks.length;i++){var $6G=r.$ix.blocks[i];var $aE=new $aF($6G);$aE.$iy();};$i.$d5();$i.$d6(r.index);$i.$bC();};r.groups.expandAll=function(){for(var i=0;i<r.$ix.blocks.length;i++){var $6G=r.$ix.blocks[i];var $aE=new $aF($6G);$aE.$iz();};$i.$d5();$i.$d6(r.index);$i.$bC();};r.groups.expanded=function(){var $Y=[];for(var i=0;i<r.$ix.blocks.length;i++){var $6G=r.$ix.blocks[i];if($6G.expanded&&$6G.lines.length>$i.groupConcurrentEventsLimit){$Y.push(new $aF($6G));}};return DayPilot.list($Y);};r.groups.collapsed=function(){var $Y=[];for(var i=0;i<r.$ix.blocks.length;i++){var $6G=r.$ix.blocks[i];if(!$6G.expanded){$Y.push(new $aF($6G));}};return DayPilot.list($Y);};r.groups.all=function(){var $Y=[];for(var i=0;i<r.$ix.blocks.length;i++){var $6G=r.$ix.blocks[i];$Y.push(new $aF($6G));};return DayPilot.list($Y);};r.events.collapseGroups=r.groups.collapseAll;r.events.expandGroups=r.groups.expandAll;r.column=function(i){return new $aG(r,i);};r.toggle=function(){$i.$fh(r.index);};r.collapse=function(){if(r.$.row.expanded){r.toggle();}};r.expand=function(){if(!r.$.row.expanded){r.toggle();}};r.remove=function(){$i.rows.remove(r);};r.edit=function(){$i.rows.edit(r);};r.addClass=function($5y){var $x=r;var $6h=$i.divHeader;var $x=$6h.rows[$x.index];if($x){var $M=DayPilot.list($x.cells).map(function($P){return $P.cellDiv;});DayPilot.Util.addClass($M,$5y);};r.$.row.cssClass=DayPilot.Util.addClassToString(r.$.row.cssClass,$5y);};r.removeClass=function($5y){var $x=r;var $6h=$i.divHeader;var $x=$6h.rows[$x.index];if($x){var $M=DayPilot.list($x.cells).map(function($P){return $P.cellDiv;});DayPilot.Util.removeClass($M,$5y);};r.$.row.cssClass=DayPilot.Util.removeClassFromString(r.$.row.cssClass,$5y);};var $aF=function($6G){var $aH=function($6G){for(var i=0;i<$i.elements.events.length;i++){var $02=$i.elements.events[i];if($02.event===$6G){return $02;}};return null;};this.$iz=function(){$6G.expanded=true;var $Y=$i.$g9;DayPilot.list($6G.events).each(function(e){$Y.push(e.id());});var $02=$aH($6G);if($02){$i.$hc($02);var $8Q=DayPilot.indexOf($i.elements.events,$02);if($8Q!==-1){$i.elements.events.splice($8Q,1);}}};this.expand=function(){this.$iz();$i.$d5();$i.$d6($6G.row.index);$i.$bC();};this.$iy=function(){if($6G.lines.length>$i.groupConcurrentEventsLimit){$6G.expanded=false;var $3J=DayPilot.list($6G.events).map(function(e){return e.id()});$i.$g9=$i.$g9.filter(function($00){return !DayPilot.contains($3J,$00);});}};this.collapse=function(){this.$iy();$i.$d5();$i.$d6($6G.row.index);$i.$bC();};};var $aG=function($x,i){this.html=function($0b){var $6h=$x.calendar.divHeader;var $P=$6h.rows[$x.index].cells[i];var $4P=$P.textDiv;if(typeof $0b==="undefined"){return $4P.innerHTML;}else{$4P.innerHTML=$0b;}};};};DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.originalMouse=null;DayPilotScheduler.resizing=null;DayPilotScheduler.resizingEvent=null;DayPilotScheduler.preventEventClick=false;DayPilotScheduler.globalHandlers=false;DayPilotScheduler.timeRangeTimeout=null;DayPilotScheduler.selectedCells=null;DayPilotScheduler.dragStart=function(element,$0Q,id,$4P){DayPilot.us(element);var $aI=DayPilotScheduler.drag={};$aI.element=element;$aI.duration=$0Q;$aI.text=$4P;$aI.id=id;$aI.data={"id":id,"text":$4P,"duration":$0Q,"externalHtml":$4P};return false;};DayPilot.Scheduler.startDragging=function($h){var $h=$h||{};var element=$h.element;var $aJ=$h.keepElement?null:element;DayPilot.us(element);var $aI=DayPilotScheduler.drag={};$aI.element=$aJ;$aI.id=$h.id;$aI.duration=$h.duration||60;$aI.text=$h.text||"";$aI.data=$h;return false;};DayPilot.Scheduler.makeDraggable=function($h){$h=$h||{};var element=$h.element;var $aJ=$h.keepElement?null:($h.remove||element);if(!element){throw new DayPilot.Exception("makeDraggable(options): options.element must be specified");};DayPilot.us(element);DayPilot.re(element,"mousedown",function(ev){if(!DayPilot.Util.mouseButton(ev).left){return;};startDragging();var element=(ev.target||ev.srcElement);if(element.tagName){var $aK=element.tagName.toLowerCase();if($aK==="textarea"||$aK==="select"||$aK==="input"){return false;}};ev.preventDefault&&ev.preventDefault();return false;});element.ontouchstart=function(ev){var $98=0;window.setTimeout(function(){startDragging();DayPilotScheduler.gTouchMove(ev);ev.preventDefault();},$98);ev.preventDefault();};function startDragging(){var $0Q=$h.duration||60;if($0Q instanceof DayPilot.Duration){$0Q=$0Q.totalSeconds();};var $aI=DayPilotScheduler.drag={};$aI.element=$aJ;$aI.id=$h.id;$aI.duration=$0Q;$aI.text=$h.text||"";$aI.data=$h;}};DayPilot.Scheduler.stopDragging=function(){if(DayPilotScheduler.drag){if(DayPilotScheduler.drag.schedulerSourceEvent){var e=DayPilotScheduler.drag.schedulerSourceEvent;var $aL=e.event.calendar;DayPilot.Util.removeClass(e,$aL.$c8($i.$ht.eventMovingSource));}};DayPilotScheduler.dragStop();if(DayPilotScheduler.resizing){DayPilot.de(DayPilotScheduler.resizingShadow);DayPilotScheduler.resizing=null;DayPilotScheduler.resizingEvent=null;DayPilotScheduler.resizingShadow=null;};if(DayPilotScheduler.moving){var $i=DayPilotScheduler.movingEvent.calendar;DayPilot.Util.removeClass(DayPilotScheduler.moving,$i.$c8($i.$ht.eventMovingSource));DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.movingShadow=null;};if(DayPilotScheduler.range){var $i=DayPilotScheduler.range.calendar;$i.clearSelection();DayPilotScheduler.range=null;};document.body.style.cursor='';DayPilot.list(DayPilotScheduler.registered).each(function($i){$i.$gX();$i.$fJ();$i.$e1.resetMoving();});};DayPilotScheduler.dragStop=function(){if(DayPilotScheduler.gShadow){document.body.removeChild(DayPilotScheduler.gShadow);DayPilotScheduler.gShadow=null;};DayPilotScheduler.drag=null;};DayPilotScheduler.register=function($i){if(!DayPilotScheduler.registered){DayPilotScheduler.registered=DayPilot.list();DayPilotScheduler.registered.out=function(){var $Y=DayPilotScheduler.registered;$Y.forEach(function(c){c.$fT();});};};for(var i=0;i<DayPilotScheduler.registered.length;i++){if(DayPilotScheduler.registered[i]===$i){return;}};DayPilotScheduler.registered.push($i);};DayPilotScheduler.unregister=function($i){var a=DayPilotScheduler.registered;if(a){var i=DayPilot.indexOf(a,$i);if(i!==-1){a.splice(i,1);};if(a.length===0){a=null;}};if(!a){DayPilot.ue(document,'mousemove',DayPilotScheduler.gMouseMove);DayPilot.ue(document,'mouseup',DayPilotScheduler.gMouseUp);DayPilot.ue(document,'mousedown',DayPilotScheduler.gMouseDown);DayPilot.ue(document,'touchmove',DayPilotScheduler.gTouchMove);DayPilot.ue(document,'touchend',DayPilotScheduler.gTouchEnd);DayPilot.ue(window,'keyup',DayPilotScheduler.gKeyUp);DayPilotScheduler.globalHandlers=false;}};function calendarFromTouchEvent(ev){var $aM=ev.touches[0].clientX;var $aN=ev.touches[0].clientY;var el=document.elementFromPoint($aM,$aN);while(el&&el.parentNode){el=el.parentNode;if(el.daypilotMainD){return el.calendar;}};return false;};function touchMousePos(ev){var x=ev.touches[0].pageX;var y=ev.touches[0].pageY;var $9w={};$9w.x=x;$9w.y=y;return $9w;};function status($e,$7G){var status=document.getElementById("status");if(!status){return;};if($7G){status.innerHTML="";};status.innerHTML+=" "+$e;};DayPilotScheduler.gTouchMove=function(ev){if(DayPilotScheduler.resizing){var $i=DayPilotScheduler.resizing.event.calendar;$i.coords=$i.$hr.relativeCoords(ev);$i.$hr.updateResizing();ev.preventDefault();};if(DayPilotScheduler.moving&&!DayPilotScheduler.drag){var $i=DayPilotScheduler.movingEvent.calendar;$i.coords=$i.$hr.relativeCoords(ev);$i.$hr.updateMoving();ev.preventDefault();(function dragOut(){if(!$i.dragOutAllowed){return;};var $aO=calendarFromTouchEvent(ev);if(!$aO||$aO!==$i){var e=DayPilotScheduler.movingEvent;DayPilotScheduler.drag={};var $aI=DayPilotScheduler.drag;$aI.id=e.id();$aI.text=e.text();$aI.schedulerSourceEvent=DayPilotScheduler.moving;$aI.element=null;$aI.duration=(e.rawend().getTime()-e.start().getTime())/1000;$aI.text=e.text();$aI.id=e.id();$aI.event=DayPilot.Util.copyProps(e,new DayPilot.Event());$i.$fJ();DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow.calendar=null;DayPilotScheduler.movingShadow=null;DayPilotScheduler.registered.out();}})();};if(DayPilotScheduler.drag){ev.preventDefault();var $9w=touchMousePos(ev);var $i=calendarFromTouchEvent(ev);if($i){if(DayPilotScheduler.gShadow){document.body.removeChild(DayPilotScheduler.gShadow);};DayPilotScheduler.gShadow=null;$i.coords=$i.$hr.relativeCoords(ev);if(!DayPilotScheduler.movingShadow&&$i.rowlist.length>0){if(!DayPilotScheduler.moving){DayPilotScheduler.moving={};var event=DayPilotScheduler.drag.event;if(!event){var $9z=$i.itline[0].start;var ev={'id':DayPilotScheduler.drag.id,'start':$9z,'end':$9z.addSeconds(DayPilotScheduler.drag.duration),'text':DayPilotScheduler.drag.text};var $q=DayPilotScheduler.drag.data;if($q){var $5b=['duration','element','remove','id','text'];for(var name in $q){if(DayPilot.contains($5b,name)){continue;};ev[name]=$q[name];}};event=new DayPilot.Event(ev);event.calendar=$i;event.part.duration=DayPilotScheduler.drag.duration;};event.part.external=true;var $0l=DayPilotScheduler.drag.schedulerSourceEvent;if($0l&&$0l.event&&$0l.event.calendar===$i){event.part.external=false;};DayPilotScheduler.movingEvent=event;};DayPilotScheduler.movingShadow=$i.$ew(DayPilotScheduler.movingEvent);};if(DayPilotScheduler.moving){$i.$hr.updateMoving();}}else{DayPilot.de(DayPilotScheduler.movingShadow);var $aP=DayPilotScheduler.moving;DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.movingShadow=null;if(!DayPilotScheduler.gShadow){DayPilotScheduler.gShadow=DayPilotScheduler.createGShadow(DayPilotScheduler.drag.data);DayPilotScheduler.gShadow.source=$aP;};var $26=DayPilotScheduler.gShadow;$26.style.left=$9w.x+'px';$26.style.top=$9w.y+'px';DayPilotScheduler.registered.out();}}};DayPilotScheduler.gTouchEnd=function(ev){DayPilotScheduler.gMouseUp(ev);};DayPilotScheduler.gMouseMove=function(ev){if(typeof(DayPilotScheduler)==='undefined'){return;};if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};ev=ev||window.event;if(ev.insideMainD){return;}else if(ev.srcElement){if(ev.srcElement.inside){return;}};var $9w=DayPilot.mc(ev);if(DayPilotScheduler.drag){if(!DayPilotScheduler.drag.startFired){var $q=DayPilotScheduler.drag.data||{};var $aQ=$q.onDragStart;var $1A=false;if(typeof $aQ==="function"){var $l={};$l.data=$q;$l.preventDefault=function(){$l.preventDefault.value=true;};$aQ($l);$1A=$l.preventDefault.value;};DayPilotScheduler.drag.startFired=true;if($1A){DayPilotScheduler.drag=null;return;}};document.body.style.cursor='move';if(!DayPilotScheduler.gShadow){DayPilotScheduler.gShadow=DayPilotScheduler.createGShadow(DayPilotScheduler.drag.data);};var $26=DayPilotScheduler.gShadow;$26.style.left=$9w.x+'px';$26.style.top=$9w.y+'px';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;if(DayPilotScheduler.movingShadow){var $aR=DayPilotScheduler.movingShadow.calendar;$aR&&$aR.$fJ();DayPilotScheduler.movingShadow.calendar=null;DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow=null;}}else if(DayPilotScheduler.moving&&DayPilotScheduler.movingEvent&&DayPilotScheduler.movingEvent.calendar.dragOutAllowed&&!DayPilotScheduler.drag){var $aR=DayPilotScheduler.movingEvent.calendar;var ev=DayPilotScheduler.movingEvent;document.body.style.cursor='move';if(!DayPilotScheduler.gShadow){DayPilotScheduler.gShadow=DayPilotScheduler.createGShadow(ev.data);DayPilotScheduler.gShadow.source=DayPilotScheduler.moving;};var $26=DayPilotScheduler.gShadow;$26.style.left=$9w.x+'px';$26.style.top=$9w.y+'px';DayPilotScheduler.drag={};var $aI=DayPilotScheduler.drag;$aI.schedulerSourceEvent=DayPilotScheduler.moving;$aI.element=null;$aI.duration=(ev.rawend().getTime()-ev.start().getTime())/1000;$aI.text=ev.text();$aI.id=ev.value();$aI.event=DayPilot.Util.copyProps(ev,new DayPilot.Event());$aR.$fJ();DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow.calendar=null;DayPilotScheduler.movingShadow=null;};DayPilotScheduler.registered.out();};DayPilotScheduler.gUnload=function(ev){if(!DayPilotScheduler.registered){return;};for(var i=0;i<DayPilotScheduler.registered.length;i++){var c=DayPilotScheduler.registered[i];DayPilotScheduler.unregister(c);}};DayPilotScheduler.gMouseDown=function(ev){if(DayPilotScheduler.editing){DayPilotScheduler.editing.blur();}};DayPilotScheduler.gKeyUp=function(ev){var ev=ev||window.event;var $6z=ev.keyCode;if($6z===17){if(DayPilotScheduler.rangeCalendar){var $i=DayPilotScheduler.rangeCalendar;$i.$hU.dispatch();}}};DayPilotScheduler.gMouseUp=function(ev){DayPilot.list(DayPilotScheduler.registered).each(function($i){$i.$gX();});if(DayPilotScheduler.resizing){var $aS=function(){var e=DayPilotScheduler.resizingEvent;var $i=e.calendar;document.body.style.cursor='';DayPilotScheduler.resizing=null;DayPilotScheduler.resizingEvent=null;DayPilot.de(DayPilotScheduler.resizingShadow);DayPilotScheduler.resizingShadow=null;$i.$hZ();};setTimeout(function(){DayPilotScheduler.preventEventClick=false;});if(!DayPilotScheduler.resizingShadow){$aS();return;};var e=DayPilotScheduler.resizingEvent;var $i=e.calendar;var $0p=DayPilotScheduler.resizingShadow.finalStart;var $13=DayPilotScheduler.resizingShadow.finalEnd;var $2W=DayPilotScheduler.resizingShadow.overlapping;var $9a=!DayPilotScheduler.resizingShadow.allowed;$i.$fJ();$i.$fy.clear();$aS();if($2W||$9a){return;};$i.$cX(e,$0p,$13);}else if(DayPilotScheduler.movingEvent){var $aS=function(){DayPilot.Global.movingAreaData=null;var $i=DayPilotScheduler.movingShadow&&DayPilotScheduler.movingShadow.calendar;if(DayPilotScheduler.movingShadow){DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow.calendar=null;};document.body.style.cursor='';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.drag=null;$i.$hZ();if($i){$i.$dG=null;}};if(!DayPilotScheduler.movingShadow){$aS();return;};var e=DayPilotScheduler.movingEvent;var $i=DayPilotScheduler.movingShadow.calendar;if(!$i){$aS();return;};DayPilot.Util.removeClass(DayPilotScheduler.moving,$i.$c8($i.$ht.eventMovingSource));(function clearSourceCss(){if(DayPilotScheduler.drag){if(DayPilotScheduler.drag.schedulerSourceEvent){var e=DayPilotScheduler.drag.schedulerSourceEvent;if(e&&e.event){var $aL=e.event.calendar;DayPilot.Util.removeClass(e,$aL.$c8($i.$ht.eventMovingSource));}}}})();if(!DayPilotScheduler.movingShadow.row){$aS();return;};clearTimeout($i.$ff.timeout);var $0p=DayPilotScheduler.movingShadow.start;var $13=DayPilotScheduler.movingShadow.end;var $18=($i.viewType!=='Days')?DayPilotScheduler.movingShadow.row.id:null;var external=(DayPilotScheduler.drag?true:false)&&e.part.external;var $0x=DayPilotScheduler.movingShadow.line;var $2W=DayPilotScheduler.movingShadow.overlapping;var $9a=!DayPilotScheduler.movingShadow.allowed;if(DayPilotScheduler.drag){if(!$i.todo){$i.todo={};};$i.todo.del=DayPilotScheduler.drag.element;DayPilotScheduler.drag=null;};DayPilotScheduler.movingShadow.calendar=null;document.body.style.cursor='';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;if($2W||$9a||$i.$fC.forbidden||$i.$fC.invalid){$i.$dH();return;};var ev=ev||window.event;$i.$dF(e,$0p,$13,$18,external,ev,$0x);DayPilot.Global.movingAreaData=null;}else if(DayPilotScheduler.range){ev=ev||window.event;var $97=DayPilot.Util.mouseButton(ev);var $1t=DayPilotScheduler.range;var $i=$1t.calendar;var $aS=function(){$i.$hZ();};$i.$hS=null;var $1f=ev.ctrlKey||ev.metaKey;if($i.allowMultiRange){if(!$i.elements.range2.overlapping){$i.$hU.add($1t);}else{DayPilot.de($i.elements.range2);$i.elements.range2=null;$i.$fJ();};DayPilotScheduler.range=null;if(!$1f){$i.$hU.dispatch();};$aS();return;};if(DayPilotScheduler.timeRangeTimeout){clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=null;$aS();return;};$i.rangeHold=$1t;DayPilotScheduler.range=null;var $aT=function($1t){return function(){DayPilotScheduler.timeRangeTimeout=null;var $26=$i.elements.range2;if($26&&$26.overlapping){$i.clearSelection();return;};$i.$dL($1t);if($i.timeRangeSelectedHandling!=="Hold"&&$i.timeRangeSelectedHandling!=="HoldForever"){$c();}else{$i.rangeHold=$1t;}};};var rc=$i.$hT($1t);$aS();if(!$97.left){DayPilotScheduler.timeRangeTimeout=null;return;};if($1t.moved||$i.timeRangeDoubleClickHandling==='Disabled'){$aT(rc)();var ev=ev||window.event;ev.cancelBubble=true;return false;}else{DayPilotScheduler.timeRangeTimeout=setTimeout($aT(rc),$i.doubleClickTimeout);}}else if($6q.row){var $i=$6q.calendar;if($i){$i.$gl();}}else if($2l.source){var $i=$2l.calendar;$i.$ez.clearShadow();$i.$ez.hideLinkpoints();$2l.source=null;$2l.calendar=null;}else if(DayPilotScheduler.splitting){var $7Y=DayPilotScheduler.splitting;$7Y.cleanup();DayPilotScheduler.splitting=null;}else if(DayPilotScheduler.rectangleSelect){var $4M=DayPilotScheduler.rectangleSelect;var $i=$4M.calendar;if(!$4M.moved){DayPilotScheduler.rectangleSelect=null;if(!$i.$hA($i.coords)){$i.$hV(ev);};return;};var x=$4M.x;var y=$4M.y;var $A=$4M.width;var $R=$4M.height;var $aU=false;var $Z=$i.$c5.eventsInRectangle(x,y,$A,$R).map(function($00){return $00.event;});if(typeof $i.onRectangleEventSelect==="function"){var $l={};$l.events=$Z;$l.append=false;$l.start=$i.getDate(x,true);$l.end=$i.getDate(x+$A,true);$l.preventDefault=function(){this.preventDefault.value=true;};$i.onRectangleEventSelect($l);if($l.preventDefault.value){$i.$hK.clear();DayPilotScheduler.rectangleSelect=null;return;};$aU=$l.append;};if(!$aU){$i.multiselect.clear(true);};$Z.each(function(e){$i.multiselect.add(e,true);});$i.multiselect.redraw();setTimeout(function(){$i.$hK.clear();DayPilotScheduler.rectangleSelect=null;},0);if(typeof $i.onRectangleEventSelected==="function"){var $l={};$l.events=$Z;$i.onRectangleEventSelected($l);}};if(DayPilotScheduler.drag){if(DayPilotScheduler.drag.event&&DayPilotScheduler.drag.event.part){delete DayPilotScheduler.drag.event.part.external;};DayPilotScheduler.drag=null;document.body.style.cursor='';};if(DayPilotScheduler.gShadow){if(DayPilotScheduler.gShadow.source){var $i=DayPilotScheduler.gShadow.source.event.calendar;DayPilot.Util.removeClass(DayPilotScheduler.gShadow.source,$i.$c8($i.$ht.eventMovingSource));};document.body.removeChild(DayPilotScheduler.gShadow);DayPilotScheduler.gShadow=null;};DayPilotScheduler.moveOffsetX=null;DayPilotScheduler.moveDragStart=null;};DayPilotScheduler.createGShadow=function($h){var $h=$h||{};var $26=document.createElement('div');$26.setAttribute('unselectable','on');$26.style.position='absolute';$26.style.width='100px';$26.style.height='20px';$26.style.zIndex=101;$26.style.pointerEvents="none";$26.style.backgroundColor="#aaaaaa";$26.style.opacity=0.5;$26.style.filter="alpha(opacity=50)";$26.className=$h.externalCssClass;if($h.externalHtml){$26.innerHTML=$h.externalHtml;};document.body.appendChild($26);return $26;};var $6q={};DayPilot.Global.rowmoving=$6q;var $2l={};DayPilot.Global.linking=$2l;if(typeof jQuery!=='undefined'){(function($){$.fn.daypilotScheduler=function($h){var $0N=null;var j=this.each(function(){if(this.daypilot){return;};var $aV=new DayPilot.Scheduler(this.id||this,$h);$aV.init();this.daypilot=$aV;if(!$0N){$0N=$aV;}});if(this.length===1){return $0N;}else{return j;}};})(jQuery);};(function registerAngularModule(){var $aW=DayPilot.am();if(!$aW){return;};$aW.directive("daypilotScheduler",['$parse',function($aX){return{"restrict":"E","template":"<div id='{{id}};'></div>","compile":function compile(element,$aY){element[0].removeAttribute("id");element[0].innerHTML=this["template"].replace("{{id\u007d\u007d",$aY["id"]);return function link($aZ,element,$aY){var $i=new DayPilot.Scheduler(element[0].firstChild);$i.$du.scope=$aZ;var $b0=$aY["id"];if($b0){$aZ[$b0]=$i;};var $b1=$aY["publishAs"];if($b1){var getter=$aX($b1);var setter=getter.assign;setter($aZ,$i);};for(var name in $aY){if(name.indexOf("on")===0){var $b2=DayPilot.Util.shouldApply(name);if($b2){(function(name){$i[name]=function($l){var f=$aX($aY[name]);DayPilot.Util.safeApply($aZ,function(){f($aZ,{"args":$l});});};})(name);}else{(function(name){$i[name]=function($l){var f=$aX($aY[name]);f($aZ,{"args":$l});};})(name);}}};var $b3=$aZ["$watch"];var $5A=$aY["config"]||$aY["daypilotConfig"];var $Z=$aY["events"]||$aY["daypilotEvents"];if(!$5A){$i.init();};$b3.call($aZ,$5A,function($7r,$b4){$i.$dw($7r);if($i.$bT){$i.update();$i.$iu();}else{$i.init();}},true);$Z&&$b3.call($aZ,$Z,function($7r){$i.events.list=$7r;$i.$da({"eventsOnly":true});},true);$aZ.$on("$destroy",function(){$i.dispose();});};}};}]);})();if(typeof Sys!=='undefined'&&Sys.Application&&Sys.Application.notifyScriptLoaded){Sys.Application.notifyScriptLoaded();}})();

