(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{b(jQuery)}}}(function(U){U.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:false,keywords:"",letterCase:"lowercase",opacity:false,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}};U.extend(U.fn,{minicolors:function(b,a){switch(b){case"destroy":U(this).each(function(){A(U(this))});return U(this);case"hide":N();return U(this);case"opacity":if(a===undefined){return U(this).attr("data-opacity")}else{U(this).each(function(){Y(U(this).attr("data-opacity",a))})}return U(this);case"rgbObject":return Q(U(this),b==="rgbaObject");case"rgbString":case"rgbaString":return O(U(this),b==="rgbaString");case"settings":if(a===undefined){return U(this).data("minicolors-settings")}else{U(this).each(function(){var c=U(this).data("minicolors-settings")||{};A(U(this));U(this).minicolors(U.extend(true,c,a))})}return U(this);case"show":B(U(this).eq(0));return U(this);case"value":if(a===undefined){return U(this).val()}else{U(this).each(function(){if(typeof(a)==="object"&&a!==null){if(a.opacity){U(this).attr("data-opacity",I(a.opacity,0,1))}if(a.color){U(this).val(a.color)}}else{U(this).val(a)}Y(U(this))})}return U(this);default:if(b!=="create"){a=b}U(this).each(function(){E(U(this),a)});return U(this)}}});function E(g,b){var i=U('<div class="minicolors" />');var a=U.minicolors.defaults;var e;var c;var f;var d;var h;if(g.data("minicolors-initialized")){return}b=U.extend(true,{},a,b);i.addClass("minicolors-theme-"+b.theme).toggleClass("minicolors-with-opacity",b.opacity);if(b.position!==undefined){U.each(b.position.split(" "),function(){i.addClass("minicolors-position-"+this)})}if(b.format==="rgb"){e=b.opacity?"25":"20"}else{e=b.keywords?"11":"7"}g.addClass("minicolors-input").data("minicolors-initialized",false).data("minicolors-settings",b).prop("size",e).wrap(i).after('<div class="minicolors-panel minicolors-slider-'+b.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');if(!b.inline){g.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>');g.next(".minicolors-input-swatch").on("click",function(j){j.preventDefault();g.focus()})}d=g.parent().find(".minicolors-panel");d.on("selectstart",function(){return false}).end();if(b.swatches&&b.swatches.length!==0){d.addClass("minicolors-with-swatches");c=U('<ul class="minicolors-swatches"></ul>').appendTo(d);for(h=0;h<b.swatches.length;++h){f=b.swatches[h];f=S(f)?M(f,true):H(D(f,true));U('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(c).data("swatch-color",b.swatches[h]).find(".minicolors-swatch-color").css({backgroundColor:Z(f),opacity:f.a});b.swatches[h]=f}}if(b.inline){g.parent().addClass("minicolors-inline")}Y(g,false);g.data("minicolors-initialized",true)}function A(a){var b=a.parent();a.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");b.before(a).remove()}function B(d){var b=d.parent();var a=b.find(".minicolors-panel");var c=d.data("minicolors-settings");if(!d.data("minicolors-initialized")||d.prop("disabled")||b.hasClass("minicolors-inline")||b.hasClass("minicolors-focus")){return}N();b.addClass("minicolors-focus");a.stop(true,true).fadeIn(c.showSpeed,function(){if(c.show){c.show.call(d.get(0))}});let h_top=d.offset().top+a.outerHeight()+d.outerHeight();if(h_top<=U(window).height()){}else{a.css("top",0-a.outerHeight()-2)}}function N(){U(".minicolors-focus").each(function(){var b=U(this);var d=b.find(".minicolors-input");var a=b.find(".minicolors-panel");var c=d.data("minicolors-settings");a.fadeOut(c.hideSpeed,function(){if(c.hide){c.hide.call(d.get(0))}b.removeClass("minicolors-focus")})})}function G(h,c,b){var e=h.parents(".minicolors").find(".minicolors-input");var a=e.data("minicolors-settings");var j=h.find("[class$=-picker]");var k=h.offset().left;var l=h.offset().top;var f=Math.round(c.pageX-k);var g=Math.round(c.pageY-l);var n=b?a.animationSpeed:0;var m,o,d,i;if(c.originalEvent.changedTouches){f=c.originalEvent.changedTouches[0].pageX-k;g=c.originalEvent.changedTouches[0].pageY-l}if(f<0){f=0}if(g<0){g=0}if(f>h.width()){f=h.width()}if(g>h.height()){g=h.height()}if(h.parent().is(".minicolors-slider-wheel")&&j.parent().is(".minicolors-grid")){m=75-f;o=75-g;d=Math.sqrt(m*m+o*o);i=Math.atan2(o,m);if(i<0){i+=Math.PI*2}if(d>75){d=75;f=75-(75*Math.cos(i));g=75-(75*Math.sin(i))}f=Math.round(f);g=Math.round(g)}if(h.is(".minicolors-grid")){j.stop(true).animate({top:g+"px",left:f+"px"},n,a.animationEasing,function(){R(e,h)})}else{j.stop(true).animate({top:g+"px"},n,a.animationEasing,function(){R(e,h)})}}function R(h,a){function e(aa,ab){var y,z;if(!aa.length||!ab){return null}y=aa.offset().left;z=aa.offset().top;return{x:y-ab.offset().left+(aa.outerWidth()/2),y:z-ab.offset().top+(aa.outerHeight()/2)}}var q,p,b,j,k,g,t;var m=h.val();var s=h.attr("data-opacity");var r=h.parent();var c=h.data("minicolors-settings");var f=r.find(".minicolors-input-swatch");var x=r.find(".minicolors-grid");var d=r.find(".minicolors-slider");var n=r.find(".minicolors-opacity-slider");var o=x.find("[class$=-picker]");var i=d.find("[class$=-picker]");var u=n.find("[class$=-picker]");var v=e(o,x);var w=e(i,d);var l=e(u,n);if(a.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(c.control){case"wheel":j=(x.width()/2)-v.x;k=(x.height()/2)-v.y;g=Math.sqrt(j*j+k*k);t=Math.atan2(k,j);if(t<0){t+=Math.PI*2}if(g>75){g=75;v.x=69-(75*Math.cos(t));v.y=69-(75*Math.sin(t))}p=I(g/0.75,0,100);q=I(t*180/Math.PI,0,360);b=I(100-Math.floor(w.y*(100/d.height())),0,100);m=X({h:q,s:p,b:b});d.css("backgroundColor",X({h:q,s:p,b:100}));break;case"saturation":q=I(parseInt(v.x*(360/x.width()),10),0,360);p=I(100-Math.floor(w.y*(100/d.height())),0,100);b=I(100-Math.floor(v.y*(100/x.height())),0,100);m=X({h:q,s:p,b:b});d.css("backgroundColor",X({h:q,s:100,b:b}));r.find(".minicolors-grid-inner").css("opacity",p/100);break;case"brightness":q=I(parseInt(v.x*(360/x.width()),10),0,360);p=I(100-Math.floor(v.y*(100/x.height())),0,100);b=I(100-Math.floor(w.y*(100/d.height())),0,100);m=X({h:q,s:p,b:b});d.css("backgroundColor",X({h:q,s:p,b:100}));r.find(".minicolors-grid-inner").css("opacity",1-(b/100));break;default:q=I(360-parseInt(w.y*(360/d.height()),10),0,360);p=I(Math.floor(v.x*(100/x.width())),0,100);b=I(100-Math.floor(v.y*(100/x.height())),0,100);m=X({h:q,s:p,b:b});x.css("backgroundColor",X({h:q,s:100,b:100}));break}if(c.opacity){s=parseFloat(1-(l.y/n.height())).toFixed(2)}else{s=1}P(h,m,s)}else{f.find("span").css({backgroundColor:m,opacity:s});V(h,m,s)}}function P(a,c,f){var g;var b=a.parent();var d=a.data("minicolors-settings");var e=b.find(".minicolors-input-swatch");if(d.opacity){a.attr("data-opacity",f)}if(d.format==="rgb"){if(S(c)){g=M(c,true)}else{g=H(D(c,true))}f=a.attr("data-opacity")===""?1:I(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(f)||!d.opacity){f=1}if(a.minicolors("rgbObject").a<=1&&g&&d.opacity){c="rgba("+g.r+", "+g.g+", "+g.b+", "+parseFloat(f)+")"}else{c="rgb("+g.r+", "+g.g+", "+g.b+")"}}else{if(S(c)){c=J(c)}c=L(c,d.letterCase)}a.val(c);e.find("span").css({backgroundColor:c,opacity:f});V(a,c,f)}function Y(h,g){var m,e,r,l,p,c,j,k,f,s;var q=h.parent();var a=h.data("minicolors-settings");var d=q.find(".minicolors-input-swatch");var u=q.find(".minicolors-grid");var b=q.find(".minicolors-slider");var n=q.find(".minicolors-opacity-slider");var o=u.find("[class$=-picker]");var i=b.find("[class$=-picker]");var t=n.find("[class$=-picker]");if(S(h.val())){m=J(h.val());p=I(parseFloat(F(h.val())).toFixed(2),0,1);if(p){h.attr("data-opacity",p)}}else{m=L(D(h.val(),true),a.letterCase)}if(!m){m=L(K(a.defaultValue,true),a.letterCase)}e=W(m);l=!a.keywords?[]:U.map(a.keywords.split(","),function(v){return U.trim(v.toLowerCase())});if(h.val()!==""&&U.inArray(h.val().toLowerCase(),l)>-1){c=L(h.val())}else{c=S(h.val())?M(h.val()):m}if(!g){h.val(c)}if(a.opacity){r=h.attr("data-opacity")===""?1:I(parseFloat(h.attr("data-opacity")).toFixed(2),0,1);if(isNaN(r)){r=1}h.attr("data-opacity",r);d.find("span").css("opacity",r);k=I(n.height()-(n.height()*r),0,n.height());t.css("top",k+"px")}if(h.val().toLowerCase()==="transparent"){d.find("span").css("opacity",0)}d.find("span").css("backgroundColor",m);switch(a.control){case"wheel":f=I(Math.ceil(e.s*0.75),0,u.height()/2);s=e.h*Math.PI/180;j=I(75-Math.cos(s)*f,0,u.width());k=I(75-Math.sin(s)*f,0,u.height());o.css({top:k+"px",left:j+"px"});k=150-(e.b/(100/u.height()));if(m===""){k=0}i.css("top",k+"px");b.css("backgroundColor",X({h:e.h,s:e.s,b:100}));break;case"saturation":j=I((5*e.h)/12,0,150);k=I(u.height()-Math.ceil(e.b/(100/u.height())),0,u.height());o.css({top:k+"px",left:j+"px"});k=I(b.height()-(e.s*(b.height()/100)),0,b.height());i.css("top",k+"px");b.css("backgroundColor",X({h:e.h,s:100,b:e.b}));q.find(".minicolors-grid-inner").css("opacity",e.s/100);break;case"brightness":j=I((5*e.h)/12,0,150);k=I(u.height()-Math.ceil(e.s/(100/u.height())),0,u.height());o.css({top:k+"px",left:j+"px"});k=I(b.height()-(e.b*(b.height()/100)),0,b.height());i.css("top",k+"px");b.css("backgroundColor",X({h:e.h,s:e.s,b:100}));q.find(".minicolors-grid-inner").css("opacity",1-(e.b/100));break;default:j=I(Math.ceil(e.s/(100/u.width())),0,u.width());k=I(u.height()-Math.ceil(e.b/(100/u.height())),0,u.height());o.css({top:k+"px",left:j+"px"});k=I(b.height()-(e.h/(360/b.height())),0,b.height());i.css("top",k+"px");u.css("backgroundColor",X({h:e.h,s:100,b:100}));break}if(h.data("minicolors-initialized")){V(h,c,r)}}function V(a,c,h){var f=a.data("minicolors-settings");var e=a.data("minicolors-lastChange");var b,d,g;if(!e||e.value!==c||e.opacity!==h){a.data("minicolors-lastChange",{value:c,opacity:h});if(f.swatches&&f.swatches.length!==0){if(!S(c)){b=H(c)}else{b=M(c,true)}d=-1;for(g=0;g<f.swatches.length;++g){if(b.r===f.swatches[g].r&&b.g===f.swatches[g].g&&b.b===f.swatches[g].b&&b.a===f.swatches[g].a){d=g;break}}a.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");if(d!==-1){a.parent().find(".minicolors-swatches .minicolors-swatch").eq(g).addClass("selected")}}if(f.change){if(f.changeDelay){clearTimeout(a.data("minicolors-changeTimeout"));a.data("minicolors-changeTimeout",setTimeout(function(){f.change.call(a.get(0),c,h)},f.changeDelay))}else{f.change.call(a.get(0),c,h)}}a.trigger("change").trigger("input")}}function Q(a){var c,d=U(a).attr("data-opacity");if(S(U(a).val())){c=M(U(a).val(),true)}else{var b=D(U(a).val(),true);c=H(b)}if(!c){return null}if(d!==undefined){U.extend(c,{a:parseFloat(d)})}return c}function O(a,b){var d,e=U(a).attr("data-opacity");if(S(U(a).val())){d=M(U(a).val(),true)}else{var c=D(U(a).val(),true);d=H(c)}if(!d){return null}if(e===undefined){e=1}if(b){return"rgba("+d.r+", "+d.g+", "+d.b+", "+parseFloat(e)+")"}else{return"rgb("+d.r+", "+d.g+", "+d.b+")"}}function L(a,b){return b==="uppercase"?a.toUpperCase():a.toLowerCase()}function D(a,b){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)){return""}if(a.length!==3&&a.length!==6){return""}if(a.length===3&&b){a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]}return"#"+a}function M(d,b){var a=d.replace(/[^\d,.]/g,"");var c=a.split(",");c[0]=I(parseInt(c[0],10),0,255);c[1]=I(parseInt(c[1],10),0,255);c[2]=I(parseInt(c[2],10),0,255);if(c[3]){c[3]=I(parseFloat(c[3],10),0,1)}if(b){if(c[3]){return{r:c[0],g:c[1],b:c[2],a:c[3]}}else{return{r:c[0],g:c[1],b:c[2]}}}if(typeof(c[3])!=="undefined"&&c[3]<=1){return"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"}else{return"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}}function K(a,b){if(S(a)){return M(a)}else{return D(a,b)}}function I(b,c,a){if(b<c){b=c}if(b>a){b=a}return b}function S(b){var a=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(a&&a.length===4)?true:false}function F(a){a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i);return(a&&a.length===6)?a[4]:"1"}function C(a){var g={};var c=Math.round(a.h);var d=Math.round(a.s*255/100);var h=Math.round(a.b*255/100);if(d===0){g.r=g.g=g.b=h}else{var b=h;var e=(255-d)*h/255;var f=(b-e)*(c%60)/60;if(c===360){c=0}if(c<60){g.r=b;g.b=e;g.g=e+f}else{if(c<120){g.g=b;g.b=e;g.r=b-f}else{if(c<180){g.g=b;g.r=e;g.b=e+f}else{if(c<240){g.b=b;g.r=e;g.g=b-f}else{if(c<300){g.b=b;g.g=e;g.r=e+f}else{if(c<360){g.r=b;g.g=e;g.b=b-f}else{g.r=0;g.g=0;g.b=0}}}}}}}return{r:Math.round(g.r),g:Math.round(g.g),b:Math.round(g.b)}}function J(a){a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return(a&&a.length===4)?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function Z(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];U.each(b,function(d,c){if(c.length===1){b[d]="0"+c}});return"#"+b.join("")}function X(a){return Z(C(a))}function W(b){var a=T(H(b));if(a.s===0){a.h=360}return a}function T(d){var e={h:0,s:0,b:0};var c=Math.min(d.r,d.g,d.b);var a=Math.max(d.r,d.g,d.b);var b=a-c;e.b=a;e.s=a!==0?255*b/a:0;if(e.s!==0){if(d.r===a){e.h=(d.g-d.b)/b}else{if(d.g===a){e.h=2+(d.b-d.r)/b}else{e.h=4+(d.r-d.g)/b}}}else{e.h=-1}e.h*=60;if(e.h<0){e.h+=360}e.s*=100/255;e.b*=100/255;return e}function H(a){a=parseInt(((a.indexOf("#")>-1)?a.substring(1):a),16);return{r:a>>16,g:(a&65280)>>8,b:(a&255)}}U([document]).on("mousedown.minicolors touchstart.minicolors",function(a){if(!U(a.target).parents().add(a.target).hasClass("minicolors")){N()}}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var b=U(this);a.preventDefault();U(a.delegateTarget).data("minicolors-target",b);G(b,a,true)}).on("mousemove.minicolors touchmove.minicolors",function(a){var b=U(a.delegateTarget).data("minicolors-target");if(b){G(b,a)}}).on("mouseup.minicolors touchend.minicolors",function(){U(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(c){c.preventDefault();var b=U(this),d=b.parents(".minicolors").find(".minicolors-input"),a=b.data("swatch-color");P(d,a,F(a));Y(d)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(b){var a=U(this).parent().find(".minicolors-input");b.preventDefault();B(a)}).on("focus.minicolors",".minicolors-input",function(){var a=U(this);if(!a.data("minicolors-initialized")){return}B(a)}).on("blur.minicolors",".minicolors-input",function(){var g=U(this);var d=g.data("minicolors-settings");var e;var c;var f;var a;var b;if(!g.data("minicolors-initialized")){return}e=!d.keywords?[]:U.map(d.keywords.split(","),function(h){return U.trim(h.toLowerCase())});if(g.val()!==""&&U.inArray(g.val().toLowerCase(),e)>-1){b=g.val()}else{if(S(g.val())){f=M(g.val(),true)}else{c=D(g.val(),true);f=c?H(c):null}if(f===null){b=d.defaultValue}else{if(d.format==="rgb"){b=d.opacity?M("rgba("+f.r+","+f.g+","+f.b+","+g.attr("data-opacity")+")"):M("rgb("+f.r+","+f.g+","+f.b+")")}else{b=Z(f)}}}a=d.opacity?g.attr("data-opacity"):1;if(b.toLowerCase()==="transparent"){a=0}g.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",a);g.val(b);if(g.val()===""){g.val(K(d.defaultValue,true))}g.val(L(g.val(),d.letterCase))}).on("keydown.minicolors",".minicolors-input",function(b){var a=U(this);if(!a.data("minicolors-initialized")){return}switch(b.keyCode){case 9:N();break;case 13:case 27:N();a.blur();break}}).on("keyup.minicolors",".minicolors-input",function(){var a=U(this);if(!a.data("minicolors-initialized")){return}Y(a,true)}).on("paste.minicolors",".minicolors-input",function(){var a=U(this);if(!a.data("minicolors-initialized")){return}setTimeout(function(){Y(a,true)},1)})}));